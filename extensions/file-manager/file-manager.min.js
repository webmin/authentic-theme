/*!
 * Authentic Theme (https://github.com/authentic-theme/authentic-theme)
 * Copyright Ilia Rostovtsev <ilia@virtualmin.com>
 * Licensed under MIT (https://github.com/authentic-theme/authentic-theme/blob/master/LICENSE)
 */
function __f___globals(){$____loader_block__=1,$____loader_block__manual=0,$g__v__home_base=Math.random(),$v__fm__container_fluid=".container-fluid",$v__fm__container_fluid_form=".container-fluid #list_form",$v__fm__container_fluid_modal_in=".container-fluid .modal.in",$v__fm__global_error=0,$v__fm__global_last_row=0,$v__fm__global_last_row_active=0,$v__fm__tree_node_prog=0,$v__fm__tree_node_sp=1,$v__fm__tr_hover_active=1,fm_stored_listing.data={},fm_previous_path_used="",fm_deletion_type=config_portable_module_filemanager_move_to_trash,fm_deletion_to_trash=fm_deletion_type,fm_deletion_empty_trash=0,fm_deletion_empty_trash_previous=0,fm_overwrite_files=!config_portable_module_filemanager_files_safe_mode,fm_overwrite_files_mode_reset=function(){fm_overwrite_files=!config_portable_module_filemanager_files_safe_mode},fm_bookmark_searched_str=null;if(typeof fm_user_data==="undefined"){fm_user_data=[]}fm_users_data_dynamic=null,fm_goto_previous=0,fm_refreshing_current=0,$v__fm__tree=0;initial_fm_load=1;$($v__fm__container_fluid).addClass("fmx");$v__fm__container_fluid+=".fmx";tab___to______create=1}const fm_stored_listing={previous:{set:function(){this.value=parseInt($($v__fm__container_fluid+" .dataTables_paginate:visible .active a").text())||1},value:1},data:{},var:function(){var e=v___server_username;return{tab:function(){return"tab"+get_active_tab_id()}(),cpath:function(){return fm_get_current_path()}(),ppath:function(){return fm_previous_path_used}(),user:e}},test:function(){if(this.data[this.var().user]&&this.data[this.var().user][this.var().tab]&&this.data[this.var().user][this.var().tab][this.var().cpath]){var e=this.data[this.var().user][this.var().tab][this.var().cpath];return e?e:0}},delete:function(){try{if(this.var().ppath&&this.data[this.var().user]&&this.data[this.var().user][this.var().tab]){delete this.data[this.var().user][this.var().tab]}}catch(e){}},store:function(e){try{var a=e||this.var().ppath,t=this.var().user,_=this.var().tab;if(a){if(!this.data[t]){this.data[t]={[_]:{[a]:this.previous.value}}}else{if(this.data[t][_]){this.data[t][_][a]=this.previous.value}else{this.data[t][_]={[a]:this.previous.value}}}}}catch(e){}}};function _f__table(){var e=$(".container-fluid .tab-pane.active").attr("id");if(e&&e.length){var a=parseInt(e.replace(/^\D+/g,""));return window["_f__table"+a]}else{return false}}function fm_root_dir_spinner_remove(){$($v__fm__container_fluid_form).find(".cspinner-folder-btl").remove()}function fm_root_dir_spinner_add(){fm_root_dir_spinner_remove();$($v__fm__container_fluid+" .active i.fa-folder-btl").after('<span class="cspinner cspinner-folder-btl"><span class="cspinner-icon smaller"></span></span>')}function fm_target_spinner_remove(){$($v__fm__container_fluid_form).find(".cspinner-target").remove()}function fm_target_spinner_add(e){fm_target_spinner_remove();e&&e.first().find("img").before('<span class="cspinner cspinner-target"><span class="cspinner-icon smaller"></span></span>')}function __f__refresh__dir_and_tree(){var e=fm_get_current_path();fm_refreshing_current=1;__f____r("get","index.cgi?path="+(e?e+extra_query():""),false,0);fm_root_dir_spinner_add()}function deselectAllRows(){var e=_f__table(),a;if(e){rows=e.dataTable().$("tr.hl-aw",{filter:"applied"});for(i=0;i<rows.length;i++){var t=rows[i].getElementsByTagName("input")[0];if(t.checked){rowClick(rows[i])}}}}function selectAllRows(){var e=_f__table(),a;if(e){rows=e.dataTable().$("tr");for(i=0;i<rows.length;i++){var t=rows[i].getElementsByTagName("input")[0];if(!t.checked){rowClick(rows[i])}}}}function __f__cnt___total(e){if(e){e=":visible"}else{e=String()}var a=_f__table(),t;if(a){t=a.dataTable().$("tr"+e+"").length}return t}function __f__cnt___selected(e){if(e){e=":visible"}else{e=String()}var a=_f__table(),t;if(a){t=a.dataTable().$("tr"+e+".hl-aw",{filter:"applied"}).length}return t}function fm_get_selected_rows(e){if(e){e=":visible"}else{e=String()}var a=_f__table(),t;if(a){t=a.dataTable().$("tr"+e+".hl-aw",{filter:"applied"})}return t}function total_selected_count_update(e,a,t){if(!e){e=t?0:__f__cnt___selected()}var _="data-all",n="["+_+'="1"]',i=":not("+n+")";if(a){i=String();$(n).removeAttr(_)}$($v__fm__container_fluid+" .total_selected"+i+"").html(e==1?theme_language("filemanager_selected_entry").replace("%value","<span>1</span>"):theme_language("filemanager_selected_entries").replace("%value","<span>"+e+"</span>"))}function __r____changed(){if($("body").attr("class")&&$("body").attr("class").indexOf(v___module_file_manager)>-1){$(".total_size_data").parent("span").addClass("hidden");var e=__f__cnt___selected();if(e){__f___ub()}else{__f___lb()}total_selected_count_update(e);if(__f__cnt___selected(1)!=__f__cnt___total(1)){select_all_entries("remove")}}}function file_manager_table_rows_control(){var e=this;this.p_a=undefined;var a="ui_checked_columns",t="click.ranged",_="input.iawobject",n="td:first-child",i=$($v__fm__container_fluid);i.off(t);i.on(t,".active ."+a+":visible:not(.directory_go_up) "+n+" "+_,function(t){var i=$(this).parents("tr."+a+"");document.activeElement.blur();t.stopPropagation();setTimeout(function(){e.p_a=i},50);if(!$(t.target).is(_)||!vars.events.keypressed.shift){return}if(vars.events.keypressed.shift&&e.p_a&&!e.p_a.is(i)&&t.originalEvent&&t.originalEvent.isTrusted===true){var r=e.p_a.index(),o=i.index(),s=o>r?i.prevUntil(e.p_a):i.nextUntil(e.p_a),l=""+n+" "+_+"";var f=e.p_a.find(l).is(":checked");s.find(l).each(function(a,t){$(t).add(e.p_a.find(l)).prop("checked",f);$(t).trigger("change")})}})}function check_pagination_option(){if($.inArray(parseInt(config_portable_module_filemanager_records_per_page),[5,10,15,20,25,30,35,40,45,50,55,60,70,80,90,100,250,500])===-1){config_portable_module_filemanager_records_per_page=30}}function get_current_list_stats(){var e=a=$($v__fm__container_fluid+" .panel-body .total:visible").contents().filter(function(){return this.nodeType==3})[0].data,a=e.match(/[0-9]+(,[0-9]+)*/g),t=a.length>2?1:0,_=t?a[2]:parseInt(a[0])+parseInt(a[1]),n=t?a[3]:$($v__fm__container_fluid+" .dataTables_paginate:visible a").length-2;return[_,n]}function select_all_entries(e){var a='data-select-all-entries="affirmative"',t="["+a+"]",_='data-yes="1"',n='data-no="1"',i='data-alert-text="1"',r='data-clear="1"';if(e){if(e==="remove"){$(t).remove();total_selected_count_update(__f__cnt___selected(),1)}else if(e==="test"){return $(t).find("["+r+"]").length}else if(e==="test_unconf"){return $(t).find("["+_+"]").length}return}var o=get_current_list_stats(),s=o[0],l=o[1];if(l===-2||l==1){return}var f=theme_language("filemanager_mass_select").replace("%1","<b>"+s+"</b>").replace("%2","<b>"+l+"</b>"),c=theme_language("filemanager_mass_selected").replace("%1","<b>"+s+"</b>"),d="<button "+r+' class="btn btn-xxs btn-warning-l">'+theme_language("filemanager_mass_select_clear")+"</button>",m="<div "+a+' class="alert alert-warning text-center"><span '+i+">"+f+"</span>&nbsp;&nbsp;"+'<div class="btn-group btn-group-xs">'+"<button "+_+' class="btn btn-xxs btn-warning-l">'+theme_language("global_yes")+"</button>"+"<button "+n+' class="btn btn-xxs btn-warning-l">'+theme_language("global_no")+"</button>"+"</div></div>",u=$($v__fm__container_fluid+" .data-content-container");if($(t).length){return}u.prepend(m);$(t).find("["+_+"]").one("click",function(e){$(this).parent().html(d).parent().find("["+i+"]").html(c);$($v__fm__container_fluid+" .total_selected").attr("data-all",1).find("span").text(s);selectAllRows()});$(t).find("["+n+"]").one("click",function(e){select_all_entries("remove")});$(t).one("click","["+r+"]",function(e){select_all_entries("remove");deselectAllRows(),total_selected_count_update(0,0,1),__f___lb()})}function f__ck_init_err(e){var a=!$($v__fm__container_fluid_form).length&&$('a.page_footer_submit[href*="index.cgi?path="]').length||core.error.get(),t=$(".container-fluid-loading").find(".cspinner-icon").length;if(e){return a}if(a){$v__fm__global_error=1;$(".data-content-container").addClass("hidden");t&&page.handle.content.preloader.show();__f_____undel()}}function get_link(e,a){var t=String(),_=fm_get_current_path();extra_params=extra_query(e);__f____r("get","index.cgi?path="+_+""+extra_params,false,0)}function __f___b_dr(e){var a=fm_get_current_path();if(a==="%2F"){return}var t="";if($($v__fm__container_fluid+" .breadcrumb li:first-child i").hasClass("fa-search")){t="index.cgi?path="+a}else{t=$($v__fm__container_fluid+" .breadcrumb > li:eq(-2) > a").attr("href")}if(!t){t="index.cgi?path=%2F"}fm_goto_previous=1;if(a){var _=a.split("%2F").pop();if(_){fm_goto_previous="name="+_+""}}__f____r("get",t,"",0,false,e.originalEvent!==undefined);fm_root_dir_spinner_add()}function __f___o_dr(e,a,t,_,n){if(t||n){fm_target_spinner_add(e);__f____r("get",t,false,0,false,_)}}function f__insert_dir_up(){var e=fm_get_current_path();e&&e!="/"&&e!="%2F"&&!$($v__fm__container_fluid+" .active table tbody tr.directory_go_up").length&&$($v__fm__container_fluid+" .active table tbody").prepend('<tr class="ui_checked_columns directory_go_up" style="height: 23px;"><td colspan="'+$($v__fm__container_fluid+" .active thead tr th:visible").length+'"><input class="hidden" type="hidden">&nbsp;<i class="fa fa-fw fa-folder-btl"></i>&nbsp;..</td></tr>')}function __f___um(){var e=fm_get_current_home_username();if(!e&&!config_portable_module_filemanager_switch_users){if(fm_user_data&&fm_user_data.user){e=fm_user_data.user}}if(!!e){return"&username="+e+""}else{return""}}function f__act_tab_name(e){$($v__fm__container_fluid+" [data-tab-path]").filter(function(a,t){if(e.endsWith($(t).text())||$(t).text()===e||$(t).text()==="/"&&e===""){$(t).parent("a").trigger("click");return}})}function f__chk_loading(){if(v___module!=v___module_file_manager){return}if(f__ck_init_err(1)){f__ck_init_err();return}var e=$("[data-tab-path]");if($(".container-fluid.fmx .dataTable").length){setTimeout(function(){__f__c__m();file_manager_table_rows_control();setTimeout(function(){initial_fm_load=0},5e3)},2);setTimeout(function(){var e="file-manager";$.getScript(""+v___server_extensions_path+"/"+e+"/"+e+"-reinit."+v___source_type+".js?"+theme.version(true,true)*10+"").fail(function(e){if(e.statusText!=="canceled"&&e.statusText!=="abort"){connection_error(e,1)}})},401)}else{setTimeout(f__chk_loading,10)}}function __f___gd(){var e=$(_f__table().fnGetNodes()).find("input").add($($v__fm__container_fluid+" .active form > input:not([name='path'])")).serialize();e=e+"&path="+fm_get_current_path();return e}function _f__gr(e){if(e){return $(_f__table().fnGetNodes()).find("input:checked")}else{return $(_f__table().fnGetNodes()).find("input")}}function __f__ld__sh(){}function __f__ld__bg(){theme_modal_dismiss();__f_____ul()}function __f__upd_____tl(e){var a=$($v__fm__container_fluid+" div.total").children().clone();$($v__fm__container_fluid+" div.total").empty().html(e+".&nbsp;").append(a)}function __f__ck_lock(){return $("body.file-manager").find($v__fm__container_fluid_form+" table tbody").hasClass("o__f_m-updating")}function __f___ub(){$($v__fm__container_fluid+" div button.o__f_m-button-delete").removeClass("disabled").attr("onclick","removeDialog()");$($v__fm__container_fluid+" .o__f_m-button-chmod").removeClass("disabled").find("a").attr("onclick","chmodDialog()");$($v__fm__container_fluid+" .o__f_m-button-chown").removeClass("disabled").find("a").attr("onclick","chownDialog()");$($v__fm__container_fluid+" .o__f_m-button-chattr").removeClass("disabled").find("a").attr("onclick","chattrDialog()");$($v__fm__container_fluid+" .o__f_m-button-chcon").removeClass("disabled").find("a").attr("onclick","chconDialog()");$($v__fm__container_fluid+" .o__f_m-button-compress").removeClass("disabled").find("a").attr("onclick","compressDialog()");$($v__fm__container_fluid+" .o__f_m-button-copy").removeClass("disabled");$($v__fm__container_fluid+" .o__f_m-button-cut").removeClass("disabled");__f__cond_l()}function __f___lb(){$($v__fm__container_fluid+" div button.o__f_m-button-delete").addClass("disabled").removeAttr("onclick");$($v__fm__container_fluid+" .o__f_m-button-chmod").addClass("disabled").find("a").removeAttr("onclick");$($v__fm__container_fluid+" .o__f_m-button-chown").addClass("disabled").find("a").removeAttr("onclick");$($v__fm__container_fluid+" .o__f_m-button-chattr").addClass("disabled").find("a").removeAttr("onclick");$($v__fm__container_fluid+" .o__f_m-button-chcon").addClass("disabled").find("a").removeAttr("onclick");$($v__fm__container_fluid+" .o__f_m-button-compress").addClass("disabled").find("a").removeAttr("onclick");$($v__fm__container_fluid+" .o__f_m-button-copy").addClass("disabled").find("a").removeAttr("onclick");$($v__fm__container_fluid+" .o__f_m-button-cut").addClass("disabled").find("a").removeAttr("onclick");__f__cond_l()}function __f__cond_l(){var e=$($v__fm__container_fluid+" .o__f_m-button-symlink"),a=$("#__f__c__m a[data-context-newsymlink]").parent("li");if(__f__cnt___selected()>=1){e.removeClass("disabled");a.removeClass("disabled")}else{e.addClass("disabled");a.addClass("disabled")}}function __f_____sl(){}function __f_____hl(){}function __f_____hl_(){setTimeout(function(){},750)}function __f_____undel(){var e="body",a=$(e);var t='.breadcrumb:visible [data-toggle="popover-path"]';a.undelegate(t,"inserted.bs.popover shown.bs.popover hide.bs.popover");var t=$v__fm__container_fluid+' [data-toggle="popover-path"]';a.undelegate(t,"hide.bs.popover");var t=$v__fm__container_fluid+' a[data-toggle="tab"]';a.undelegate(t,"hide.bs.tab show.bs.tab shown.bs.tab");var t="click.fm dblclick.fm click.ranged click.fmcmenu contextmenu.fm submit.fm change.fm changed.fm input.fm mouseleave.fm mouseenter.fm mouseup.fm mouseout.fm mouseover.fm mousemove.fm input.fm keyup.fm keydown.fm keypress.fm sortupdate.fm resize.fm";a.off(t);$(e+" *").undelegate(t).unbind(t).off(t)}function __f__dw__dir(e){var a=fm_get_current_path(),t=fm_get_current_home_username(),_=t?t:v___server_username,n=config_portable_module_filemanager_force_tar==false?1:0,i=id=parseInt(Math.random()*1e3),r="preparing_download_"+i+"",o=new Date,s=o.getFullYear()+"."+(o.getMonth()+1)+"."+o.getDate()+"_"+o.getHours()+"."+o.getMinutes()+"."+o.getSeconds(),l="download-"+s+"-"+_+"-("+v___server_hostname+")",f="...";plugins.messenger.post('<i class="fa fa-lg fa-fw fa-file-archive-o"></i>'+theme_language("filemanager_preparing_download").replace("%number",e).replace("%dots",""+f+'&nbsp;&nbsp;&nbsp;<span class="cspinner"><span class="cspinner-icon white smallest margined-top-4"></span></span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span data-cancel-preparing-download-'+i+' class="cancel-preparing-download fa fa-fw fa-lg fa-times-circle pull-right cursor-pointer margined-top--7 margined-right--20"></span>'),0,"info",r,0,["bottom","right"]);$("[data-cancel-preparing-download-"+i+"]").one("click",function(){window[r].abort();plugins.messenger.toast.hide(r);plugins.messenger.post({type:"error",icon:"times-circle",id:r,message:theme_language("filemanager_canceled_download"),position:"bottomRight",cancel:false});$.ajax({type:"GET",url:v___server_extensions_path+"/file-manager/download.cgi?cancel=1&filename="+l+"&path="+a+"&do_zip="+n+"&module="+v___module_file_manager+extra_query()})});window[r]=$.ajax({xhr:function(){var e=new window.XMLHttpRequest;return e},type:"POST",url:v___server_extensions_path+"/file-manager/download.cgi?filename="+l+"&do_zip="+n+"&module="+v___module_file_manager+extra_query(),data:__f___gd(),dataType:"text",success:function(t){if(!session.status(t)){return}window.location.replace(v___server_extensions_path+"/file-manager/download.cgi?download=1&filename="+l+"&path="+a+"&do_zip="+n+"&module="+v___module_file_manager+extra_query());plugins.messenger.toast.hide(r);plugins.messenger.post({type:"success",icon:"download-cloud",id:r,message:theme_language("filemanager_prepared_download").replace("%number",e).replace("%dots",f),position:"bottomRight",cancel:false,timeout:2e3})},error:function(e){}})}function context_menu_toggle_delete_trash(e){var a=$("#__f__c__m");if(a.is(":visible")){var t="context-delete-trash",_=theme_language("filemanager_context_delete"),n=theme_language("filemanager_context_move_to_trash"),i=a.find("[data-"+t+"]"),r=e?!config_portable_module_filemanager_move_to_trash:config_portable_module_filemanager_move_to_trash;$context_menu_selector_delete_text_target=i.find("span"),$context_menu_selector_delete_icon_target=i.find(".fa"),context_menu_selector_delete_icon_delete="fa-trash-o",context_menu_selector_delete_icon_trash="fa-trash";i.data(t,~~!r);i.attr("data-"+t+"",~~!r);$context_menu_selector_delete_icon_target.addClass(r?context_menu_selector_delete_icon_delete:context_menu_selector_delete_icon_trash).removeClass(!r?context_menu_selector_delete_icon_delete:context_menu_selector_delete_icon_trash);$context_menu_selector_delete_text_target.text(r?_:n)}}function __f_____lo(e,a){if(a===true){$("body.file-manager").find("#list_form table tbody").addClass((e?" o__f_m-updating":"")+"");$("body.file-manager").find("ul.pagination").addClass("pointer-events-none");$($v__fm__container_fluid+" .nav.nav-tabs li").addClass("disabled");$("#file-manager-new-instance").addClass("disabled_no_styling cursor-na")}__f_____sl()}function __f_____ul(){$("body.file-manager").find("#list_form table tbody").css("opacity","1").removeClass("o__f_m-updating");$("body.file-manager").find("ul.pagination").css("opacity","1").removeClass("pointer-events-none");__f_____hl();$($v__fm__container_fluid+" .btn-group.pull-right > .btn-group > button, "+$v__fm__container_fluid+" .nav.nav-tabs li").removeClass("disabled");$("#file-manager-new-instance").removeClass("disabled_no_styling cursor-na")}function __init__dt_ck__e(){if($($v__fm__container_fluid+" .active td.dataTables_empty").length){$($v__fm__container_fluid+" .active table").attr("style","border-top-width: 1px !important;");$($v__fm__container_fluid+" .active td.dataTables_empty").css({padding:"4px","border-top-color":"#eaeaea"});$($v__fm__container_fluid+" .dataTables_paginate").addClass("hidden");$($v__fm__container_fluid+" .active td.dataTables_empty").attr("colspan",parseInt($(".active thead tr th:visible").length));setTimeout(function(){if($($v__fm__container_fluid+" .__o__f_m-search-results").length){$($v__fm__container_fluid+" td.dataTables_empty").html(theme_language("datatable_no_search_results"))}},0)}else{$($v__fm__container_fluid+" .active table, .active td.dataTables_empty").removeAttr("style");$($v__fm__container_fluid+" .dataTables_paginate").removeClass("hidden")}}function __f____success(e,a,t,_,n,i,r,o,s,l,f,c,d,m,u,p){var g=e[0].error&&e[0].error.length,h=e[0].error_fatal&&e[0].error_fatal.length,v=typeof u=="undefined"?false:u,b=fm_get_current_path(),w=1,x=1,y=1;setTimeout(function(){theme_message_dismiss(""+m+"_info");theme_message_dismiss(""+m+"_warning")},564);function k(e){var e=e.replace(/\\/g,""),a=JSON.parse(e);if(typeof a==="object"&&a){if(Object.keys(a).length>1){var t='<div class="margined-left-20">';$.each(a,function(e,a){t+="<strong>â€¢ "+Convert.htmlEscape(e)+"</strong> - "+Convert.htmlEscape(a)+"<br>";t=Convert.htmlUnEscapeSafe(t)});t+="</div>";return[1,t]}else{return[0,Convert.json_to_string(a)]}}}if(v&&v[0]=="compress"){var C=fm_process_path(v[1]),T=fm_process_path(v[2],"escape/decode");if(b!=C){w=0;x=0;y=0;if(!C){C="/"}setTimeout(function(){if(g){plugins.messenger.post('<i class="fa fa-lg fa-fw '+(h?"fa-exclamation-circle":i)+'"></i>'+(theme_language("filemanager_successful_compression_bg_with_errors").replace("%file",T).replace("%path",fm_process_path(C,"escape/decode"))+k(e[0].error)[1]),o,s,m+"_"+s,1,["bottom","right"])}else{plugins.messenger.post('<i class="fa fa-lg fa-fw '+l+'"></i>'+theme_language("filemanager_successful_compression_bg").replace("%file",T).replace("%path",fm_process_path(C,"escape/decode")),c,"info",m+"_"+d,1,["bottom","right"])}},564)}}if(g&&w){var D=k(e[0].error),S=D[0],j=D[1],F=(S?theme_language(r+(h?"_fatal":"")):"")+j;setTimeout(function(){plugins.messenger.post('<i class="fa fa-lg fa-fw '+(h?"fa-exclamation-circle":i)+'"></i>'+F,o,h||!s?"error":s,m+"_"+s,1,["bottom","right"])},564)}else if(x){var P=theme_language(f);if(m==="delete"){var I="";if(fm_deletion_to_trash&&fm_deletion_to_trash.home||fm_deletion_empty_trash_previous){var E=fm_deletion_to_trash.home||fm_deletion_empty_trash_previous;if(E===true){I=".Trash"}else if(E&&E.includes(get_server_data("user-home"))){I="~/.Trash"}else{I=Convert.htmlEscape(E)+"/.Trash"}c=2}P=P.replace("$1",I)}setTimeout(function(){plugins.messenger.post('<i class="fa fa-lg fa-fw '+l+'"></i>'+P,c,d,m+"_"+d,1,["bottom","right"])},564)}n&&$("."+n).remove();if(!h){a&&__f_____ul();t&&theme_modal_dismiss();_&&y&&setTimeout(function(){__f___u("upd",e[0],1,m,false,p),tree_update_node()},123)}}function __f____a(e,a){block_events();var t=fm_get_current_path();if(e!="bookmark"){__f_____lo(false,true)}if(e==="copy"||e==="cut"){__f__ld__sh();$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/"+e+".cgi"+"?module="+v___module+extra_query(),data:__f___gd(),dataType:"text",success:function(a){if(!session.status(a)){return}localStorage.removeItem(v___server_hostname+"-"+"cut");localStorage.removeItem(v___server_hostname+"-"+"copy");localStorage.setItem(v___server_hostname+"-"+e,1);$($v__fm__container_fluid+" .o__f_m-button-paste").removeClass("disabled");setTimeout(function(){if(e==="copy"){plugins.messenger.post('<i class="fa fa-lg fa-fw fa-clone"></i>'+theme_language("filemanager_copying_successful"),1.5,"info",e+"_info",1,["bottom","right"])}else if(e==="cut"){plugins.messenger.post('<i class="fa fa-lg fa-fw fa-scissors"></i>'+theme_language("filemanager_cutting_successful"),1.5,"warning",e+"_warning",1,["bottom","right"])}},246);__f_____ul()},error:function(a){plugins.messenger.post('<i class="fa fa-lg fa-fw fa-exclamation-triangle"></i>'+theme_language("filemanager_buffer_error"),10,"error",e+"_error",1,["bottom","right"])}})}if(e==="paste"){__f__ld__sh();var _={count:"file-manager-response_count",type:"file-manager-response"};var n=function(e){for(var a in e){document.cookie=""+_[a]+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path=/;"}};var i=__f___um();if(i){i=i.replace("username=","fownergroup=")}$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/paste.cgi?path="+fm_process_path(t)+"&module="+v___module_file_manager+i+extra_query(),data:false,dataType:"json",success:function(a){setTimeout(function(){theme_message_dismiss(""+e+"_info");theme_message_dismiss(""+e+"_warning")},566);var r=get_cookie(_.count)=="1"?1:2;var o=get_cookie(_.type);n(_);if(!o||o&&o.length&&o.indexOf("err")===-1){localStorage.removeItem(v___server_hostname+"-"+"cut");if(!localStorage.getItem(v___server_hostname+"-"+"copy")){$($v__fm__container_fluid+" .o__f_m-button-paste").addClass("disabled")}}if(o=="err"){alert_json_errors(a[0].error,e,"filemanager_paste_warning",true,true);setTimeout(function(){__f___u("upd",a[0],1,e,false);tree_update_node()},567)}else if(o=="merr"){plugins.messenger.post('<i class="fa fa-lg fa-fw fa-exclamation-triangle"></i>'+theme_language("filemanager_move_into_self"),15,"error",e+"_error",1,["bottom","right"]);__f_____ul()}else if(o=="ep"){bootbox.dialog({message:theme_language("filemanager_target_conflict_message_"+r+""),title:'<i class="fa fa-fw fa-exclamation-circle font-size-80p bootbox-o__f_m-paste-prompt">&nbsp;&nbsp;</i> <strong class="font-size-90p">'+theme_language("filemanager_target_conflict_"+r+"")+"</strong>",buttons:{success:{label:'&nbsp;<i class="fa fa-fw fa-clipboard">&nbsp;&nbsp;</i>'+theme_language("filemanager_target_conflict_paste")+"&nbsp;&nbsp;",className:"btn-primary vertical-align-top ",callback:function(){$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/paste.cgi?path="+fm_process_path(t)+"&module="+v___module_file_manager+"&ua=2"+i+extra_query(),data:false,dataType:"json",success:function(a){if(a[0].error.length>1){plugins.messenger.post('<i class="fa fa-lg fa-fw fa-question-circle"></i>'+error_replace_tags(a[0].error),10,"warning",e+"_warning",1,["bottom","right"])}else{plugins.messenger.post('<i class="fa fa-lg fa-fw fa-clipboard"></i>'+theme_language("filemanager_pasting_and_copying_"+r+""),2,"success",e+"_success",1,["bottom","right"])}setTimeout(function(){__f___u("upd",a[0],1,e,false);tree_update_node();n(_)},567)},error:function(e){session.status(e.responseText);n(_)}})}},danger:{label:'&nbsp;<i class="fa fa-fw fa-times-circle-o">&nbsp;&nbsp;</i>'+theme_language("filemanager_target_conflict_replace")+"&nbsp;&nbsp;",className:"btn-danger vertical-align-top margined-left--2",callback:function(){$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/paste.cgi?path="+fm_process_path(t)+"&module="+v___module_file_manager+"&ua=1"+i+extra_query(),data:false,dataType:"json",success:function(a){if(a[0].error.length>1){plugins.messenger.post('<i class="fa fa-lg fa-fw fa-question-circle"></i>'+error_replace_tags(a[0].error),10,"warning",e+"_warning",1,["bottom","right"])}else{plugins.messenger.post('<i class="fa fa-lg fa-fw fa-clipboard"></i>'+theme_language("filemanager_pasting_and_replacing_"+r+""),2,"success",e+"_success",1,["bottom","right"])}setTimeout(function(){__f___u("upd",a[0],1,e,false);tree_update_node();n(_)},567)},error:function(e){session.status(e.responseText);n(_)}})}}},onEscape:function(){__f_____ul()}})}else if(o=="cc"){plugins.messenger.post('<i class="fa fa-lg fa-fw fa-clipboard"></i>'+theme_language("filemanager_pasting_and_copying_"+r+""),2,"success",e+"_success",1,["bottom","right"]);setTimeout(function(){__f___u("upd",a[0],1,e,false);tree_update_node()},567)}else{plugins.messenger.post('<i class="fa fa-lg fa-fw fa-clipboard"></i>'+theme_language("filemanager_pasting_successful"),2,"success",e+"_success",1,["bottom","right"]);setTimeout(function(){__f___u("upd",a[0],1,e,false);tree_update_node()},567)}},error:function(e){session.status(e.responseText);n(_)}})}if(e==="extract"){var r=String(),o=String();if(a&&a[0]){r="&password="+a[0]+""}if(a&&a[1]){o="&delete="+(a[1]?1:0)+""}var s=fm_get_current_path();theme_message_dismiss(e+"_warning");tree_update_node();__f__ld__sh();$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/extract.cgi?module="+v___module+r+o+__f___um()+extra_query(),data:__f___gd(),dataType:"json",success:function(a){setTimeout(function(){theme_message_dismiss(""+e+"_info");theme_message_dismiss(""+e+"_warning")},566);if(a[0].error&&a[0].error.length){alert_json_errors(a[0].error,e,"filemanager_errors_extraction")}setTimeout(function(){if(fm_get_current_path()===s){__f___u("upd",a[0],1,e,false);tree_update_node()}},567)},error:function(e){session.status(e.responseText)}})}if(e==="bookmark"){__f_____sl();__f_____hl_();var l;if($.isArray(a)){l=a[0]}else{l=t}if(l&&l.endsWith("/")){l=l.slice(0,-1)}else if(l&&l.endsWith("%2F")){l=l.slice(0,-3)}$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/bookmark.cgi?module="+v___module_file_manager,data:{path:l},dataType:"text",success:function(a){setTimeout(function(){theme_message_dismiss(""+e+"_info");theme_message_dismiss(""+e+"_warning")},566);if(!session.status(a)){return}exiting_book_mark=f_m__bm__u();if(exiting_book_mark.length){plugins.messenger.post('<i class="fa fa-lg fa-fw fa-star-o"></i>'+theme_language("filemanager_unbookmark_success").replace("%value",l?fm_process_path(l,"escape/decode"):"/"),5,"warning","bookmarkAddRemove",1,["bottom","right"])}else{plugins.messenger.post('<i class="fa fa-lg fa-fw fa-star"></i>'+theme_language("filemanager_bookmark_success").replace("%value",l?fm_process_path(l,"escape/decode"):"/"),5,"info","bookmarkAddRemove",1,["bottom","right"])}fm_bookmark_searched_str=null},error:function(e){}})}if(e==="delete"){fm_deletion_empty_trash_previous=fm_deletion_empty_trash===1;__f__ld__sh();var f=__f___gd(),c=function(a){var t=a[fm_get_current_home_username()],_=t?"&"+Convert.json_to_query(t):"&"+Convert.json_to_query(fm_user_data);extra_details=fm_deletion_to_trash?_:"";if(fm_deletion_to_trash){if(t){fm_deletion_to_trash=t}else{fm_deletion_to_trash=fm_user_data}}$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/delete.cgi?module="+v___module+extra_query()+"&etrash="+(fm_deletion_empty_trash_previous?1:0)+"&trash="+(fm_deletion_to_trash?1:0)+extra_details,data:f,dataType:"json",success:function(a){__f____success(a,1,1,1,false,"fa-exclamation-triangle","filemanager_"+(fm_deletion_to_trash?"remove":"delete")+"_warning",30,"error",fm_deletion_empty_trash_previous?"fa2 fa2-trash-empty-o":fm_deletion_to_trash?"fa-trash-o":"fa-trash","filemanager_successful_"+(fm_deletion_empty_trash_previous?"emptying_trash":fm_deletion_to_trash?"removal":"deletion")+"",2,"success",e,false,f)},error:function(e){session.status(e.responseText)}})},d=async()=>{var e=await fm_get_current_home_user_details();c(e)};d()}if(e==="rename"){__f__ld__sh();var m=fm_get_current_path(),u=$($v__fm__container_fluid+" #renameForm").serialize();theme_modal_dismiss();$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/rename.cgi?module="+v___module+extra_query(),data:u,dataType:"json",success:function(a){setTimeout(function(){theme_message_dismiss(""+e+"_warning")},566);if(a[0].error&&a[0].error.length){plugins.messenger.post('<i class="fa fa-lg fa-fw fa-exclamation-triangle"></i>'+error_replace_tags(a[0].error),10,"error",e+"_error",1,["bottom","right"]);setTimeout(function(){theme_message_dismiss(""+e+"_info")},566);__f_____ul();return}setTimeout(function(){__f___u("upd",a[0],1,e,false,u);tree_update_node()},567)},error:function(e){session.status(e.responseText)}})}if(e==="create_folder"){__f__ld__sh();var m=fm_get_current_path();var p="#createFolderForm",g=$($v__fm__container_fluid+" "+p+"").serialize();theme_modal_dismiss();$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/create_folder.cgi?module="+v___module+__f___um()+extra_query(),data:g,dataType:"json",success:function(a){setTimeout(function(){theme_message_dismiss(""+e+"_warning")},566);if(a[0].error&&a[0].error.length){plugins.messenger.post('<i class="fa fa-lg fa-fw fa-exclamation-triangle"></i>'+error_replace_tags(a[0].error),10,"error",e+"_error",1,["bottom","right"]);setTimeout(function(){theme_message_dismiss(""+e+"_info")},566);__f_____ul();return}setTimeout(function(){__f___u("upd",a[0],1,e,false,g);tree_update_node()},567)},error:function(e){session.status(e.responseText)}})}if(e==="create_file"){__f__ld__sh();var m=fm_get_current_path(),h=$($v__fm__container_fluid+" #createFileForm").serialize();theme_modal_dismiss();$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/create_file.cgi?module="+v___module+__f___um()+extra_query(),data:h,dataType:"json",success:function(a){setTimeout(function(){theme_message_dismiss(""+e+"_warning")},566);if(a[0].error&&a[0].error.length){plugins.messenger.post('<i class="fa fa-lg fa-fw fa-exclamation-triangle"></i>'+error_replace_tags(a[0].error),10,"error",e+"_error",1,["bottom","right"]);setTimeout(function(){theme_message_dismiss(""+e+"_info")},566);__f_____ul();return}setTimeout(function(){__f___u("upd",a[0],1,e,false,h)},567)},error:function(e){session.status(e.responseText)}})}if(e==="url_download"){__f__ld__sh();var m=fm_get_current_path();theme_modal_dismiss();var v=$($v__fm__container_fluid+" #downFromUrlForm input:not([name='path'])").serialize();v=v+"&path="+fm_get_current_path();$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/http_download.cgi?module="+v___module+__f___um()+extra_query(),data:v,dataType:"json",success:function(a){setTimeout(function(){theme_message_dismiss(""+e+"_info");theme_message_dismiss(""+e+"_warning")},566);if(a[0].error&&a[0].error.length){plugins.messenger.post('<i class="fa fa-lg fa-fw fa-exclamation-triangle"></i>'+error_replace_tags(a[0].error),10,"error",e+"_error",1,["bottom","right"]);__f_____ul();return}else{plugins.messenger.post('<i class="fa fa-lg fa-fw fa-download"></i>'+a[0].success,2,"success",e+"_success",1,["bottom","right"]);setTimeout(function(){__f___u("upd",a[0],1,e,false)},567)}},error:function(e){session.status(e.responseText)}})}if(e==="search"){__f__ld__sh();var m=fm_get_current_path(),o=$($v__fm__container_fluid+" #searchForm").find('input[name="query"]').val(),b=$($v__fm__container_fluid+" #searchForm").find('input[name="grepstring"]').val(),w=$($v__fm__container_fluid+" #searchForm").find('input[name="grepreplace"]').val(),x=b&&!w?" fa-1_50x fa-file-find":b&&w?" fa-1_50x fa-find-replace":" fa-lg fa-search";if(o&&o.length){o=Convert.htmlEscape(o)}if(b&&b.length){b=Convert.htmlEscape(b)}if(w&&w.length){w=Convert.htmlEscape(w)}theme_modal_dismiss();if(b&&!w){plugins.messenger.post('<i class="fa fa-1_50x fa-fw fa-file-find"></i>'+theme_language("filemanager_searching_matching").replace("%value",o).replace("%text",b)+" "+theme_language("global_please_wait"),0,"info",e+"_preMe",1,["bottom","right"])}else if(b&&w){plugins.messenger.post('<i class="fa fa-1_50x fa-fw fa-find-replace"></i>'+theme_language("filemanager_searching_replacing").replace("%value",o).replace("%text",b).replace("%replace",w)+" "+theme_language("global_please_wait"),0,"warning",e+"_preMe",1,["bottom","right"])}else{plugins.messenger.post('<i class="fa fa-lg fa-fw fa-search"></i>'+theme_language("filemanager_searching").replace("%value",o)+" "+theme_language("global_please_wait"),0,"info",e+"_preMe",1,["bottom","right"])}var y=$(""+$v__fm__container_fluid+" .active .dataTables_length select").val();var k=function(a){__f___ds_a();setTimeout(function(){__f___u("upd",a[0],0,"search",false)},567);theme_message_dismiss("search_preMe");var t=5e3;if(a[0].totals>1){if(b&&w){plugins.messenger.post('<i class="fa fa-fw '+x+'"></i>'+theme_language("filemanager_search_replaced_multi").replace("%value",a[0].totals),4,"success",e+"_success",1,["bottom","right"]);t=9e3}else{plugins.messenger.post('<i class="fa fa-fw '+x+'"></i>'+theme_language("filemanager_search_founds").replace("%value",a[0].totals),2,"success",e+"_success",1,["bottom","right"])}}else{if(a[0].totals==1){if(b&&w){plugins.messenger.post('<i class="fa fa-fw '+x+'"></i>'+theme_language("filemanager_search_replaced"),6,"success",e+"_success",1,["bottom","right"])}else{plugins.messenger.post('<i class="fa fa-fw '+x+'"></i>'+theme_language("filemanager_search_found"),6,"success",e+"_success",1,["bottom","right"])}}else{plugins.messenger.post('<i class="fa fa-fw '+x+'"></i>'+theme_language("filemanager_search_no_matches"),4,"error",e+"_error",1,["bottom","right"])}}setTimeout(function(){theme_message_dismiss("search_preMe")},t)};theme_message_dismiss("search_success");theme_message_dismiss("search_error");$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/search.cgi?paginate="+y+"&fsid="+Date.now()+"&module="+v___module,data:$($v__fm__container_fluid+" #searchForm").serialize(),dataType:"json",success:function(e){k(e)},error:function(e){session.status(e.responseText)}})}if(e==="chmod"){__f__ld__sh();$($v__fm__container_fluid_form).append('<input type="hidden" name="perms" value="'+a[0]+'" class="_o__f_m-tmp-chmod-inputs">');$($v__fm__container_fluid_form).append('<input type="hidden" name="applyto" value="'+a[1]+'" class="_o__f_m-tmp-chmod-inputs">');$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/chmod.cgi?module="+v___module+extra_query(),data:__f___gd(),dataType:"json",success:function(a){__f____success(a,1,1,1,"_o__f_m-tmp-chmod-inputs","fa-exclamation-triangle","filemanager_successful_permissions_with_errors",15,"warning","fa-cogs","filemanager_successful_permissions",2,"success",e)},error:function(e){session.status(e.responseText)}})}if(e==="chown"){__f__ld__sh();$($v__fm__container_fluid_form).append('<input type="hidden" name="owner" value="'+a[0]+'" class="_o__f_m-tmp-chown-inputs">');$($v__fm__container_fluid_form).append('<input type="hidden" name="group" value="'+a[1]+'" class="_o__f_m-tmp-chown-inputs">');$($v__fm__container_fluid_form).append('<input type="hidden" name="recursive" value="'+a[2]+'" class="_o__f_m-tmp-chown-inputs">');$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/chown.cgi?module="+v___module+extra_query(),data:__f___gd(),dataType:"json",success:function(a){__f____success(a,1,1,1,"_o__f_m-tmp-chown-inputs","fa-exclamation-triangle","filemanager_successful_ownership_with_errors",15,"warning","fa-users","filemanager_successful_ownership",2,"success",e)},error:function(e){session.status(e.responseText)}})}if(e==="chattr"){__f__ld__sh();$($v__fm__container_fluid_form).append('<input type="hidden" name="label" value="'+a[0]+'" class="_o__f_m-tmp-chattr-inputs">');$($v__fm__container_fluid_form).append('<input type="hidden" name="recursive" value="'+a[1]+'" class="_o__f_m-tmp-chattr-inputs">');$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/chattr.cgi?module="+v___module+extra_query(),data:__f___gd(),dataType:"json",success:function(a){__f____success(a,1,1,1,"_o__f_m-tmp-chattr-inputs","fa-exclamation-triangle","filemanager_successful_attributes_with_errors",15,"warning","fa-tags","filemanager_successful_attributes",2,"success",e)},error:function(e){session.status(e.responseText)}})}if(e==="chcon"){__f__ld__sh();$($v__fm__container_fluid_form).append('<input type="hidden" name="label" value="'+a[0]+'" class="_o__f_m-tmp-chcon-inputs">');$($v__fm__container_fluid_form).append('<input type="hidden" name="recursive" value="'+a[1]+'" class="_o__f_m-tmp-chcon-inputs">');$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/chcon.cgi?module="+v___module+extra_query(),data:__f___gd(),dataType:"json",success:function(a){__f____success(a,1,1,1,"_o__f_m-tmp-chcon-inputs","fa-exclamation-triangle","filemanager_successful_secontext_with_errors",15,"warning","fa-tags","filemanager_successful_secontext",2,"success",e)},error:function(e){session.status(e.responseText)}})}if(e==="compress"){__f__ld__sh();$($v__fm__container_fluid_form).append('<input type="hidden" name="arch" value="'+a[0]+'" class="_o__f_m-tmp-compress-inputs">');$($v__fm__container_fluid_form).append('<input type="hidden" name="method" value="'+a[1]+'" class="_o__f_m-tmp-compress-inputs">');$($v__fm__container_fluid_form).append('<input type="hidden" name="arcmove" value="'+(a[2]?1:0)+'" class="_o__f_m-tmp-compress-inputs">');$($v__fm__container_fluid_form).append('<input type="hidden" name="arcencr" value="'+(a[3]?1:0)+'" class="_o__f_m-tmp-compress-inputs">');$($v__fm__container_fluid_form).append('<input type="hidden" name="arcencr_val" value="'+a[4]+'" class="_o__f_m-tmp-compress-inputs">');$($v__fm__container_fluid_form).append('<input type="hidden" name="arkkey" value="'+a[5]+'" class="_o__f_m-tmp-compress-inputs">');$($v__fm__container_fluid_form).append('<input type="hidden" name="arcencr_pass" value="'+a[6]+'" class="_o__f_m-tmp-compress-inputs">');$($v__fm__container_fluid_form).append('<input type="hidden" name="gpgpath" value="'+a[7]+'" class="_o__f_m-tmp-compress-inputs">');__f__ld__bg();$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/compress.cgi?module="+v___module+__f___um()+extra_query(),data:__f___gd(),dataType:"json",success:function(_){$($v__fm__container_fluid).find('[name="arcencr_val"]').val(String()).trigger("keyup");__f____success(_,1,0,1,"_o__f_m-tmp-compress-inputs","fa-exclamation-circle","filemanager_successful_compression_with_errors",15,"warning","fa-file-archive-o","filemanager_successful_compression",2,"success",e,[e,t,a[0]+$('#compressDialog select option[value="'+a[1]+'"]').text()])},error:function(e){session.status(e.responseText)}})}}function format_search_breadcrum(e){var a=extra_query(false,1);if(e){if(a.query){return 1}else{return 0}}var t=$('body[class*="'+v___module_file_manager+'"]'),_=fm_get_current_path(),n=$($v__fm__container_fluid+" #searchForm").find('input[name="query"]').val(),i=$($v__fm__container_fluid+" #searchForm").find('input[name="grepstring"]').val(),r=$($v__fm__container_fluid+" #searchForm").find('input[name="grepreplace"]').val();if(a.query){n=a.query}i=a.grepstring;if(t.find(".breadcrumb .fa-folder-root").length){t.find(".breadcrumb .fa-folder-root").removeClass("fa-folder-root").addClass("fa-search text-light fa-sm").parent("a").removeAttr("href").replaceTagName("span")}else{t.find(".breadcrumb li:first-child a").html('<i class="fa fa-fw fa-sm fa-search text-light"></i>')}t.find(".breadcrumb li:not(:first-child) a").replaceWith(function(){return $("<span>",{html:$(this).html()})});t.find(".breadcrumb li").addClass("text-light");t.find(".breadcrumb li span i.fa-caret-right").remove();$($v__fm__container_fluid+" .__o__f_m-search-results").remove();$($v__fm__container_fluid+" .ui_checked_columns.directory_go_up").addClass("hidden");tree_view_draw(_f__table());$_br=$($v__fm__container_fluid+" .breadcrumb > li:last-child");$_br.html($_br.html()+'<span class="__o__f_m-search-results">'+($(".breadcrumb > li:last-child a i").hasClass("fa-search")?"&nbsp;&nbsp;&nbsp;/&nbsp;":"")+'&nbsp;&nbsp;:&nbsp;&nbsp;<span class="text-primary __o__f_m-search-results-data cursor-pointer">`<em><strong class="small">'+n+"</strong>"+(i&&!r?' <strong class="small">['+i+"]</strong>":r?' <strong class="small">['+i+'<span class="smaller"> -> </span>'+r+"]</strong>":"")+'</em>`&nbsp;&nbsp;<i class="fa fa-times-circle fa-0_90x text-danger text-semi-dark text-dark-hoverd vertical-align-middle"></i></span></span>')}function error_replace_tags(e){return e.replace("[tt]","<tt>").replace("[/tt]","</tt>")}function extra_query(e,a,t){var _=String(),n=e||$($v__fm__container_fluid+" .spaginates:visible .active a").attr("href")||$($v__fm__container_fluid+" .dataTables_paginate:visible .active a").text(),i=_,r=_,o=_,s=_,l=_,f=_,c=_,d=_,m=_;if(!!n){n=Convert.uriDecodeComponent(n);i=Convert.htmlUnEscape(URI.parseQuery(URI(n).query())["page"])||n;r=Convert.htmlUnEscape(URI.parseQuery(URI(n).query())["query"]),o=URI.parseQuery(URI(n).query()).regex,s=URI.parseQuery(URI(n).query()).follow,l=URI.parseQuery(URI(n).query()).caseins,f=URI.parseQuery(URI(n).query()).grepstring,c=$(""+$v__fm__container_fluid+" .active .dataTables_length select").val(),d=URI.parseQuery(URI(n).query()).fsid,m=URI.parseQuery(URI(n).query()).exclude;if(i){i=isNaN(i)?1:i;var u=$($v__fm__container_fluid+" .tab-pane.active").data("previousPageNumber"),p=!isNaN(u)?parseInt(u):1;if(fm_goto_previous){if(p>=1){i=p}}_+="&page="+i}if(r){_+="&query="+r}if(o){_+="&regex="+o}if(s){_+="&follow="+s}if(l){_+="&caseins="+l}if(f){_+="&grepstring="+f}if(_&&c){_+="&paginate="+c}if(_&&d){_+="&fsid="+d}if(_&&m){_+="&exclude="+m}if(select_all_entries("test")&&t!=="list"){_+="&all_items=3"}}_+="&overwrite_efiles="+(fm_overwrite_files?"true":"false")+"";fm_overwrite_files_mode_reset();if(a){return{page:i,query:r,regex:o,follow:s,caseins:l,grepstring:f,pagnate_number:c,fsid:d,exclude:m}}return _}function set_last_tabs(e){localStorage.setItem(v___server_hostname+"-"+"settings_thirdparty_filemanager_last_tab",JSON.stringify(e))}function get_last_tabs(){return JSON.parse(localStorage.getItem(v___server_hostname+"-"+"settings_thirdparty_filemanager_last_tab"))}function no_loading_tabs(){var e=$("[data-tab-path]");return!e.find(".cspinner-icon").length}function store_last_tab(e){if(no_loading_tabs()&&!initial_fm_load){var a=v___server_username,t=get_last_tabs();if($t_uri_virtualmin){a+="_"+$('aside [name="dom"]').val()}var _={};if(!e){e=$($v__fm__container_fluid+" .nav.nav-tabs li.active")}_[a]=e.find("[data-tab-path]").attr("data-original-title");var n=$.extend({},t,_);set_last_tabs(n)}}function table_resize(e){var a=content_page_calc_width()-6-($("[data-tree-view]").is(":visible")?e?e:$("[data-tree-view]").outerWidth():0),t="data"+"-"+"table"+"-"+"wrap";if(browser.detect.safari()){a-=2}if(config_portable_module_filemanager_hide_tree_view){a+=5}$("["+t+"]").css({"max-width":a,width:a});if($("["+t+"]:visible")&&$("["+t+"]:visible").length){$("["+t+"]:visible").removeClass();if($("["+t+"]:visible").hasScrollBar(1)){$("["+t+"]:visible").addClass("margined-bottom-10")}}}function tree_resize(e,a){var t=$("[data-tree-view]"),_=t.next(".tree-view-filter"),n=$("form .row + .tree-view + .row");var i=parseInt(localStorage.getItem(v___server_hostname+"-"+"settings_thirdparty_filemanager_tree_width"));if(!e&&!isNaN(i)&&i>=200&&i<=parseInt(vhTOpx(70))){e=i}else if(!e){e=t.outerWidth()}t.css("width",e);n.css("margin-left",parseInt(e)-10);_.css("width",parseInt(e));if(a){setTimeout(table_resize,1)}else{table_resize(parseInt(e))}}function tree_view_set(e){var a=$("[data-tree-view]"),t=a.next().find("input"),_=t.parent();a.find(".cspinner.centered-initial").removeClass("centered-initial").find(".cspinner-icon").addClass("smaller");_.removeClass("hidden-content").append('<span class="fa fa-times-circle vertical-align-middle filter_fancytree_clear text-lighter"><span class="clear_delimiter">|</span></span><span class="fa fa-folder vertical-align-middle filter_fancytree_toggle text-lighter"><span class="clear_delimiter">|</span></span>');a.find(".cspinner").remove();$.ui.fancytree.debugLevel=0;$.ui.fancytree.activeVisible=true;$.ui.fancytree.autoScroll=true;a.fancytree({source:e,debugLevel:0,scrollParent:a,escapeTitles:false,extensions:["filter"],quicksearch:true,filter:{autoApply:true,autoExpand:config_portable_module_filemanager_tree_expand_search,counter:true,fuzzy:false,hideExpandedCounter:true,hideExpanders:false,highlight:true,leavesOnly:false,nodata:true,mode:"hide"},autoActivate:false,activeVisible:true,autoScroll:true,keyboard:true,strings:{loading:"",loadError:"",moreData:"",noData:theme_language("datatable_szerorecords")},toggleEffect:false,click:function(e,a){if($v__fm__tree_node_prog){$v__fm__tree_node_prog=0;$v__fm__tree_node_sp=0;tree_action(e,a)}},dblclick:function(e,a){tree_action(e,a,1);return false},activate:function(e,a){tree_action(e,a)},init:function(){setTimeout(function(){tree_gset_node()},2)}});$("body").on("click.fm",".filter_fancytree_clear",function(){$(this).parent().find("input").val("").trigger("keyup");setTimeout(function(){var e=_f__table();if(e){e.DataTable().draw(false);tree_view_adjust()}},100)});$("body").on("click.fm",".filter_fancytree_toggle",function(){a.fancytree("getRootNode").visit(function(e){e.setExpanded(false)});a.find(".mCSB_container").css("left",0);a.mCustomScrollbar("scrollTo",0,{scrollInertia:100})});t.keyup(function(e){var a=$(this);typeof $tree_view_search_timer!="undefined"&&clearTimeout($tree_view_search_timer);$tree_view_search_timer=setTimeout(function(){var t=$.ui.fancytree.getTree(),_=a.val(),n=$(e.target).parent().find(".filter_fancytree_clear");t.filterNodes.call(t,_);if(_){n.removeClass("text-lighter")}else{n.addClass("text-lighter")}},e.originalEvent!=undefined?600:0)});e.length===1&&a.fancytree("getRootNode").visit(function(e){if(e.getLevel()===1){e.setExpanded(true)}});a.mCustomScrollbar({axis:"xy",theme:"minimal-dark",keyboard:false,scrollButtons:true,autoHideScrollbar:false,scrollInertia:100,advanced:{updateOnContentResize:true}});var n="data-resizer",i=a.find("["+n+"]").detach();a.prepend(i);(function(){var e=$("[data-tree-view]"),a=e.find("[data-resizer]")[0],t=$("body"),_=$(".panel-heading, .jsPanel, .jsPanel-replacement-container, aside, .mobile-menu-toggler, #right-side-tabs, .right-side-tabs-toggler, .breadcrumb, .btn-group, .ui-fancytree, .tree-view-filter, .data-table"),n="user-select-none cursor-w-resize",i="pointer-events-none-forced";var r=function(){window.addEventListener("mousemove",o,false);window.addEventListener("mouseup",s,false)};var o=function(a){var r=a.pageX-e[0].getBoundingClientRect().left+"px";t.addClass(n);_.addClass(i);var o=200,s=parseInt(vhTOpx(70));if(parseInt(r)<o||parseInt(r)>s){return}localStorage.setItem(v___server_hostname+"-"+"settings_thirdparty_filemanager_tree_width",r);tree_resize(r)},s=function(){t.removeClass(n);_.removeClass(i);window.removeEventListener("mousemove",o,false);window.removeEventListener("mouseup",s,false)};a&&a.addEventListener("mousedown",r,false)})()}function get_jailed_user(e){var a=fm_user_data;if(!e){return get_access_level()===0&&(get_server_data("user")!==a.user&&a.access||get_server_data("user")===a.user&&a.access=="0"&&parseInt(a.access)!==a.uid)}else{return a[e]}}function tree_action(e,a,t){var _=$("[data-tree-view]"),n=_.next().find("input"),i=0;if(e.originalEvent&&typeof e.originalEvent.originalEvent==="object"){i=1}var r=a.node.key,o="fancytree-loading-node",s=_.next().find("input").val();var l=$($v__fm__container_fluid).find(".fancytree-active");r=fm_process_path(r,"decode/unescape");var f=fm_path_check_jailed(r);if(get_access_level()===3&&fm_user_data&&fm_user_data.home&&fm_user_data.home.includes("/./")&&fm_user_data.home.includes("/chroot/")){var c=new RegExp("/.*/\\d+\\b"+get_user_home()+"\\b","gi");f=f.replace(c,String())}if(get_access_level()===0&&fm_user_data&&fm_user_data.base&&fm_user_data.base!=="/"){var d=new RegExp("^"+fm_user_data.base,"");f=f.replace(d,String())}i&&(__f____r("get","index.cgi?path="+f,false,0,false,i),$("."+o).remove());if(($v__fm__tree_node_sp||t)&&i){l.find(".fancytree-icon").before('<span class="cspinner '+o+'"><span class="cspinner-icon smaller"></span></span>')}$v__fm__tree_node_sp=1;if(!config_portable_module_filemanager_hide_tree_view&&!s){var m=config_portable_module_filemanager_tree_view_depth;m=config_portable_module_filemanager_tree_view_depth==0?0:parseInt(m);$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/tree.cgi?module="+v___module+"&d="+m,data:{cpt:r},dataType:"JSON",success:function(e){if(e&&!e.length){tree_view_adjust();return}a.node.removeChildren();a.node.addChildren(e);a.node.toggleExpanded();tree_view_adjust()},error:function(e){}})}!a.node.isExpanded()&&a.node.toggleExpanded();var u=a.node.getChildren();u&&u.map(function(e,a){e.isExpanded()&&e.toggleExpanded()})}function tree_get_depth(){var e=parseInt(config_portable_module_filemanager_tree_view_depth),a=get_server_data("user-home"),t=Test.occurrences(fm_process_path(a,"decode"),"/")||1,_=get_access_level();e=e+t;if((_===2||_===3)&&a&&a.includes("/./")&&a.includes("/chroot/")){e--;if(_===2){e--;e--;e--}}if(_===0){e--}return e}function tree_view_get(){if(config_portable_module_filemanager_hide_tree_view==true||$v__fm__tree===1){return}else{$v__fm__tree=1}var e=tree_get_depth();$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/tree.cgi?module="+v___module+"&d="+e+"&y=1&e="+(config_portable_module_filemanager_tree_exclude_on_first_load?1:0),data:false,dataType:"JSON",success:function(e){var a="jquery.fancytree";$($v__fm__container_fluid_form).data("tree",e);load.bundle(a,1,{tree_view_set:e,tree_view_draw:_f__table()},3)},error:function(e){}})}function tree_view_draw(e){if(e&&!e.length){return}var a=e.parent("div").parent(".row").prev(".tree-view").add("[data-tree-view]"),t=$(".tree-view-filter"),_=a.find(".fancytree-loading-node"),n=e.outerHeight(),i=$("[data-tree-view] .fancytree-container").height(),r=8,o=-2,s=0,l=parseInt(vhTOpx(47.52))-r;l=l>320?l:320;var f=l-39,c=l+11;_.remove();if((!i||i>n||n<f)&&n<c||t.find("input").val()){a.css("height",l-s);t.css("margin-top",l+r+o+s)}else{a.css("height",n-s);t.css("margin-top",n+r+o)}}function tree_view_adjust(){var e=$("[data-tree-view]").height(),a=$("[data-tree-view]").height(),t=$(".fancytree-active").parent("li"),_=$(".tree-view-filter"),n=t.prev(),i=n.length?n:t,r=fm_get_current_path(),o=fm_process_path(r,"decode/unescape"),s=!o||o=="/"?1:0;if((i.length||s)&&!_.find("input").val()){if(s){i=-2}else{}var l=$("[data-tree-view]");if(l&&l.length&&i&&i.length){l.mCustomScrollbar("scrollTo",i,{scrollInertia:100})}}}function tree_gset_node(e){var a=$("[data-tree-view]"),t=a.data("ui-fancytree"),_=$(".tree-view-filter");if(!config_portable_module_filemanager_hide_tree_view&&t&&!_.find("input").val()){var n=config_portable_module_filemanager_tree_view_depth,i="path",r=fm_get_current_path(),o=fm_process_path(r,"decode/escape"),n=config_portable_module_filemanager_tree_view_depth==0?0:parseInt(n),t=t.getTree();var s=get_jailed_user(),l=get_jailed_user("home");if(fm_user_data&&fm_user_data.allowed_paths&&fm_user_data.allowed_paths.length===1&&(get_access_level()===2||get_access_level()===3||get_access_level()===4)||s){o=(s?l:get_user_home())+o;if(get_access_level()===3&&fm_user_data&&fm_user_data.home&&fm_user_data.home.includes("/./")&&fm_user_data.home.includes("/chroot/")){var f=new RegExp("/."+get_user_home()+"","gi");var c=fm_user_data.home.replace(f,"");o=c+o}}if(get_access_level()===0&&fm_user_data&&fm_user_data.base&&fm_user_data.base!=="/"){o=fm_user_data.base+o}var d=t.getNodeByKey(o);if(e){return[d,t,r]}d?d.setActive():a.find(".fancytree-active, .fancytree-selected").removeClass("fancytree-active fancytree-selected");tree_view_adjust()}}function tree_update_node(){if(!$v__fm__tree){return}$(".filter_fancytree_clear").trigger("click");var e=tree_gset_node(1);$v__fm__tree_node_prog=1;if(e&&e[0]){$(e[0].li).trigger("click");return}tree_update_root(1)}function tree_update_root(e,a){var t=fm_get_current_path(),_=$("[data-tree-view]"),n="ui-fancytree",i=_.data(n),r=_.find("."+n+"");if(i&&e&&(a||!t||t=="%2F"||t===fm_process_path(get_user_home()))){i=i.getTree();r.addClass("pointer-events-none");var o=tree_get_depth();$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/tree.cgi?module="+v___module+"&e="+(config_portable_module_filemanager_tree_exclude_on_first_load?1:0)+"&d="+o,data:false,dataType:"JSON",success:function(e){var a=$("[data-tree-view]");if(a.length){var t=_.fancytree("getRootNode");t.removeChildren();t.addChildren(e);r.removeClass("pointer-events-none")}},error:function(e){}})}}function __f___cs(){$($v__fm__container_fluid_form+" table tbody tr").removeClass("m-active")}function __f___ds_a(){select_all_entries("remove");deselectAllRows(),total_selected_count_update(0,0,1),__f___lb()}function __f__get_fs(e,a){if(e&&!e.is(":visible")){return}$($v__fm__container_fluid+" .total_size_data").parent("span").addClass("hidden");$($v__fm__container_fluid+" .total_size_data").data("total",0);$.each(e?e:_f__table().dataTable().$("tr.hl-aw",{filter:"applied"}),function(){var e=$(this),t=fm_get_current_path().replace(/%2F$/g,"")+"%2F"+fm_process_escaped_link(e.find("td:nth-child(3) a").attr("data-filemin-link")),_=e.find("td.col-size").html("<label></label>").find("label"),n=_f__table().dataTable().$("tr.hl-aw",{filter:"applied"});__f_____sl();_.html('<span class="cspinner csp-size" style="margin-top: 2px; margin-left: 20px;"><span class="cspinner-icon smaller"></span></span>');var i="fm_get_size_"+t;if(typeof window[i]!="undefined"&&typeof window[i].abort==="function"){window[i].abort()}window[i]=$.ajax({type:"POST",url:v___location_prefix+"/index.cgi/?xhr-get_size=1&xhr-get_size_path="+t+"&xhr-get_size_cmodule="+v___module_file_manager,data:false,dataType:"text",success:function(t){if(!session.status(t)){return}var _=t.split("|"),i=_f__table().DataTable(),r='<span data-toggle="tooltip" data-html="true" data-title="'+theme_language("filemanager_global_size_in_bytes")+"<br>"+_[1]+'">'+_[0]+"</span>";_[1]=_[1].toString().replace(/\s/g,String());if(_[1]){_[1]=parseInt(_[1])}var o=e.find("td.col-size");o.attr("data-order",_[1]);if(o&&o[0]){var s=i.cell(o[0]);s.length&&s.data(r).invalidate()}var l;if(isNaN(parseInt(_[1]))){l=0}else{l=parseInt(_[1])}$($v__fm__container_fluid+" .total_size_data").data("total",parseInt($(".total_size_data").data("total"))+l);if(!n.find("td.col-size").find("label").find(".cspinner").length){$.ajax({type:"POST",url:v___location_prefix+"/index.cgi/?xhr-get_nice_size=1&xhr-get_nice_size_sum="+parseInt($(".total_size_data").data("total")),data:false,dataType:"text",success:function(e){if(!session.status(e)){return}$($v__fm__container_fluid+" .total_size_data").text(e);!a&&$($v__fm__container_fluid+" .total_size_data").parent("span").removeClass("hidden");_f__table()&&_f__table().DataTable().draw(false)},error:function(e){}});setTimeout(function(){__f_____hl()},600)}},error:function(e){}})})}function __f__c__m(){var e=$($v__fm__container_fluid+" .tab-pane.active form table");$($v__fm__container_fluid+" .tab-pane table").unbind("contextmenu");e.contextMenu({menuSelector:"#__f__c__m",menuSelectorTriggered:function(e,a){var t=$(e).parents("tr"),_=t.find('td.ui_checked_checkbox input[type="checkbox"]');if(_.length&&!_.is(":checked")){__f___ds_a();_[0].checked=true;t.addClass("m-active hl-aw");__r____changed()}if($($v__fm__container_fluid+" .tab-pane.active table tbody tr input").length&&e.parents("tr").find("input:checked").length===0){__f___ds_a();var n=e.parents("tr").find("td:first-child input"),i=n.is(":checked");if(n[0]){n[0].checked=!i;n.trigger("change")}}var r="context-o__f_m-dependent",o="data-filemin-link",s="hidden";if(t.find('td[data-xfile="1"]').length&&fm_is_search_results()){$("."+r+"-goto").removeClass(s)}else{$("."+r+"-goto").addClass(s)}if(t.find('td[data-xfile="0"]').length||fm_is_search_results()){$("."+r+"-open-new-tab").removeClass(s)}else{$("."+r+"-open-new-tab").addClass(s)}if(!t.find('td[data-xfile="1"]').length){$("."+r+"-view").addClass(s)}else{$("."+r+"-view").removeClass(s)}if(!e.parents("tr").find("i.fa-pencil-square-o").length){$("."+r+"-edit").addClass(s)}else{$("."+r+"-edit").removeClass(s)}if(!e.parents("tr").find("a["+o+'$=".acgi"]').length&&!e.parents("tr").find("a["+o+'$=".htm"]').length&&!e.parents("tr").find("a["+o+'$=".html"]').length&&!e.parents("tr").find("a["+o+'$=".htmls"]').length&&!e.parents("tr").find("a["+o+'$=".htx"]').length&&!e.parents("tr").find("a["+o+'$=".shtml"]').length&&!e.parents("tr").find("a["+o+'$=".ssi"]').length){$("li."+r+"-edit").removeClass("dropdown-submenu");$("["+r+'-htmledit="1"]').addClass(s)}else{$("li."+r+"-edit").addClass("dropdown-submenu");$("["+r+'-htmledit="1"]').removeClass(s)}if(!e.parents("tr").find('a[href*="download.cgi"]').length){}else{$("."+r+"-download").removeClass(s)}var l=e.parents("tr").find("td[data-xarchive]").data("xarchive"),f=e.parents("tr").find("td[data-xfile]").data("xfile"),c=e.parents("tr").find("td[data-gpg]").data("gpg"),d=e.parents("tr").find("td[data-img]").data("img");var m=$("."+r+"-preview");if(d){m.removeClass(s)}else{m.addClass(s)}var u=$("."+r+"-encrypt");if(f){encryptDecryptModalA(c);u.removeClass(s)}else{u.addClass(s)}var p=$("."+r+"-extract");if(l){p.removeClass(s)}else{p.addClass(s)}var g=function(e){return"#__f__c__m a[data-context-"+e+"]"},h=$($v__fm__container_fluid+' #headln2l  div.btn-group > a[href*="'+v___module_file_manager+'"][href*="index.cgi"]'),v=$(g("back"));if(h.is(":visible")){v.parent().removeClass("disabled")}else{v.parent().addClass("disabled")}var b=$("#__f__c__m"),w=b.find("li:not([data-go_up-target]):not([data-context-always-keep])"),x=b.find("li.hidden-force");if(e.hasClass("directory_go_up")){w.addClass("hidden-force")}else{x.removeClass("hidden-force")}if($($v__fm__container_fluid+" .o__f_m-button-compress").hasClass("disabled")){$(g("newarchive")).addClass("disabled").parent("li").addClass("disabled")}else{$(g("newarchive")).removeClass("disabled").parent("li").removeClass("disabled")}if($($v__fm__container_fluid+" .o__f_m-button-copy").hasClass("disabled")){$(""+g("copy")+", "+g("clipboard")+", "+g("clipboard-selection")+"").addClass("disabled").parent("li").addClass("disabled")}else{$(""+g("copy")+", "+g("clipboard")+", "+g("clipboard-selection")+"").removeClass("disabled").parent("li").removeClass("disabled")}if($($v__fm__container_fluid+" .o__f_m-button-cut").hasClass("disabled")){$(g("cut")).addClass("disabled").parent("li").addClass("disabled")}else{$(g("cut")).removeClass("disabled").parent("li").removeClass("disabled")}if($($v__fm__container_fluid+" .o__f_m-button-paste").hasClass("disabled")){$(g("paste")).addClass("disabled").parent("li").addClass("disabled")}else{$(g("paste")).removeClass("disabled").parent("li").removeClass("disabled")}if(check_selected_text()&&!$(g("copy")).hasClass("disabled")){$(g("clipboard-selection")).removeClass("disabled").parent("li").removeClass("disabled")}else{$(g("clipboard-selection")).addClass("disabled").parent("li").addClass("disabled")}context_menu_toggle_delete_trash("def");if($(".o__f_m-button-delete").hasClass("disabled")){$(g("delete")).addClass("disabled").parent("li").addClass("disabled");$(g("rename")).addClass("disabled").parent("li").addClass("disabled")}else{$(g("delete")).removeClass("disabled").parent("li").removeClass("disabled");$(g("rename")).removeClass("disabled").parent("li").removeClass("disabled")}if(fm_is_search_results()){fm_gset_last_row_path(t)}f_m__bm__cm();if($($v__fm__container_fluid+" .o__f_m-button-chmod").hasClass("disabled")&&$(".o__f_m-button-chown").hasClass("disabled")){$($v__fm__container_fluid+" .context-properties").addClass("disabled")}else{$($v__fm__container_fluid+" .context-properties").removeClass("disabled")}var y=t.find("td a").first().data("filemin-link"),k=y===".Trash"&&(get_user_home()===fm_get_current_path_full("decode")||Object.keys(get_other_users_home_data()).includes(fm_get_current_path_full()));$(g("delete")).toggleClass("hidden",k);$(g("empty-trash")).toggleClass("hidden",!k);_f__table().dataTable().$("tr.hl-aw",{filter:"applied"}).length?$(g("calculate-selected-size")).parent("li").removeClass("hidden"):$("#__f__c__m a[data-context-calculate-selected-size]").parent("li").addClass("hidden");if($($v__fm__container_fluid+" .o__f_m-button-chmod").hasClass("disabled")){$(g("chmod")).addClass("disabled").parent("li").addClass("disabled")}else{$(g("chmod")).removeClass("disabled").parent("li").removeClass("disabled")}if($($v__fm__container_fluid+" .o__f_m-button-chown").hasClass("disabled")){$(g("chown")).addClass("disabled").parent("li").addClass("disabled")}else{$(g("chown")).removeClass("disabled").parent("li").removeClass("disabled")}if($($v__fm__container_fluid+" .o__f_m-button-chattr").hasClass("disabled")){$(g("chattr")).addClass("disabled").parent("li").addClass("disabled")}else{$(g("chattr")).removeClass("disabled").parent("li").removeClass("disabled")}if($($v__fm__container_fluid+" .o__f_m-button-chcon").hasClass("disabled")){$(g("chcon")).addClass("disabled").parent("li").addClass("disabled")}else{$(g("chcon")).removeClass("disabled").parent("li").removeClass("disabled")}},menuSelected:function(e,a,t){$v__fm__global_last_row=e.parents("tr");var _=fm_get_current_path(),n=$v__fm__global_last_row.find("td a").first(),i=fm_process_escaped_link(n.attr("data-filemin-link"),1);actual_path=fm_process_path(n.attr("href"));if(a.data("context-goto")=="1"){__f___o_dr($v__fm__global_last_row,fm_get_current_path(),actual_path,false,1)}if(a.data("context-open-new-tab")=="1"){__f___nt(actual_path,1)}if(a.data("context-select-all")=="1"){$($v__fm__container_fluid+' button[onclick="selectAll()"]').trigger("click")}if(a.data("context-deselect-all")=="1"){__f___ds_a();__r____changed()}if(a.data("context-invert-selection")=="1"){$($v__fm__container_fluid+' button[onclick="invertSelection()"]').trigger("click")}if(a.data("context-refresh")=="1"){$($v__fm__container_fluid+" button > ."+$__f__rf_s+"").parent("button").trigger("click")}if(a.data("context-newsymlink")=="1"){__f___new_symlink()}if(a.data("context-newfile")=="1"){$($v__fm__container_fluid+' a[onclick="createFileDialog()"]').trigger("click")}if(a.data("context-newfolder")=="1"){$($v__fm__container_fluid+' a[onclick="createFolderDialog()"]').trigger("click")}if(a.data("context-newarchive")=="1"){$($v__fm__container_fluid+' a[onclick="compressDialog()"]').trigger("click")}if(a.data("context-upload")=="1"){$($v__fm__container_fluid+' a[onclick="viewReadyForUpload()"]').trigger("click")}if(a.data("context-download")=="1"){$($v__fm__container_fluid+' a[onclick="downFromUrlDialog()"]').trigger("click")}if(a.data("context-clipboard")=="1"){var r=t.originalEvent!==undefined,o=!r&&$v__fm__global_last_row_active&&$v__fm__global_last_row_active.length?$v__fm__global_last_row_active:e.parents("tr"),s=o.find("img").parent("a").parent("td").next("td").find("a"),l=fm_get_current_path(),f=fm_process_escaped_link(s.attr("data-filemin-link"),1);theme_copy_to_clipboard((fm_process_path(l,"decode/unescape")+"/"+f).replace(/\/\//g,"/"))}if(a.data("context-clipboard-selection")=="2"){theme_copy_to_clipboard(check_selected_text())}if(a.data("context-copy")=="1"){$($v__fm__container_fluid+" .o__f_m-button-copy a").trigger("click")}if(a.data("context-cut")=="1"){$($v__fm__container_fluid+" .o__f_m-button-cut a").trigger("click")}if(a.data("context-paste")=="1"){$($v__fm__container_fluid+" .o__f_m-button-paste a").trigger("click")}var c=a,d=c.is("span")?c=c.parent():c;if(c.data("context-delete")=="1"){fm_deletion_type=c.data("context-delete-trash")=="1"?true:-1;$($v__fm__container_fluid+" .o__f_m-button-delete").trigger("click");if(fm_deletion_to_trash&&!fm_deletion_type||fm_deletion_type&&!fm_deletion_to_trash){~~fm_deletion_type!==~~fm_deletion_to_trash&&localStorage.setItem(v___server_hostname+"-"+v___server_username+"-"+"context-alt",1);c.find(".extra-key-label").remove()}}if(c.data("context-empty-trash")=="1"){fm_deletion_empty_trash=1;setTimeout(function(){fm_deletion_empty_trash=0},1);$($v__fm__container_fluid+" .o__f_m-button-delete").trigger("click")}var m=e.parents("tr").find("img").parent("a").parent("td").next("td").find("a"),u=m.attr("data-filemin-link");if(a.data("context-preview-image")=="1"){image_preview(u,0)}else if(a.data("context-preview-image")=="2"){image_preview(u,1)}else if(a.data("context-preview-image")=="3"){image_preview(u,0,1)}if(a.data("context-bookmarks")=="1"){if(fm_is_search_results()){__f____a("bookmark",[fm_gset_last_row_path(e.parents("tr"))])}else{$($v__fm__container_fluid+' a[href^="bookmark.cgi"]').trigger("click")}}if(a.data("context-back")=="1"){$($v__fm__container_fluid+' #headln2l div.btn-group > a[href*="'+v___module_file_manager+'"][href*="index.cgi"]:visible').trigger("click");return}if(a.data("context-search")=="1"){$($v__fm__container_fluid+' a[onclick="searchDialog()"]').trigger("click")}if(a.data("context-view")=="1"){var p=!$v__fm__global_last_row.find('a[href*="edit_file.cgi"]').length,g=a.data("context-view-reverse")=="1",h=a.data("context-view-head")=="1",v=a.data("context-view-tail")=="1";fm_target_spinner_add($v__fm__global_last_row);edit_file(i,decodeURIComponent(fm_get_current_path()),false,1,p,g,h,v)}if(a.data("context-edit")=="1"||a.attr("context-o__f_m-dependent-htmledit")=="1"){var b=e.parents("tr"),w=b.find('a[href^="edit_file.cgi?"]');fm_target_spinner_add(b);if(a.attr("context-o__f_m-dependent-htmledit")=="1"){b.data("htmledit",1)}b.addClass("m-active");w.trigger("click")}if(a.data("context-rename")=="1"){e.parents("tr").find('a[onclick^="renameDialog("]').trigger("click")}if(a.data("context-download-file")=="1"){var x=e.parents("tr").find('td a[href*="download.cgi?"]'),y=select_all_entries("test")?get_current_list_stats()[0]:__f__cnt___selected();if(__f__cnt___selected()===1&&x.length){window.location.replace(v___location_prefix+"/"+v___module_file_manager+"/"+x.attr("href"))}else{__f__dw__dir(y)}}if(a.data("context-encrypt")=="1"){$("#encryptDecrypt").modal("show")}if(a.data("context-extract")=="1"){e.parents("tr").find('a[href^="extract.cgi?"]').trigger("click")}if(a.data("context-extract-encrypted")=="1"){$($v__fm__container_fluid+" #extractEncrypted.modal").modal("show")}if(a.data("context-calculate-selected-size")=="1"){__f__get_fs()}if(a.data("context-properties")=="1"||a.data("context-getinfo")=="1"){fm_get_file_info(_,i,e.parents("tr"))}if(a.data("context-chmod")=="1"){$($v__fm__container_fluid+' a[onclick="chmodDialog()"]').trigger("click")}if(a.data("context-chown")=="1"){$($v__fm__container_fluid+' a[onclick="chownDialog()"]').trigger("click")}if(a.data("context-chattr")=="1"){$($v__fm__container_fluid+' a[onclick="chattrDialog()"]').trigger("click")}if(a.data("context-chcon")=="1"){$($v__fm__container_fluid+' a[onclick="chconDialog()"]').trigger("click")}}})}function __f___up__tb_sort(){if(config_portable_module_filemanager_default_sort!="0"){var e=config_portable_module_filemanager_default_sort,a=Test.strContains(e,"--")?1:0,e=e.replace("--","");if(a){return[[$("[data-head-"+e+"]").parent("th").index(),"desc"]]}else{return[[$("[data-head-"+e+"]").parent("th").index(),"asc"]]}}else{return[]}}function __f___u(e,a,t,_,n,i){var r=a.rows,o=a.pagination,s=a.pagination_limit,l=a.pagination_text,f=a.total;if(typeof n=="object"){var c=n[1],d=n[2],m=n[3],n=n[0]}else{var c=true}if(v___location_file=="config.cgi"){return}var u=0,p=null,g=null,h=null,v=null,b=fm_get_current_path(),w="data"+"-"+"table"+"-"+"wrap";fm_stored_listing.previous.set();typeof f=="undefined"?f=false:false;typeof n=="undefined"||typeof n!="undefined"&&n===false?p=false:p=true;var x=$v__fm__container_fluid+" .tab-pane.active",y=$(x);if(!y.length){x=$v__fm__container_fluid+" .tab-pane:first-child"}!p?g=x+" form table":g=$v__fm__container_fluid+' .tab-pane[id="tab-'+n+'"] form table';!p?h=x:h=$v__fm__container_fluid+' .tab-pane[id="tab-'+n+'"]';var k=$(h).attr("id"),v=k?k.replace(/^\D+/g,""):false,v=v?v:1;var C=$("body.file-manager").find(g).attr("id"),T=C?parseInt(C.replace(/^\D+/g,"")):"none",D=".hl-aw",S=$(g).find(D),j=S.next().index()>0?S.next().index():$(g).find("tr:visible").last().index();!p&&T!=="none"&&$($v__fm__container_fluid+" #"+"DataTables_Table_"+T).dataTable().fnDestroy();if(e==="upd"){var F=$(r).find(".fa-font").first().parents("td").index();$(g).addClass("___f_m__q__");$("body.file-manager").find(g+" tbody").empty().append(r);vars.h.selector.content.get()[0].scrollTop=0;table_proc_size_columns();!c&&$(h).data("totalValue",m).data("breadcrumb",$($v__fm__container_fluid+" .breadcrumb").clone());f&&!d&&__f__upd_____tl($(f).text());page_radios_evolve();$("._select-unselect_").parent(".awcheckbox").remove();__f_____ul()}else{var F=$(g).find(".fa-font").first().parents("td").index()}var P=function(e){var a=v___module_file_manager;if(v___location_prefix){a=v___location_directory_unslashed}return localStorage["DataTables_DataTables_Table_"+T+"_/"+a+e]};var I=P("/")||P("/index.cgi")||P(String()),E;if(!!I){E=JSON.parse(I)}else{E=false}check_pagination_option();var z=E&&E.length?E.length:config_portable_module_filemanager_records_per_page;if(s){z=s}if(F!=3&&F!=4){F=false}$(g).unbind("click.fmx");$(g).on("click.fmx",'a .fa.fa-pencil-square-o, a[href^="edit_file.cgi"]',function(e){e.preventDefault();e.stopPropagation();var e=jQuery.Event("keydown");e.which=115;$("body.file-manager").trigger(e)});var q=function(e,a){var t=$(e.nTableWrapper).find(".dataTables_info"),_=a?a:t.text(),n=_.match(/[0-9]+(,[0-9]+)*/g);if(t&&t.length&&n!=null&&n[0]&&n[1]&&n[2]){var i=theme_language("datatable_sinfo").replace("_START_",Convert.nice_number(n[0])).replace("_END_",Convert.nice_number(n[1])).replace("_TOTAL_",Convert.nice_number(n[2]));if(a){return i}t.text(i)}};var A=$(h).data("previousPageNumber"),O=!isNaN(A)?parseInt(A-1):0;window["_f__table"+v]=$(g).dataTable({order:[],aaSorting:[],bDestroy:true,pageLength:20,infoCallback:function(e,a,t,_,n,i){return q(e,i)},preDrawCallback:function(){var e=$(g);if(config_portable_module_filemanager_hide_actions==true){var a=$($v__fm__container_fluid+" .tab-pane.active form table"),t=a.find(".fa-font"),_=a.find(".fa-i-cursor"),n=t.length?t.parents("td").index():_.parents("td").index();if(n>1){$(g+" thead th").eq(n).addClass("hidden");e.find(".fa-font").length?e.find(".fa-font").parents("td").addClass("hidden"):e.find(".fa-i-cursor").parents("td").addClass("hidden")}}var i=e.parent("div").parent(".row");if(i.prev(".tree-view").length===0){i.before('<div class="tree-view"></div>');if(config_portable_module_filemanager_hide_tree_view){i.prev(".tree-view").addClass("hidden")}}},fnDrawCallback:function(e){if(u){fm_stored_listing.previous.set();fm_stored_listing.store(fm_get_current_path())}$($v__fm__container_fluid+" .tab-pane .paginate_button.previous > a").html('<i class="fa fa-fw fa-angle-left"></i>').css("border-top-left-radius","0").css("border-bottom-left-radius","0");$($v__fm__container_fluid+" .tab-pane .paginate_button.next > a").html('<i class="fa fa-fw fa-angle-right"></i>').css("border-top-right-radius","0").css("border-bottom-right-radius","0");$(g).find(".fa-font").removeClass("fa-font").addClass("fa-i-cursor").css("margin-right","5px").css("margin-left","5px");$(g).find(".fa-external-link").removeClass("fa-external-link").addClass("fa-extract-archive").css("margin-right","5px").css("margin-left","5px");$(g).find(".fa-edit").addClass("fa-pencil-square-o").css("margin-right","7px").css("margin-left","7px");$(g).find(".fa-arrow-right").removeClass("fa-arrow-right").addClass("fa-folder-open-o").parent("a").addClass("o__f_m-follow-file");if(e.fnRecordsTotal()<=e._iDisplayLength){$(h+" .dataTables_paginate:not(.spaginates)").hide()}else{$(h+" .dataTables_paginate:not(.spaginates)").show()}$.each($(g+" tbody tr:not('.row-filesize-done') td"),function(){if(/((\d+(\s+)|\d+\.\d+(\s+)))(TB|GB|MB|KB|Byte|Bytes|Ð¢Ð‘|Ð“Ð‘|ÐœÐ‘|ÐšÐ‘|Ð‘Ð°Ð¹Ñ‚)|(Unlimited|Ubegrenset|Nielimitowane|Ilimitado|æ— é™åˆ¶|ÐÐµ Ð¾Ð³Ñ€Ð°Ð½Ð¸Ñ‡ÐµÐ½Ð¾|No Limit|Same as admin)/i.test($(this).text())){if($(this).index()>1){list_form_table_file_size=$(this).index()}}}).promise().done(function(){if(typeof list_form_table_file_size!="undefined"){$.each($(g+" tbody tr:not('.row-filesize-done') td"),function(){if($(this).parent("tr").find('img[src$=".png"]').length){$(this).parent("tr").find("td").eq(list_form_table_file_size)}if($(this).parent("tr").find('img[src$="inode-directory.png"]').length||$(this).parent("tr").find('img[src$="inode-symlink.png"]').length||$(this).parent("tr").find('img[src$="inode-mount-point.png"]').length){$(this).parent("tr").find("td").eq(list_form_table_file_size).find("label").text("")}}).promise().done(function(){$(g+" thead th").eq(list_form_table_file_size).css("min-width","51px")})}});$(g+" ._select-unselect_, "+g+" #select-unselect").parents("th").css("opacity",0).addClass("pointer-events-none");__init__dt_ck__e();if(!$(".__o__f_m-search-results-data:visible").length){if(b){f__insert_dir_up()}else if(d&&d!="/"&&d!="%2F"){!$(g+" tbody tr.directory_go_up").length&&$(g+" tbody").prepend('<tr class="ui_checked_columns directory_go_up" style="height: 23px;"><td colspan="'+$($v__fm__container_fluid+" .active thead tr th:visible").length+'"><input class="hidden" type="hidden">&nbsp;<i class="fa fa-fw fa-folder-btl"></i>&nbsp;..</td></tr>')}}var t=$($v__fm__container_fluid+" .active td.dataTables_empty");if(t.length){$($v__fm__container_fluid+" tr.directory_go_up").trigger("mouseover")}else{$($v__fm__container_fluid+" tr.directory_go_up").removeClass("hidden")}tree_view_draw($(g));if(select_all_entries("test")){selectAll();select_all_entries()}else if(select_all_entries("test_unconf")){select_all_entries("remove")}if(a.flush){deselectAllRows()}if(a.flush_reset){__f___ds_a()}table_resize()},initComplete:function(){c&&__f___up__d("index.cgi?path="+fm_process_path(d?d:b),n,false);!c&&__f___upd___tb(d,n);!c&&__f___up__tb_store();if(p!=false&&c){$($v__fm__container_fluid+' a[href="#tab-'+n+'"]').attr("newly-created","1").trigger("click")}$(h+' select[name^="DataTables_Table"][name$="_length"]').val(z).change();this.fnSort(__f___up__tb_sort());$(g+" tbody").on("mouseout","tr",function(e){__f___cs()}).on("mouseover","tr",function(e){if($v__fm__tr_hover_active){$(this).addClass("m-active")}});if(t===0||$(g+" tbody tr").length===1&&$(g+" tbody tr td.dataTables_empty").length){page.render.content.filter.clear()}if($(g)&&!$(g).parent().is("["+w+"]")){$(g).wrap("<div "+w+"></div>");tree_resize()}var e=$(h+" table").parents(".row").next(".row").find(".col-sm-7"),r=$(h+" table").parents(".row").next(".row").find(".col-sm-5").find(".dataTables_info");if(o&&o.length){e.html(o);r.text(l)}else if(!o){fm_stored_listing.store();var s=fm_stored_listing.test();if(s){if(fm_goto_previous||i||_){this.fnPageChange(s-1)}}}var f=fm_goto_previous;fm_goto_previous=0;if(a.searched){format_search_breadcrum()}if(a.flush){select_all_entries("remove")}setTimeout(function(){f_m__bm__c();u=1},300);fm_check_goback();$v__fm__tr_hover_active=0;setTimeout(function(){$v__fm__tr_hover_active=1},400);var m="m-active",v=""+m+"-o";if(_==="create_folder"||_==="create_file"||_==="rename"||_==="delete"||typeof f==="string"){var x=Convert.serialized_to_json(f||i);if(x){var y=""+m+"-n";if(_==="delete"){var k=$(g).find("tr:visible:nth-child("+j+")");setTimeout(function(){$(g).find("tr."+m+"").removeClass(m);setTimeout(function(){k.addClass(m)},1)},2)}else{var C=Convert.htmlEscape(x.name);if(C){var T=$(g).find('td.col-name > a[data-filemin-link="'+C+'"]'),D=T.parent("td").parent("tr");if(D&&D.length){var S=$(g).find("tr."+m+"");S.addClass(v).removeClass(m);D.addClass(""+m+" "+(f?String():y)+"");D.one("mousemove mouseover",function(){D.removeClass(y);S.removeClass(v)});S.one("mousemove",function(){$(this).removeClass(v);D.removeClass(m)});var F=$(g+" tr"),P="mouseover.singlefm";F.one(P,function(e){if(!$(this).is(D)){$(this).addClass(v).removeClass(m)}$(this).one("mousemove",function(e){$(this).removeClass(v);D.removeClass(m)});F.unbind(P)})}if(_==="create_file"){edit_file(Convert.htmlUnEscape(C),decodeURIComponent(fm_get_current_path()))}}}}}else{var I=$(document.body),E=jQuery.Event("keydown.fm");E.which=36;I.trigger(E);E.which=38;I.trigger(E)}},bInfo:true,destroy:true,oLanguage:{sEmptyTable:theme_language("datatable_semptydirectory"),sInfo:l||theme_language("datatable_sinfo"),sInfoEmpty:theme_language("datatable_sinfoempty"),sLengthMenu:theme_language("datatable_slengthmenu"),sLoadingRecords:theme_language("datatable_sloadingrecords"),sProcessing:theme_language("datatable_sprocessing"),sSearch:" ",sZeroRecords:theme_language("datatable_szerorecords")},conditionalPaging:true,columnDefs:[{orderable:false,targets:[0,1,F?F:0]},{width:"32px",targets:0},{width:"64px",targets:1},{width:"90%",targets:2}],fixedColumns:true,bStateSave:true,bPaginate:z,aLengthMenu:[[5,10,15,20,25,30,35,40,45,50,55,60,70,80,90,100,250,500],[5,10,15,20,25,30,35,40,45,50,55,60,70,80,90,100,250,500]]});setTimeout(function(){theme_title_generate()},0);setTimeout(function(){store_last_tab()},2);tree_gset_node();$($v__fm__container_fluid+' div button[onclick="removeDialog()"]').addClass("disabled o__f_m-button-delete").removeAttr("onclick");$($v__fm__container_fluid+' a[onclick="chmodDialog()"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-chmod");$($v__fm__container_fluid+' a[onclick="chownDialog()"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-chown");$($v__fm__container_fluid+' a[onclick="chattrDialog()"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-chattr");$($v__fm__container_fluid+' a[onclick="chconDialog()"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-chcon");$($v__fm__container_fluid+' a[onclick="compressDialog()"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-compress");$($v__fm__container_fluid+' a[onclick="copySelected()"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-copy");$($v__fm__container_fluid+" li.o__f_m-button-copy").addClass("disabled");$($v__fm__container_fluid+' a[onclick="cutSelected()"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-cut");$($v__fm__container_fluid+" li.o__f_m-button-cut").addClass("disabled");if(!localStorage.getItem(v___server_hostname+"-"+"copy")&&!localStorage.getItem(v___server_hostname+"-"+"cut")){$($v__fm__container_fluid+' a[onclick*="paste.cgi"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-paste")}else{$($v__fm__container_fluid+' a[onclick*="paste.cgi"]').removeAttr("onclick").parent("li").addClass("o__f_m-button-paste")}if(_==="extract"){var K=theme_language("filemanager_successful_extraction");if(!theme_message_exists(_+"_warning")){plugins.messenger.post('<i class="fa fa-lg fa-fw fa-file-archive-o"></i>'+K,2,"success",_+"_info",1,["bottom","right"])}else{theme_message_dismiss(_+"_info")}}if(_==="delete"){var U="";if(fm_deletion_to_trash&&fm_deletion_to_trash.home||fm_deletion_empty_trash_previous){var R=fm_deletion_to_trash.home||fm_deletion_empty_trash_previous;if(R===true){U=".Trash"}else if(R&&R.includes(get_server_data("user-home"))){U="~/.Trash"}else{U=Convert.htmlEscape(R)+"/.Trash"}}!theme_message_exists(_+"_info")&&plugins.messenger.post('<i class="fa fa-lg fa-fw fa-trash'+(fm_deletion_empty_trash_previous?" fa2 fa2-trash-empty-o":fm_deletion_to_trash?"":"-o")+'"></i>'+theme_language("filemanager_successful_"+(fm_deletion_empty_trash_previous?"emptying_trash":fm_deletion_to_trash?"removal":"deletion")+"").replace("$1",U),2,"success",_+"_info",1,["bottom","right"])}if(_==="paste"){setTimeout(function(){theme_message_dismiss(""+_+"_info")},564)}if(_==="rename"){!theme_message_exists(_+"_success")&&plugins.messenger.post('<i class="fa fa-lg fa-fw fa-i-cursor"></i>'+theme_language("filemanager_successful_rename").replace("%from",Convert.htmlEscape($('#renameForm input[name="file"]').val())).replace("%to",Convert.htmlEscape($('#renameForm input[name="name"]').val())),2,"success",_+"_info",1,["bottom","right"])}if(_==="create_folder"){!theme_message_exists(_+"_success")&&plugins.messenger.post('<i class="fa fa-lg fa-fw fa-folder"></i>'+theme_language("filemanager_successful_directory_creation").replace("%value",Convert.htmlEscape($('#createFolderForm input[name="name"]').val())),2,"success",_+"_info",1,["bottom","right"])}if(_==="create_file"){!theme_message_exists(_+"_success")&&plugins.messenger.post('<i class="fa fa-lg fa-fw fa-file"></i>'+theme_language("filemanager_successful_file_creation").replace("%value",Convert.htmlEscape($('#createFileForm input[name="name"]').val())),2,"success",_+"_info",1,["bottom","right"])}if(_==="encrypt"||_==="decrypt"){var K=theme_language("filemanager_crypt_"+_+"ed"),N="fa-key-plus";if(_==="decrypt"){N="fa2 fa2-key-minus"}if(!theme_message_exists(_+"_warning")){plugins.messenger.post('<i class="fa fa-lg fa-fw '+N+'"></i>'+K,2,"success",_+"_info",1,["bottom","right"])}else{theme_message_dismiss(_+"_info")}}if(_&&_.toString().startsWith("purge_trash_")){theme_message_dismiss(""+_+"_info");plugins.messenger.post('<i class="fa fa-lg fa-fw fa2 fa2-trash-empty-o"></i>'+theme_language("filemanager_"+_+"_end").replace("$1","<tt>"+(get_access_level()===0?get_server_data("user-home"):"~")+"/.Trash</tt>"),2,"success",_+"_success",1,["bottom","right"])}}function fm_bookmark_searched(){if(fm_is_search_results()&&fm_bookmark_searched_str!==null){return fm_bookmark_searched_str}return 0}function f_m__bm__cm(){var e=fm_bookmark_searched()||fm_get_current_path();e=typeof e!="undefined"?!e.length?"/":e:false;var a=$($v__fm__container_fluid+" .btn-group > .at-o__f_m-favorites-dropdown").find('li a[href*="index.cgi?path="]').filter(function(){return fm_process_path($(this).text())===fm_process_path(e)});if(a.length){$("#__f__c__m").find(".fa-star-o").addClass("fa-star").removeClass("fa-star-o")}else{$("#__f__c__m").find(".fa-star").removeClass("fa-star").addClass("fa-star-o")}setTimeout(function(){if(!$(".file-manager-remove-bookmark").length){$.each($('.dropdown-menu.at-o__f_m-favorites-dropdown > li:not(.data-context-bookmarks) > a:not([href^="bookmark.cgi"])'),function(e,a){$(this).prepend('<i class="fa fa-fw fa-minus-circle pull-right file-manager-remove-bookmark"></i>')})}var e=$(".btn-group .dropdown-menu.at-o__f_m-favorites-dropdown > li"),a=e.find('a[href]:not([href^="bookmark.cgi"], [href="#"])');e.find(".no_effect").parent("li").remove();if(!a.length){$(".bm_e__me").remove();e.parent("ul").append('<li class="bm_e__me"><span class="bm_e__me_l">'+theme_language("filemanager__no_bookmarks")+"</span></li>")}else{$(".bm_e__me").remove()}},0)}function f_m__bm__c(){var e=fm_bookmark_searched()||fm_get_current_path();e=typeof e!="undefined"?!e.length?"/":e:false;$.each($(".btn-group > .at-o__f_m-favorites-dropdown").find('li a[href*="index.cgi?path="]'),function(){if(uri_parse_param2("path",$(this).attr("href"))==e){$(this).parents(".at-o__f_m-favorites-dropdown").find('a[href^="bookmark.cgi?path="]').html('<i class="fa fa-fw fa-star" aria-hidden="true">&nbsp;&nbsp;</i>'+theme_language("filemanager_unbookmark"));return false}else{$(this).parents(".at-o__f_m-favorites-dropdown").find('a[href^="bookmark.cgi?path="]').html('<i class="fa fa-fw fa-star-o" aria-hidden="true">&nbsp;&nbsp;</i>'+theme_language("filemanager_bookmark"))}}).promise().done(function(){setTimeout(function(){f_m__bm__cm()},100)})}function f_m__bm__u(e){var a=fm_bookmark_searched()||fm_get_current_path();if(e){a=e}a=typeof a!="undefined"?!a.length?"%2F":a:"";var t=$(".file-manager .btn-group > .at-o__f_m-favorites-dropdown").find('li a[href*="index.cgi?path="]').filter(function(){return fm_process_path(uri_parse_param2("path",$(this).attr("href")))===fm_process_path(a)});var _=!e||e&&fm_get_current_path()===e;if(t.length){_&&t.parents(".at-o__f_m-favorites-dropdown").find('a[href^="bookmark.cgi?path="]').html('<i class="fa fa-fw fa-star-o" aria-hidden="true">&nbsp;&nbsp;</i>'+theme_language("filemanager_bookmark"));t.parent("li").remove()}else{!e&&$($v__fm__container_fluid+" .btn-group > .at-o__f_m-favorites-dropdown").find('a[href^="bookmark.cgi?path="]').html('<i class="fa fa-fw fa-star" aria-hidden="true">&nbsp;&nbsp;</i>'+theme_language("filemanager_unbookmark")),$("body.file-manager").find("ul.dropdown-menu.at-o__f_m-favorites-dropdown").append('<li><a href="index.cgi?path='+fm_process_path(a)+'" style="padding-left: 12px;"><i class="fa fa-fw fa-minus-circle pull-right file-manager-remove-bookmark"></i>'+fm_process_path(a,"escape/decode")+"</a></li>")}f_m__bm__cm();return t}function __f___upd___cr(e,a){var t=$("body.file-manager"),_="";t.find(".breadcrumb").empty();if((get_access_level()==0||get_access_level()==1)&&!get_jailed_user()){t.find(".breadcrumb").append('<li class="fm___root__"><a href="index.cgi?path="><i class="fa fa-folder-root"></i></a></li>')}else{t.find(".breadcrumb").append('<li class="fm___root__"><a href="index.cgi?path="><i class="fa fa-home text-light"></i></a></li>')}$.each($(e),function(e,a){_=_+(a!=""?"/"+a:"");if(a!=""){var n=_.replace(a,""),i=fm_process_path(_);if(get_access_level()===3){n=get_user_home()+n}var r='<i data-path="'+Convert.encodeURIComponentConsistent(n)+'" class="fa fa-fw fa-lg fa-caret-right margined-left-4"></i>';t.find(".breadcrumb").append('<li><a href="index.cgi?path='+i+'">'+Convert.htmlEscape(a)+r+"</a></li>")}}).promise().done(function(){if(!$.isEmptyObject(a)){t.find(".breadcrumb li a").removeAttr("href").replaceTagName("span");t.find(".breadcrumb li:last-child span").after($(a[0]));t.find(".breadcrumb li:first-child").replaceWith('<li class="fm___root__ text-light"><span><i class="fa fa-search text-light"></i></span></li>');$($v__fm__container_fluid+" div.total").html(a[1])}else{if(!$($v__fm__container_fluid+" .breadcrumb li:first-child").find(".fa.fa-keyboard-o").length&&!$($v__fm__container_fluid+" a.popover-path").length){$($v__fm__container_fluid+" .breadcrumb li:first-child").prepend('<a class="fa fa-fw fa-keyboard-o popover-path" style="position: absolute; margin-left: -12px; margin-top: 4px; font-size: 80%;" data-container="body" data-animation="false" data-toggle="popover-path" data-placement="'+(config_portable_module_filemanager_hide_toolbar!=true?"auto right":"auto left")+'" data-html="true" data-trigger="click" data-content=\'<div class="form-horizontal"> <div class="input-group input-group-sm"> <span class="input-group-addon"><i class="fa fa-fw fa-folder-open-o"></i></span><input type="text" class="form-control popover-path-input" placeholder="'+theme_language("filemanager_manual_path")+'"> <span class="input-group-btn" style="width:0;"> <button class="btn btn-sm btn-default popover-path-button" type="button"><i class="fa fa-fw fa-chevron-circle-right text-lighter"></i><span class="cspinner hidden" style="margin-top: 2px; margin-left: -17px;"><span class="cspinner-icon small"></span></span></button> </span> </div> </div>\'></a>');if(config_portable_module_filemanager_hide_toolbar!=true){$($v__fm__container_fluid+" .fa.fa-keyboard-o.popover-path").detach().appendTo(".breadcrumb li:last-child");$($v__fm__container_fluid+" .fa.fa-keyboard-o.popover-path").css("margin-left","2px")}$($v__fm__container_fluid+' [data-toggle="popover-path"]').popover({sanitize:false})}}})}function get_active_tab_id(){return parseInt($(".data-content-container .nav.nav-tabs li.active a").attr("href").replace("#tab-",""))}function __f___upd___tb(e,a){if(e&&e.startsWith("%2F")){e=decodeURIComponent(e)}var t=e.replace(/\/$/,"").split("/").slice(-1)[0];t=t?t:"/";if(a){$($v__fm__container_fluid+' li a[href="#tab-'+a+'"] span[data-tab-path]').text(t).attr("data-original-title",e?Convert.htmlEscape(e):"/");$("#file-manager-new-instance").removeClass("disabled").find("span.cspinner").parent("span").replaceWith('<i class="fa fa-plus"></i>')}else{$($v__fm__container_fluid+" li.active a span[data-tab-path]").text(t).attr("data-original-title",e?Convert.htmlEscape(e):"/")}}function __f___up__tb_store(){if(page.handle.content.preloader.show(-1)){return}var e=[],a=v___server_username;if($t_uri_virtualmin){a+="_"+$('aside [name="dom"]').val()}$($v__fm__container_fluid+" .nav.nav-tabs li a span[data-original-title]").each(function(a,t){var _=$(t).attr("data-original-title").replace(/\/$/,"");var n=fm_process_path(_,"unescape"),i=n?n:"%2F";e.push(i)}).promise().done(function(){var t={};t[a]=e;var _=JSON.parse(localStorage.getItem(v___server_hostname+"-"+"settings_thirdparty_filemanager_remembered_tabs"));if(!$.isEmptyObject(_)){delete _[a]}var n=$.extend({},t,_);localStorage.setItem(v___server_hostname+"-"+"settings_thirdparty_filemanager_remembered_tabs",JSON.stringify(n))})}function __f___ld__tb_stored_chk(){var e=JSON.parse(localStorage.getItem(v___server_hostname+"-"+"settings_thirdparty_filemanager_remembered_tabs")),a=v___server_username;if($t_uri_virtualmin){a+="_"+$('aside [name="dom"]').val()}return!$.isEmptyObject(e)?e[a]:false}function __f___ld__tb_stored(){var e=__f___ld__tb_stored_chk(),a=fm_extract_path(v___location.href),t=[],_=0;if($.isArray(e)){$.each($(e),function(e,n){if(a===n||!n||n==="%2F"||t.includes(n)){return}t.push(n);setTimeout(function(){__f___nt(n,false,false,true);if(!_){_++;__f___up__tb_vis()}},e*2+10)})}}function __f___up__tb_vis(){$($v__fm__container_fluid+" .nav.nav-tabs li").length===1?$($v__fm__container_fluid+" .nav.nav-tabs li:first-child").addClass("hidden"):$($v__fm__container_fluid+" .nav.nav-tabs li:first-child").removeClass("hidden")}function __f___up__d(e,a,t){var _=fm_process_path(e,"decode/unescape"),n=_.split("/"),i=$("body.file-manager");$($v__fm__container_fluid+' [data-toggle="popover-path"]').popover("hide");$($v__fm__container_fluid+" .popover-path-button").find("i").removeClass("invisible").parent().find(".cspinner").addClass("hidden");__f___upd___cr(n,t);__f___upd___tb(_,a);if(_){$($v__fm__container_fluid+' #headln2l div.btn-group > a[href*="'+v___module_file_manager+'"][href*="index.cgi"]').removeClass("hidden")}else{$($v__fm__container_fluid+' #headln2l div.btn-group > a[href*="'+v___module_file_manager+'"][href*="index.cgi"]').addClass("hidden")}$.each($($v__fm__container_fluid+' .modal .modal-body form input[name="path"]'),function(){$(this).val(fm_process_path(_))});$($v__fm__container_fluid+' ul li a[href^="bookmark.cgi?path="]').attr("href","bookmark.cgi?path="+Convert.htmlEscape(_));f_m__bm__c();plugins.favorites.detect();setTimeout(function(){theme_title_generate();__r____changed();__f___up__tb_vis();__f___up__tb_store()},0)}function __f___new_symlink(){$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/create_symlink.cgi?module="+v___module+__f___um()+extra_query(),data:__f___gd(),dataType:"json",success:function(e){if(e[0].error&&e[0].error.length){plugins.messenger.post('<i class="fa fa-lg fa-fw fa-exclamation-triangle"></i>'+error_replace_tags(e[0].error),10,"warning","symlink_error",1,["bottom","right"])}__f___u("upd",e[0],1,fm_get_current_path(),false)},error:function(e){session.status(e.responseText)}})}function __f___nt(e,a,t,_){var n=e;$this=$("#file-manager-new-instance");$this.blur();$($v__fm__container_fluid+" .nav.nav-tabs li").addClass("disabled");tab___to______create=tab___to______create+1;var i=String(),r=String(),o=String(),s=String();if(t){i="active",r=" in",o=""+i+" "+r+"",$tabs_container=$($v__fm__container_fluid+" .tabs-top"),$tabs=$tabs_container.find(".nav.nav-tabs"),$tabs_content=$tabs_container.find(".tab-content"),ariaExpandedStr="aria-expanded",s=""+ariaExpandedStr+'="true"';$tabs.find("li").removeClass(i).find("a").removeAttr(ariaExpandedStr);$tabs_content.find(".tab-pane").removeClass(o)}var l=$($v__fm__container_fluid+" .tabs-top > .nav.nav-tabs > .ui-sortable-handle.active"),f='<li class="ui-sortable-handle '+i+'"><a href="#tab-'+tab___to______create+'" data-toggle="tab" '+s+'><i class="fa fa-fw fa-close-box pull-right invisible"></i><span data-tab-path data-container="#content .panel-body" data-toggle="tooltip" data-placement="auto top"><span style="margin-top: 2px; margin-left: -3px" class="cspinner"><span class="cspinner-icon smaller"></span></span>&nbsp;</span></a></li>';if(_){l=$($v__fm__container_fluid+" .tabs-top > .nav.nav-tabs");l.append(f)}else{l.after(f)}$($v__fm__container_fluid+" .tabs-top > .tab-content").append('<div class="tab-pane fade'+o+'" id="tab-'+tab___to______create+'">                <form class="ui_form" role="form" action="" method="post" id="list_form_AuthenticThemeTmp'+tab___to______create+'" name="list_form_AuthenticThemeTmp'+tab___to______create+'">                    <table class="table table-striped table-hover table-condensed"><tbody></tbody></table>                    <input class="ui_hidden heighter-34" type="hidden" name="path_AuthenticThemeTmp'+tab___to______create+'" id="path_AuthenticThemeTmp'+tab___to______create+'" value="'+n+'">                </form>            </div>');var c=$($v__fm__container_fluid+" .active table thead").clone();c.removeClass("hidden");c.prependTo("#list_form_AuthenticThemeTmp"+tab___to______create+" table");__f____r("get","index.cgi?path="+e,false,0,[tab___to______create,a]);tab___is______new=true}function fm_gset_last_row_path(e){var a=e.find("td a[data-filemin-link]").first(),t=a.find('img[src*="inode-directory.png"]').length,_=fm_process_escaped_link(a.attr("data-filemin-link"),1),n="/"+(t?_:_.substring(0,_.lastIndexOf("/"))),i=fm_get_current_path()+fm_process_path(n);fm_bookmark_searched_str=i;return i}function fm_check_goback(){var e=$("#headln2l .btn-group").find('a[href*="'+v___module_file_manager+'/index.cgi"]');if(fm_get_current_path()==="%2F"){e.addClass("hidden")}else{e.removeClass("hidden")}}function fm_is_search_results(){return $($v__fm__container_fluid+" .__o__f_m-search-results-data:visible").length}function fm_safe_path(e){if(e&&e.startsWith("%2525252F")){e=decodeURIComponent(decodeURIComponent(decodeURIComponent(e)))}if(e&&e.startsWith("%25252F")){e=decodeURIComponent(decodeURIComponent(e))}if(e&&e.startsWith("%252F")){e=decodeURIComponent(e)}if(e&&e.startsWith("%2F%2F")){e=e.replace(/(%2F)+/g,"%2F")}return e}function fm_path_check_jailed(e){var a=String();if(e&&!e.startsWith("%2F")){a="decode"}if(e){var t=get_jailed_user(),_=get_jailed_user("home");if(fm_user_data&&fm_user_data.allowed_paths&&fm_user_data.allowed_paths.length===1&&(get_access_level()===2||get_access_level()===3||get_access_level()===4)||t){var n=new RegExp("^"+fm_process_path(t?_:get_user_home(),a),"");e=e.replace(n,"")}}return e}function fm_process_escaped_link(e,a){var t=Convert.htmlUnEscape(e);if(a){return t}else{return Convert.encodeURIComponentConsistent(t)}}function fm_process_path(e,a){e=fm_extract_path(e);if(a){if(a.includes("decode")){e=decodeURIComponent(e)}if(a.includes("unescape")){var t=0;if(e&&e.startsWith("%2F")){e=decodeURIComponent(e);t=1}e=Convert.htmlUnEscape(e);if(t){e=Convert.encodeURIComponentConsistent(e)}}else if(a.includes("escape")){e=Convert.htmlEscape(e)}}return e}function fm_get_current_path(e){var a=$($v__fm__container_fluid_form+' > input[type="hidden"][name="path"]').val();a=fm_process_path(a,e);return a}function fm_get_current_path_full(e){var a=fm_get_current_path("decode");if(get_access_level()===2||get_access_level()===3||get_access_level()===4){a=get_user_home()+a}if(a){a=a.replace(/[\/]+$/,"")}return fm_process_path(a,e)}function fm_set_current_path(e){if(e){fm_previous_path_used=fm_get_current_path();if(e&&!e.startsWith("%2F")&&!e.startsWith("%252F")){e=Convert.encodeURIComponentConsistent(e)}e=fm_safe_path(e);$($v__fm__container_fluid+' input[type="hidden"][name="path"]').val(e)}}function fm_extract_path(e){var a;if(e&&(e.includes("?path=")||e.includes("&path="))){a=uri_parse_param2("path",e);if(!a){a="%2F"}}else{a=e}if(a&&!a.startsWith("%2F")&&!a.startsWith("%252F")){a=Convert.encodeURIComponentConsistent(a)}a=fm_safe_path(a);return a}function fm_files_mode_ask(e){if(!config_portable_module_filemanager_files_mode_ask){e.call();return}var a='[data-bb-handler="success"]',t='[data-bb-handler="danger"]',_="fm_files_mode_ask",n=function(a,t){if(a.find('input[name="'+_+'"]').val()=="true"){config_portable_module_filemanager_files_mode_ask=false;if(t!=config_portable_module_filemanager_files_safe_mode){config_portable_module_filemanager_files_safe_mode=t?true:false;core.updateModuleData("/mconfig.cgi?module=filemin&section=line0&nprev=Previous","/mconfig_save.cgi",{config_portable_module_filemanager_files_safe_mode:config_portable_module_filemanager_files_safe_mode})}theme.config.save()}fm_overwrite_files=!t;e.call()},i=snippets.inject_extra_option("checkbox:html",false,_,theme_language("filemanager_files_mode_ask_remember"),{extraClass:{main:"thick"},getHtml:true,checked:false}),r=bootbox.dialog({message:theme_language("filemanager_files_mode_ask_desc"),title:'<i class="fa fa-fw fa-question-circle font-size-80p bootbox-o__f_m-paste-prompt">&nbsp;&nbsp;</i> <strong class="font-size-90p">'+theme_language("filemanager_files_mode_ask_title")+"</strong>",className:"overwrite-mode-ask-modal fade5",buttons:{success:{label:'&nbsp;<i class="fa fa-fw fa-check-circle-o">&nbsp;&nbsp;</i>'+theme_language("filemanager_files_mode_ask_title_no")+"&nbsp;&nbsp;",className:"btn-primary vertical-align-top ",callback:function(){n($(this),true)}},danger:{label:'&nbsp;<i class="fa fa-fw fa-times-circle-o">&nbsp;&nbsp;</i>'+theme_language("filemanager_files_mode_ask_title_yes")+"&nbsp;&nbsp;",className:"btn-danger vertical-align-top margined-left--2",callback:function(){n($(this),false)}}},onEscape:function(){}});r.init(function(){$(this).find(a).before(i+"&nbsp;")}).on("shown.bs.modal",function(){var e=$(this);setTimeout(function(){e.find(config_portable_module_filemanager_files_safe_mode?a:t).focus()},0)})}function fm_trash_clear(e){var a="purge_trash_"+e+"";plugins.messenger.post('<i class="fa fa-lg fa-fw fa2 fa2-trash-empty-o"></i>'+theme_language("filemanager_purge_trash_"+e+"_start").replace("$1","<tt>"+(get_access_level()===0?get_server_data("user-home"):"~")+"/.Trash</tt>")+" "+theme_language("global_please_wait"),0,"info",a+"_info",1,["bottom","right"]);$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/purge_trash.cgi?module="+v___module+extra_query()+"&trash_all="+(e==="all"?1:0),data:__f___gd(),dataType:"json",success:function(e){setTimeout(function(){__f___u("upd",e[0],1,a,false);tree_update_node()},567)},error:function(e){session.status(e.responseText)}})}function __f____r(e,a,t,_,n,i){if(f__ck_init_err(1)){f__ck_init_err();return}typeof i=="undefined"?i=false:false;if(typeof n=="object"){var r=n[1],n=n[0]}else{var r=true}var o=fm_extract_path(a);typeof n=="undefined"?n=false:false;if(e==="get"){if(typeof getflist!="undefined"&&i){getflist.abort();__f_____ul()}if(__f__ck_lock()&&r){return}__f_____lo(true,true);var s=extra_query(a,false,"list");var l=$($v__fm__container_fluid+" .tab-pane.active"),f=l.find(".paginate_button.active").text();getflist=$.ajax({xhr:function(){var e=new window.XMLHttpRequest;return e},type:"POST",url:v___server_extensions_path+"/file-manager/list.cgi?module="+v___module_file_manager+s,data:{path:o},dataType:"json",complete:function(){setTimeout(function(){fm_refreshing_current=0},120)},success:function(e){if(e[0]&&e[0].udata&&(e[0].udata.user||e[0].udata.home)){fm_user_data=e[0].udata}var t="refreshDir_info";if(theme_message_exists(t)){select_all_entries("remove");theme_message_dismiss(t)}!initial_fm_load&&theme_message_dismiss("getPath_error");setTimeout(function(){!fm_refreshing_current&&l.data("previousPageNumber",f)},100);if(e[0].error&&e[0].error.length||e[0].error_fatal&&e[0].error_fatal.length){var i=e[0].error||e[0].error_fatal;plugins.messenger.post('<i class="fa fa-lg fa-fw fa-exclamation-circle"></i>'+error_replace_tags(Convert.htmlEscape(i.replace(" :",":").replace(" ,",","))),15,"error","getPath_error",1,["bottom","right"]);__f_____ul();$($v__fm__container_fluid+" .active table .cspinner").remove();if(n){$($v__fm__container_fluid+' a[href="#tab-'+n+'"]').parent("li").remove();$($v__fm__container_fluid+' .tab-content .tab-pane[id="tab-'+n+'"]').remove()}return}else{$($v__fm__container_fluid+' [data-toggle="popover-path"]').popover("hide")}var s=fm_get_current_path(),c=fm_extract_path(a);if(s!==c){select_all_entries("remove")}if(!n){fm_set_current_path(c)}var d=$(e[0].total).append(__f___tl_v()).html();r&&$($v__fm__container_fluid+" .total").html(d);if(n){$($v__fm__container_fluid+' .tab-pane[id="tab-'+n+'"]').data("totalValue",d)}else{$($v__fm__container_fluid+" .tab-pane.active").data("totalValue",d)}__f___u("upd",e[0],_,false,[n,r,o,d]);$("._select-unselect_").parent(".awcheckbox").remove();$("#__f__c__m").css("display","none");setTimeout(function(){__f___us_a();if(typeof sortable=="function"){sortable($($v__fm__container_fluid+" .tabs-top > ul.nav"))}},10)},error:function(e){var a=$(e.responseText),t=a.find("#headln2r").length;if(t){var _=a.filter("h3").text();if(_&&_.length){__f_____ul();plugins.messenger.post('<i class="fa fa-lg fa-fw fa-exclamation-circle"></i>'+(theme_language("global_error")+":&nbsp;&nbsp;"+_.replace(" :"," ").replace(" ,",",")),15,"error","getPath_error",1,["bottom","right"])}}else{session.status(e.responseText)}}})}}function get_other_users_home_data(){var e={};if(get_access_level()!=0||config_portable_module_filemanager_switch_users!==true){return e}if(typeof fm_users_data_dynamic==="object"){$.each(Convert.arrFlip(fm_users_data_dynamic),function(a,t){var _=fm_process_path(a.split(":")[2]);e[_]=t})}return e}function __f___us_a(){if(get_access_level()!=0||config_portable_module_filemanager_switch_users!==true){return}var e=fm_get_current_path();if(e&&e.indexOf($g__v__home_base)>-1&&e!=$g__v__home_base){$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/fetcher.cgi?module="+v___module+"&list_users=1",data:false,dataType:"JSON",success:function(a){$.each(Convert.arrFlip(a),function(t,_){var n=fm_process_path(t.split(":")[2]);if(e==n||e.startsWith(n+"%2F")){localStorage.setItem(v___server_hostname+"-"+"settings_thirdparty_filemanager_usermode",_)}fm_users_data_dynamic=a;__f___us_tl()})},error:function(e){session.status(e.responseText)}})}else{__f___us_m_def();__f___us_tl()}}function fm_get_file_info(e,a,t){var _=e+"/"+a;if(get_access_level()===2||get_access_level()===3||get_access_level()===4){_=get_user_home()+_}_=decodeURIComponent(_.replace(/\/\//g,"/"));var n=v___location_prefix+"/xhr.cgi?type=file&action=stat&"+"&file="+Convert.encodeURIComponentConsistent(_)+"&module="+v___module_file_manager;fm_target_spinner_add(t);$.ajax({type:"POST",url:n,data:false,dataType:"JSON",success:function(e){fm_target_spinner_remove();var a=function(){return $(document.body).find(".fm_fileinfo_data")},t=e.size[0],_=e.size[1],i=e.content;i=Convert.htmlEscape(i);i=i.replace(/(?:\r\n|\r|\n)/g,"<br>").replace(/\/\//g,"/");i=i.replace(/((\b)(?!\d+)IO Block|(?!\d+)\w+\b): /g,"<strong>$1: </strong>");i=i.replace(/\s/g,"&nbsp;");var r="fm_fileinfo_data";window[r]=[];var o="data-a-checksum",s=""+o+"&#61;&quot;",l="&quot;",f=new RegExp(""+s+"(.*?)"+l,"g"),c=i.match(f),d=_>=1024e3&&_<config_portable_module_filemanager_checksum_limit,m=function(e,t,_){var n=a(),i=".modal-body > div";if(n&&n.length){var r=e.call(this,t),o=new RegExp(r),s=n.find(i);s.html(s.html().replace(o,_))}},u=function(e,a){if(!a){m(p,e,g(e))}window[r][e]=$.ajax({type:"POST",url:n+"&checksum="+e,data:false,dataType:"JSON",success:function(a){m(g,e,a.checksum)},error:function(e){session.status(e.responseText)}})},p=function(e){return"<button "+o+'="'+e+'" class="btn btn-default btn-xs btn-xxs vertical-align-baseline"><i class="fa fa-refresh"></i></button>'},g=function(e){return"<span "+o+'="'+e+'" class="cspinner margined-left-8"><span class="cspinner-icon dark smallest"></span></span>'};if(c){i=i.replace(f,d?g("$1"):p("$1"))}var h=$(document.body);h.append('<div class="modal fade fade7 fm_fileinfo_data" tabindex="-1" role="dialog">'+'<div class="modal-dialog modal-lg" role="document">'+'<div class="modal-content">'+'<div class="modal-header">'+'<h4 class="warning"><i class="fa fa-fw fa-info-circle" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_properties")+"</h4>"+'<button type="button" class="close" data-dismiss="modal" aria-label="'+theme_language("global_close")+'"><span aria-hidden="true">&times;</span></button>'+"</div>"+'<div class="modal-body"><div>'+i+"</div></div>"+"</div>"+"</div>"+"</div>");a().on("shown.bs.modal",function(){if(!d){var e="click.checksumevt";a().off(e);a().on(e,"button["+o+"]",function(e){e.preventDefault();u($(this).attr(o),0)})}else{$.each(a().find("span["+o+"]"),function(){u($(this).attr(o),1)})}}).on("hidden.bs.modal",function(){a().remove();var e=window[r]||{};Object.entries(e).forEach(function(e){const[a,t]=e;if(t&&typeof t.abort==="function"){t.abort.call()}})}).modal("show")},error:function(e){session.status(e.responseText)}})}function fm_get_current_home_username(){return localStorage.getItem(v___server_hostname+"-"+"settings_thirdparty_filemanager_usermode")}async function fm_get_current_home_user_details(){var e=fm_get_current_path(),a={};if(e&&e.indexOf($g__v__home_base)>-1&&e!=$g__v__home_base){var t=fm_get_current_home_username();a=$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/fetcher.cgi?module="+v___module+"&list_users=1&list_user="+(t||" ")+"",data:false,dataType:"JSON"});return await a}else{return a}}function __f___us_m_def(){localStorage.setItem(v___server_hostname+"-"+"settings_thirdparty_filemanager_usermode","")}function __f___us_tl(){var e=fm_get_current_home_username(),a=theme_language("filemanager_user_switch")+"<br><hr class='hr-dashed hr-no-margin hr-darker'>"+theme_language("filemanager_user_switch_current_user")+": <em>"+(e?e:v___server_username)+"</em>",t="#file-manager-switch-user";$(t).attr("data-original-title",a);if(!!e){$(t).addClass("btn-warning")}else{$(t).removeClass("btn-warning")}}function __f___tl_v(){var e=theme_language("filemanager_selected_entries").replace("%value","<span>0</span>"),a=$('.total_selected[data-all="1"]');if(a.length){return". "+a[0].outerHTML}return'. <span class="total_selected">'+e+'</span> <span class="label label-warning total_size hidden"><span class="total_size_data"></span></span>'}function update_per_page(e){$('[name="per_page"]').val(e)}function update_records_for_server_pagination(e){$('[name="config_portable_module_filemanager_records_for_server_pagination"]').val(parseInt(e)).trigger("input")}function block_events(){vars.events.blocked=true;setTimeout(function(){vars.events.blocked=false},vars.event.stopped_typing_delay*5)}function action_messages_dismiss_all(e){theme_message_dismiss(""+e+"_success");theme_message_dismiss(""+e+"_error");theme_message_dismiss(""+e+"_info");theme_message_dismiss(""+e+"_warning")}function alert_json_errors(e,a,t,_,n){var i=JSON.parse(e),r=t.endsWith("_")?t+a:t,o=theme_language(r)+":<br><ul>",s=n?0:10;if(typeof i==="object"&&i){if(Object.keys(i).length>1||_){var l=0,f=String(),c=10,d=theme_language("filemanager_batch_error");for(var m in i){l++;if(l<=c){o+="<li>"+m+" - "+i[m]+"</li>"}else{f='<div class="margined-top-3">'+d.replace("%1",'<span class="label label-danger">'+(l-c)+"</span>")+"</div>"}}o+="</ul>"+f+"";plugins.messenger.post('<i class="fa fa-lg fa-fw fa-exclamation-triangle"></i>'+o,15,"error",a+"_error",1,["bottom","right"])}else{plugins.messenger.post('<i class="fa fa-lg fa-fw fa-exclamation-triangle"></i>'+Convert.json_to_string(i),15,"error",a+"_error",1,["bottom","right"])}}}function encryptDecryptModalA(e){var a=$("#encryptDecrypt"),t=a.find("[data-title-text]"),_=a.find("[data-title-icon]"),n=a.find("[data-encrypt]"),i=a.find("[data-decrypt]"),r=a.find("[data-label-text]"),o=a.find(".use_master_admin_keys_cnt"),s=a.find("[data-button-text]"),l=n.find('select[name="key"]'),f=a.find("[data-button-reverse]"),c=$("#__f__c__m li.context-o__f_m-dependent-encrypt:not(.divider)"),d=c.find("a"),m=c.find("i"),u="fa-key-plus",p="fa2 fa2-key-minus",g="hidden",h="disabled",v="btn-warning",b=theme_language("global_encrypt"),w=theme_language("global_decrypt"),x=theme_language("filemanager_encrypt_option_delete_afterwards"),y=theme_language("filemanager_decrypt_option_delete_afterwards");if(e){m.add(_).removeClass(u).addClass(p);t.add(s).text(w);d.html(c.find("i")[0].outerHTML+"&nbsp;&nbsp;"+w);f.text(b);n.addClass(g);i.removeClass(g);s.addClass(v).removeClass(h);r.text(y);get_access_level()===0&&fm_get_current_home_username()&&o.removeClass("hidden")}else{m.add(_).addClass(u).removeClass(p);t.add(s).text(b);d.html(c.find("i")[0].outerHTML+"&nbsp;&nbsp;"+b);f.text(w);n.removeClass(g);i.addClass(g);s.removeClass(v);r.text(x);o.addClass("hidden");if(l.val()){s.removeClass(h)}else{s.addClass(h)}}}function fm_install_deps(e,a,t){var _=a[0],n=a[1],i=a[2],r=a[3];plugins.messenger.post('<i class="fa fa-lg fa-fw fa-package-install fa-1_50x margined-left--2"></i>'+r+" "+theme_language("global_please_wait")+'&nbsp;&nbsp;&nbsp;<span class="cspinner"><span class="cspinner-icon white smallest margined-top-4"></span></span>',0,"info","galleryError",1,["bottom","right"]);$.ajax({type:"POST",url:e,data:false,dataType:"html",success:function(e){if(!session.status(e)){return}if(!e||e&&e.includes(_)){plugins.messenger.post('<i class="fa fa-lg fa-fw fa-package-install fa-1_50x margined-left--2"></i>'+i+"",15,"error","galleryError",1,["bottom","right"])}else{plugins.messenger.post('<i class="fa fa-lg fa-fw fa-package-install fa-1_50x margined-left--2"></i>'+n+"",2,"success","galleryError",1,["bottom","right"])}}})}function image_download(e,a){link="download.cgi?file="+fm_process_path(a)+"&path="+fm_process_path(e)+"";window.location.replace(v___location_prefix+"/"+v___module_file_manager+"/"+link)}function image_preview(e,a,t){if(typeof PhotoSwipe!=="function"){load.bundle("photoswipe",1,{image_preview:arguments},2);return}var _=String();if(t){_+="&files_selected=1"}if(a){_+="&files_all=1"}if(e){_+="&file_requested="+e+""}if(a||t){var n=t?" fa-1_25x fa2 fa2-image-selected":" fa-1_15x fa2 fa2-images";plugins.messenger.post('<i class="fa fa-lg fa-fw '+n+' margined-top--2"></i>'+(theme_language("filemanager_preview_images_building")+" "+theme_language("global_please_wait"))+'&nbsp;&nbsp;&nbsp;<span class="cspinner"><span class="cspinner-icon white smallest margined-top-4"></span></span>',0,"info","galleryError",1,["bottom","right"])}$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/list-images.cgi?module="+v___module+_+extra_query()+"&width="+parseInt(window.innerWidth*.75)+"&height="+parseInt(window.innerHeight*.75)+"",data:__f___gd(),dataType:"JSON",success:function(e){e=e[0];if(e.error){plugins.messenger.post('<i class="fa fa-lg fa-fw fa-package-install fa-1_50x margined-left--2"></i>'+e.error,30,"warning","galleryError",1,["bottom","right"])}else if(e.warning){plugins.messenger.post('<i class="fa fa-lg fa-fw fa-1_15x fa2 fa2-images margined-top--2"></i>'+e.warning,10,"warning","galleryError",1,["bottom","right"])}else if(e.items){var a='<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">'+'    <div class="pswp__bg"></div>'+'    <div class="pswp__scroll-wrap">'+'        <div class="pswp__container">'+'            <div class="pswp__item"></div>'+'            <div class="pswp__item"></div>'+'            <div class="pswp__item"></div>'+"        </div>"+'        <div class="pswp__ui pswp__ui--hidden">'+'            <div class="pswp__top-bar">'+'                <div class="pswp__counter"></div>'+'                <button class="pswp__button pswp__button--close" title="'+theme_language("global_close")+' (Esc)"></button>'+'                <button class="pswp__button pswp__button--download" title="'+theme_language("filemanager_context_download_file")+'"</button>'+'                <button class="pswp__button pswp__button--fs" title="'+theme_language("global_toggle_fullscreen")+'"></button>'+'                <button class="pswp__button pswp__button--zoom" title="'+theme_language("global_zoom_in_out")+'"></button>'+'                <div class="pswp__preloader">'+'                    <div class="pswp__preloader__icn">'+'                      <div class="pswp__preloader__cut">'+'                        <div class="pswp__preloader__donut"></div>'+"                      </div>"+"                    </div>"+"                </div>"+"            </div>"+'            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">'+'                <div class="pswp__share-tooltip"></div> '+"            </div>"+'            <button class="pswp__button pswp__button--arrow--left" title="'+theme_language("global_prev_arrow_left")+'">'+"            </button>"+'            <button class="pswp__button pswp__button--arrow--right" title="'+theme_language("global_next_arrow_right")+'">'+"            </button>"+'            <div class="pswp__caption">'+'                <div class="pswp__caption__center"></div>'+"            </div>"+"        </div>"+"    </div>"+"</div>";document.querySelector("body").insertAdjacentHTML("beforeend",a);pswpElem=document.querySelector(".pswp"),items=e.items,index_requested=e.index_requested,gallery=new PhotoSwipe(pswpElem,PhotoSwipeUI_Default,items,{history:false,shareEl:false,fullscreenEl:false,escKey:true,downloadEl:true,closeElClasses:["ui"],index:index_requested});gallery.listen("destroy",function(){pswpElem.remove()});theme_message_dismiss("galleryError");gallery.init()}},error:function(e){session.status(e.responseText)}})}function ___f__tw(){__f___globals();__f_____undel();document.activeElement.blur();var e=config_portable_module_filemanager_hide_tree_view?' class="hidden"':"",a=config_portable_module_filemanager_hide_tree_view?" hidden":"",t=document.body;if($(t).attr("class")&&$(t).attr("class").indexOf(v___module_file_manager)>-1){$__f__rf_s="fa-refresh";var _="jquery.jspanel";load.bundle(_,1);setTimeout(function(){$($v__fm__container_fluid+" #upload-form").removeAttr("onsubmit");$($v__fm__container_fluid+" #upload-form").append("<p data-pre-upload-container>"+theme_language("upload_initial_info")+"</p>");$($v__fm__container_fluid+' #upload-form input[name="upfiles"]').removeClass("heighter-28");$($v__fm__container_fluid+" #readyForUploadDialog .modal-footer").prepend('<button type="button" data-upload-reset class="btn btn-default pull-left"><i class="fa fa-fw fa-times-circle"></i> '+theme_language("global_reset")+"</button>");$($v__fm__container_fluid+' #readyForUploadDialog button[onclick="uploadFiles()"]').html('<i class="fa fa-fw fa-check-circle"></i>&nbsp;'+theme_language("global_upload")+"");$($v__fm__container_fluid+' #readyForUploadDialog button[onclick="uploadFiles()"]').after('<span class="dropdown dropup pull-right pull-left"><button type="button" class="btn btn-primary dropdown-toggle " data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">'+'<span class="fa fa-0_90x fa-caret-down"></span>'+"</button>"+'<ul class="dropdown-menu">'+'<li onclick="fm_overwrite_files = this.querySelector(\'input\').checked ? true : false"><span class="awcheckbox awobject awobjectm"><input '+(fm_overwrite_files?"checked ":String())+'id="overwrite_efiles_4" name="overwrite_efiles" type="checkbox" class="iawobject" value="'+fm_overwrite_files+'"><label class="lawobject font-weight-normal" for="overwrite_efiles_4">&nbsp;'+theme_language("filemanager_files_mode_ask_title2")+"&nbsp;&nbsp; </label></span></li>"+"</ul></span>");$($v__fm__container_fluid+" #readyForUploadDialog #readyForUploadList").remove();$($v__fm__container_fluid+" #readyForUploadDialog [data-upload-reset]").after($(""+$v__fm__container_fluid+" #upload-form ~ .awcheckbox").detach().addClass("thick"));$($v__fm__container_fluid+' #readyForUploadDialog [data-id="overwrite_existing"]').parent().hide();var e=$($v__fm__container_fluid+" .o__f_m-button-delete");if(config_portable_module_filemanager_move_to_trash){e.addClass("btn-warning").removeClass("btn-danger").attr("title",theme_language("filemanager_context_move_to_trash")).find(".fa").addClass("fa-trash")}if(config_portable_module_filemanager_move_to_trash){e.wrapAll('<div class="btn-group"></div>');e.after('<span class="dropdown pull-right pull-left purge-trash-dropdown"><button type="button" class="btn btn-default dropdown-toggle o__f_m-button-delete-etrash-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">'+'<span class="fa fa-0_90x fa-caret-down"></span>'+"</button>"+'<ul class="dropdown-menu">'+'<li onclick="fm_trash_clear(\'curr\')"><a href="javascript:;">'+theme_language("filemanager_trash_empty_curr_user"+(get_access_level()===0?"":"_single")+"").replace("$1","<tt>"+get_server_data("user-home")+"/.Trash</tt>")+"</a></li>"+(get_access_level()===0?'<li onclick="fm_trash_clear(\'all\')"><a href="javascript:;">'+theme_language("filemanager_trash_empty_all_users")+"</a></li>":"")+"</ul></span>")}e.attr("data-container",".breadcrumb + .btn-group.pull-right").attr("data-placement","auto bottom").attr("data-skip","true").tooltip({sanitize:false,trigger:"hover",delay:{show:0,hide:vars.plugins.tooltip.delay.hide}});e.next(".dropdown").find(".dropdown-toggle").attr("data-container",".breadcrumb + .btn-group.pull-right").attr("data-placement","auto bottom").attr("data-skip","true").attr("title",theme_language("filemanager_context_empty_trash")).tooltip({sanitize:false,trigger:"hover",delay:{show:0,hide:vars.plugins.tooltip.delay.hide}})},3);$($v__fm__container_fluid+" .panel-body").append('            <div class="data-content-container">        <div data-tree-view'+e+'>        <div data-resizer></div>          <span class="cspinner centered-initial"><span class="cspinner-icon"></span></span>        </div>        <div class="tree-view-filter hidden-content '+a+'"><input type="text" placeholder="'+theme_language("datatable_filter")+'"></div>        <div class="data-table">            <div class="tabs-top">                <ul class="nav nav-tabs">                    <li class="active ui-sortable-handle"><a href="#tab-1" data-toggle="tab"><i class="fa fa-fw fa-close-box pull-right invisible"></i><span data-tab-path data-container="body" data-toggle="tooltip" data-placement="auto top" data-title="/">/</span></a></li>                </ul>                <div class="tab-content">                    <div class="tab-pane fade in active" id="tab-1">                    </div>                </div>            </div>        </div>      </div>        ');$($v__fm__container_fluid_form).detach().appendTo("#tab-1");if(typeof sortable=="function"){var n=$($v__fm__container_fluid+" .tabs-top > ul.nav");sortable(n).on("sortupdate.fm",function(){__f___up__tb_store()})}if(config_portable_module_filemanager_remember_tabs&&__f___ld__tb_stored_chk()){setTimeout(function(){__f___ld__tb_stored()},10)}$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/fetcher.cgi?module="+v___module+"&home_base=1",data:false,dataType:"JSON",success:function(e){$g__v__home_base=jQuery.isEmptyObject(e)?v___server_userhome:fm_process_path(e.home_base)},error:function(e){session.status(e.responseText)}});var r=setInterval(function(){if(typeof fm_user_data!=="undefined"&&fm_user_data.user){if(get_access_level()==0&&!get_jailed_user()&&config_portable_module_filemanager_switch_users===false){$('#headln2r .btn-group a[href*="config.cgi"]').before('<a id="file-manager-switch-user" data-container="body" data-toggle="tooltip" data-html="true" class="btn btn-link '+(__f___um()?"btn-warning ":"")+'text-lighter pull-left"><i class="fa fa-user-switch"></i></a>');__f___us_tl();$(t).attr("data-user-switch",1)}clearInterval(r)}},100);var o=$("#headln2r .btn-group");var s="path-to-shell";if(core.moduleAvailable("shell")){o.prepend("<a "+theme_inject_tooltip(theme_language("path_to_console2"),"#headln2r",false,false,false,"(")+' class="btn btn-link text-lighter pull-left '+s+'"><i class="fa fa-terminal" aria-hidden="true"></i></a>');$($v__fm__container_fluid+" ."+s).on("click.fm",function(e){e.preventDefault();if(v___module===v___module_file_manager){var a=fm_get_current_path();if(get_access_level()===3){a=fm_process_path(get_user_home())+a}plugins.shell.set(a);plugins.shell.open()}})}o.prepend('<a id="file-manager-new-instance" '+theme_inject_tooltip(theme_language("filemanager_new_tab"),"#headln2r",false,false,false,"(")+' class="btn btn-link text-lighter pull-left"><i class="fa fa-plus"></i></a>');o.prepend('<a data-tree-toggle data-container="body" data-toggle="tooltip" data-title="'+theme_language("filemanager_tree_view_toggle")+'" class="btn btn-link text-lighter pull-left"><i class="fa fa-tree-view fa-rotate-90"></i></a>');o.find("i.fa.fa-cog").parent("a").attr("data-placement","auto right").attr("data-original-title",theme_language("global_module_preferences"));$("body").on("input.fm",".dataTables_length select",function(e){fm_stored_listing.delete()});$(t).on("click.fm",".tab-pane.active .ui_checked_columns > .ui_checked_checkbox:nth-child(1) + td > a",function(e){e.preventDefault();e.stopPropagation();if(e.offsetX<=-2&&e.offsetX>=-11&&!$(e.target).is("img")){$(this).trigger("contextmenu")}});var l;$(t).on("contextmenu.fm",function(){l=true});function f(){l=false}$(t).on("click.fm",f).on("mouseleave.fm",".popover:not(.file-manager-help):not(.jsPanel-file-info)",function(e){var a=$(this);e.preventDefault();e.stopPropagation();if(l){$(t).one("click.fm",function(){a.popover("hide")})}else{a.popover("hide")}});$($v__fm__container_fluid+" div.total").append(__f___tl_v());$($v__fm__container_fluid+" .tab-pane.active").data("totalValue",$("div.total").html());$("body.file-manager #content").append('<ul id="__f__c__m" class="dropdown-menu" role="menu" style="display:none">                <li data-block data-go_up-target><a tabindex="-1" href="#" data-context-back="1"><i class="fa fa-fw fa-arrow-left"></i></a></li>                <li data-block data-go_up-target><a tabindex="-1" href="#" data-context-refresh="1"><i class="fa fa-fw fa-refresh"></i></a></li>                <li data-block data-go_up-target><a tabindex="-1" href="#" data-context-bookmarks="1"><i class="fa fa-fw fa-star"></i></a></li>                <li data-block data-go_up-target><a tabindex="-1" href="#" data-context-search="1"><i class="fa fa-fw fa-search"></i></a></li>                <li class="divider"></li>                                    <li class="context-o__f_m-dependent-goto hidden"><a tabindex="-1" href="#" data-context-goto="1"><i class="fa fa-fw fa-folder-open-o"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_goto")+'</a></li>                    <li class="divider context-o__f_m-dependent-goto"></li>                    <li class="context-o__f_m-dependent-open-new-tab hidden"><a tabindex="-1" href="#" data-context-open-new-tab="1"><i class="fa fa-fw fa-tab"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_open_new_tab")+'</a></li>                    <li class="divider context-o__f_m-dependent-open-new-tab hidden"></li>                    <li class="dropdown-submenu prelocked" role="menu">                        <a tabindex="-1" href="#" data-context-select-all="1"><i class="fa fa-fw fa-check-square-o"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_select_all")+'</a>                        <ul class="dropdown-menu" role="menu">                            <li><a tabindex="-1" href="#" data-context-deselect-all="1"><i class="fa fa-fw fa-square-o"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_deselect_all")+'</a></li>                        </ul>                    </li>                    <li><a tabindex="-1" href="#" data-context-invert-selection="1"><i class="fa fa-fw fa-share-square-o"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_select_invert")+'</a></li>                    <li data-go_up-target class="divider"></li>                    <li data-go_up-target class="dropdown-submenu" role="menu">                        <a tabindex="-1" href="#" data-prevent-default>&nbsp;&nbsp;'+theme_language("filemanager_context_new")+'</a>                        <ul class="dropdown-menu" role="menu">                    <li><a tabindex="-1" href="#" data-context-newsymlink="1"><i class="fa fa-fw fa-smm fa-file-symlink margined-right--1 margined-left--1"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_symlink")+'</a></li>                            <li data-go_up-target><a tabindex="-1" href="#" data-context-newfile="1"><i class="fa fa-fw fa-file-o"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_newfile")+'</a></li>                            <li data-go_up-target><a tabindex="-1" href="#" data-context-newfolder="1"><i class="fa fa-fw fa-folder-o"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_newfoder")+'</a></li>                            <li><a tabindex="-1" href="#" data-context-newarchive="1"><i class="fa fa-fw fa-file-archive-o"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_newarchive")+'</a></li>                            <li data-go_up-target class="dropdown-submenu" role="menu">                                <a tabindex="-1" href="#" data-prevent-default><i class="fa fa-fw fa-exchange"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_transfer")+'</a>                                <ul class="dropdown-menu" role="menu">                                    <li data-go_up-target><a tabindex="-1" href="#" data-context-upload="1"><i class="fa fa-fw fa-upload"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_upload")+'</a></li>                                    <li data-go_up-target><a tabindex="-1" href="#" data-context-download="1"><i class="fa fa-fw fa-download"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_download")+'</a></li>                                </ul>                            </li>                        </ul>                    </li>                    <li data-context-always-keep class="divider"></li>                    <li class="dropdown-submenu prelocked" role="menu">                        <a tabindex="-1" href="#" data-context-copy="1"><i class="fa fa-fw fa-files-o"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_copy")+'</a>                        <ul class="dropdown-menu" role="menu">                            <li><a tabindex="-1" href="#" data-context-clipboard="1"><i class="fa fa-fw fa-clone"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_clipboard")+'</a></li>                            <li><a tabindex="-1" href="#" data-context-clipboard-selection="2"><i class="fa fa-fw fa-sm fa2 fa2-copy-selection"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_clipboard_selection")+'</a></li>                        </ul>                    </li>                    <li><a tabindex="-1" href="#" data-context-cut="1"><i class="fa fa-fw fa-scissors"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_cut")+'</a></li>                    <li data-context-always-keep><a tabindex="-1" href="#" data-context-paste="1"><i class="fa fa-fw fa-clipboard"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_paste")+'</a></li>                    <li class="divider"></li>                    <li><a tabindex="-1" href="#" data-context-delete="1" data-context-delete-trash="0"><i class="fa fa-fw fa-trash-o"></i>&nbsp;&nbsp;<span>'+theme_language("filemanager_context_delete")+"</span>"+(!localStorage.getItem(v___server_hostname+"-"+v___server_username+"-"+"context-alt")?ui_inject_alt_key_label():"")+'</a></li>                    <li><a tabindex="-1" href="#" data-context-empty-trash="1"><i class="fa fa-fw fa2 fa2-trash-empty-o"></i>&nbsp;&nbsp;<span>'+theme_language("filemanager_context_empty_trash")+'</span></a></li>                                        <li class="divider context-o__f_m-dependent-preview"></li>                    <li class="dropdown-submenu prelocked context-o__f_m-dependent-preview" role="menu">                        <a tabindex="-1" href="#" data-context-preview-image="1"><i class="fa fa-fw fa-image"></i>&nbsp;&nbsp;'+theme_language("global_preview_img")+'</a>                        <ul class="dropdown-menu" role="menu">                            <li><a tabindex="-1" href="#" data-context-preview-image="3"><i class="fa fa-fw fa2 fa2-image-selected"></i>&nbsp;&nbsp;'+theme_language("global_preview_img_sel")+'</a></li>                            <li><a tabindex="-1" href="#" data-context-preview-image="2"><i class="fa fa-fw fa2 fa2-images"></i>&nbsp;&nbsp;'+theme_language("global_preview_img_all")+'</a></li>                        </ul>                    </li>                                        <li class="divider context-o__f_m-dependent-view"></li>                    <li class="dropdown-submenu context-o__f_m-dependent-view prelocked" role="menu">                        <a tabindex="-1" href="#" data-context-view="1" data-context-view-head="1">&nbsp;&nbsp;'+theme_language("filemanager_context_view")+'</a>                        <ul class="dropdown-menu" role="menu">                            <li><a tabindex="-1" href="#" data-context-view="1" data-context-view-reverse="1" data-context-view-head="1"><i class="fa fa2 fa-fw fa2-align-bottom fa-rotate-180"><i class="fa fa2 fa2-swap-vertical"></i></i>&nbsp;&nbsp;'+theme_language("filemanager_view_head_and_reverse")+'</a></li>                            <li><a tabindex="-1" href="#" data-context-view="1" data-context-view-tail="1"><i class="fa fa-fw fa2 fa2 fa2-align-bottom"></i>&nbsp;&nbsp;'+theme_language("filemanager_view_tail")+'</a></li>                            <li><a tabindex="-1" href="#" data-context-view="1" data-context-view-reverse="1" data-context-view-tail="1"><i class="fa fa2 fa-fw fa2-align-bottom"><i class="fa fa2 fa2-swap-vertical fa-flip-horizontal"></i></i>&nbsp;&nbsp;'+theme_language("filemanager_view_tail_and_reverse")+'</a></li>                            <li><a tabindex="-1" href="#" data-context-view="1"><i class="fa fa-fw fa2 fa2-align-vertical-middle"></i>&nbsp;&nbsp;'+theme_language("filemanager_view_head_and_tail")+'</a></li>                        </ul>                    </li>                    <li class="divider"></li>                    <li class="dropdown-submenu context-o__f_m-dependent-edit prelocked" role="menu">                        <a tabindex="-1" href="#" data-context-edit="1">&nbsp;&nbsp;'+theme_language("filemanager_context_edit")+'</a>                        <ul class="dropdown-menu" role="menu" context-o__f_m-dependent-htmledit="1">                            <li><a tabindex="-1" href="#" context-o__f_m-dependent-htmledit="1"><i class="fa fa-fw fa-html"></i>&nbsp;&nbsp;'+theme_language("filemanager_edit_html")+'</a></li>                        </ul>                    </li>                    <li><a tabindex="-1" href="#" data-context-rename="1">&nbsp;&nbsp;'+theme_language("filemanager_context_rename")+'</a></li>                    <li class="context-o__f_m-dependent-download"><a tabindex="-1" href="#" data-context-download-file="1">&nbsp;&nbsp;'+theme_language("filemanager_context_download_file")+'</a></li>                                        <li class="divider context-o__f_m-dependent-encrypt"></li>                    <li class="context-o__f_m-dependent-encrypt"><a tabindex="-1" href="#" data-context-encrypt="1"><i class="fa fa-fw fa-key-plus"></i>&nbsp;&nbsp;'+theme_language("global_encrypt")+'</a></li>                    <li class="divider context-o__f_m-dependent-extract"></li>                    <li class="context-o__f_m-dependent-extract dropdown-submenu prelocked" role="menu">                        <a tabindex="-1" href="#" data-context-extract="1"><i class="fa fa-fw fa-extract-archive"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_extract")+'</a>                        <ul class="dropdown-menu" role="menu">                            <li><a tabindex="-1" href="#" data-context-extract-encrypted="1"><i class="fa fa-fw fa2 fa2-users-cog"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_extract_encrypted")+'</a></li>                        </ul>                    </li>                    <li class="divider"></li>                    <li class="dropdown-submenu context-properties prelocked" role="menu">                        <a tabindex="-1" href="#" data-context-properties="1">&nbsp;&nbsp;'+theme_language("filemanager_context_properties")+'</a>                        <ul class="dropdown-menu dropdown-submenu-properties" role="menu">                            <li><a tabindex="-1" href="#" data-context-calculate-selected-size="1"><i class="fa fa-fw fa-calculator"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_calculate_selected_size")+'</a></li>                            <li><a tabindex="-1" href="#" data-context-chmod="1"><i class="fa fa-fw fa-cogs"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_chmod")+'</a></li>                            <li><a tabindex="-1" href="#" data-context-chown="1"><i class="fa fa-fw fa-users"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_chown")+'</a></li>                            <li><a tabindex="-1" href="#" data-context-chattr="1"><i class="fa fa-fw fa-tags"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_chattr")+'</a></li>                            <li><a tabindex="-1" href="#" data-context-chcon="1"><i class="fa fa-fw fa-shield"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_chcon")+'</a></li>                            <li><a tabindex="-1" href="#" data-context-getinfo="1"><i class="fa fa-fw fa-info-circle"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_prop_show_all")+"</a></li>                        </ul>                    </li>                </ul>");$(t).on("click.fm","#__f__c__m li i.fa",function(e){$(this).parents("a").trigger("click")}).on("hidden.bs.modal",$v__fm__container_fluid,function(){$(".modal-backdrop").remove()}).on("click.fm",function(e){$(".tooltip").each(function(){if(!$(this).is(e.target)&&$(this).has(e.target).length===0&&$(".tooltip").has(e.target).length===0){$(this).tooltip("hide")}})}).on("click.fm",$v__fm__container_fluid+" .breadcrumb .fa-caret-right",function(e){e.preventDefault();e.stopPropagation();var a=$($v__fm__container_fluid+" .breadcrumb span[data-tree]"),t=$($v__fm__container_fluid+" .breadcrumb .fa-caret-down"),_=$(this),n=_.attr("data-path"),i=n?n:"%2F",r=_.parent("a").attr("href");$dirCurrent=_.parent("a").text();a.remove();t.addClass("fa-caret-right").removeClass("fa-caret-down");if(_.parent("a").next("span[data-tree]").length){return}_.addClass("invisible").after('<span class="cspinner"><span class="cspinner-icon smallest"></span></span>');$(this).removeClass("fa-caret-right").addClass("fa-caret-down");_.parent("a").after('<span class="hidden" data-tree=""></div>');$.ajax({type:"POST",url:v___location_prefix+"/index.cgi/?xhr-get_list=1&xhr-get_list_path="+i+"&xhr-get_list_cmodule="+v___module_file_manager,data:false,dataType:"JSON",success:function(e){i=fm_path_check_jailed(i);$.each($(e),function(e,a){var t=Convert.htmlEscape(a);_.parent("a").next("span[data-tree]").append('<a href="index.cgi?path='+(fm_process_path(i)+"%2F"+Convert.encodeURIComponentConsistent(a))+'"><i class="fa fa-fw '+($dirCurrent==a?"fa-folder-open-o":"fa-folder-o")+'">&nbsp;&nbsp;</i>'+($dirCurrent==a?" <strong>"+t+"</strong>":" "+t)+"</a>")}).promise().done(function(){_.removeClass("invisible").next(".cspinner").remove();_.parent("a").removeClass("text-black");_.parent("a").next("span[data-tree]").removeClass("hidden");var e=_.parent("a").next("span[data-tree]"),a=$("span[data-tree] i.fa-folder-open-o").parent("a");if(typeof a.offset()!="undefined"&&typeof e.offset()!="undefined"){e.animate({scrollTop:a.offset().top-e.offset().top+e.scrollTop()},0)}})},error:function(e){session.status(e.responseText)}})}).on("mouseenter.fm",$v__fm__container_fluid+" .breadcrumb .fa-caret-right",function(e){$(this).parent("a").addClass("text-black")}).on("mouseleave.fm",$v__fm__container_fluid+" .breadcrumb .fa-caret-right",function(e){$(this).parent("a").removeClass("text-black")}).on("click.fm",function(e){var a=$($v__fm__container_fluid+" .breadcrumb a + span[data-tree]"),t=$($v__fm__container_fluid+" .breadcrumb .fa-caret-down");if(a.length){a.remove();t.addClass("fa-caret-right").removeClass("fa-caret-down")}});$.each($($v__fm__container_fluid+" .modal .modal-content .modal-footer"),function(e,a){$(this).wrapInner('<div class="btn-group"></div>')});$($v__fm__container_fluid+" .btn-group.pull-right").find(".fa-check-square").removeClass("fa-check-square").addClass("fa-share-square-o");$($v__fm__container_fluid+" #headln2r").find('a[href*="config.cgi"]').attr("href",v___location_prefix+"/mconfig.cgi?module="+v___module_file_manager);$($v__fm__container_fluid+" #headln2l .help_popup").css("padding","6px 12px");$($v__fm__container_fluid+" #headln2l .btn-group > a.btn:first-child > i").attr("data-title",theme_language("global_dir_up")).attr("data-toggle","tooltip");$($v__fm__container_fluid+' ul > li > a[href^="bookmark.cgi?path="]').parents("ul").addClass("at-o__f_m-favorites-dropdown").find(".fa-bookmark-o").removeClass("fa-bookmark-o").addClass("fa-fw fa-star-o");$($v__fm__container_fluid+' div button[onclick="removeDialog()"]').addClass("disabled o__f_m-button-delete").removeAttr("onclick");$($v__fm__container_fluid+' a[onclick="chmodDialog()"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-chmod");$($v__fm__container_fluid+' a[onclick="chownDialog()"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-chown");$($v__fm__container_fluid+' a[onclick="chattrDialog()"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-chattr");$($v__fm__container_fluid+' a[onclick="chconDialog()"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-chcon");$($v__fm__container_fluid+' a[onclick="compressDialog()"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-compress");$($v__fm__container_fluid+' a[onclick="copySelected()"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-copy");$($v__fm__container_fluid+' a[onclick="cutSelected()"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-cut");$($v__fm__container_fluid+' #chmodDialog input[id="perms"]').val("");if(!localStorage.getItem(v___server_hostname+"-"+"copy")&&!localStorage.getItem(v___server_hostname+"-"+"cut")){$($v__fm__container_fluid+' a[onclick*="paste.cgi"]').removeAttr("onclick").parent("li").addClass("disabled o__f_m-button-paste")}else{$($v__fm__container_fluid+' a[onclick*="paste.cgi"]').removeAttr("onclick").parent("li").addClass("o__f_m-button-paste")}$($v__fm__container_fluid+' form[name="chmod"] input[name="t_total"]').attr("type","number");if(!theme_server_data_available_selinux){$($v__fm__container_fluid+" li.o__f_m-button-chcon").addClass("hidden");$($v__fm__container_fluid+" + #__f__c__m a[data-context-chcon]").parent("li").addClass("hidden");$($v__fm__container_fluid+" + #__f__c__m .dropdown-submenu-properties").css("top","-74px")}$(t).on("click.fm",$v__fm__container_fluid+' button + .dropdown-menu.at-o__f_m-favorites-dropdown > li > a:not([href^="bookmark.cgi"])',function(){$(this).parents("ul").trigger("mouseleave")});$.each($($v__fm__container_fluid+" .btn-group.pull-right .btn-group"),function(){$(this).find("button > .caret").css("margin-left","3px");$(this).find("button + ul.dropdown-menu > li > a").css("padding-left","12px");$(this).find("button + ul.dropdown-menu > li > a > i").append("&nbsp;&nbsp;");$(this).find("ul").addClass("pull-right").find(".fa-paste").removeClass("fa-paste").addClass("fa-fw fa-clipboard").text("").after("&nbsp;&nbsp;");$(this).find("ul").addClass("pull-right").find(".fa-search").addClass("fa-fw").text("").after("&nbsp;")}).promise().done(function(){f_m__bm__c()});$(t).on("click.fm",$v__fm__container_fluid+" .file-manager-remove-bookmark",function(e){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();var a=fm_extract_path($(this).parent("a").attr("href")),t=$(this).parent("a").parent("li");$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/bookmark.cgi?module="+v___module_file_manager,data:{path:a},dataType:"text",success:function(e){if(!session.status(e)){return}f_m__bm__u(a);plugins.messenger.post('<i class="fa fa-lg fa-fw fa-star-o"></i>'+theme_language("filemanager_unbookmark_success").replace("%value",a?fm_process_path(a,"escape/decode"):"/"),5,"warning","bookmarkAddRemove",1,["bottom","right"])},error:function(e){}})}).on("mousemove.fm",function(e){$(this).data("mousePageX",e.pageX).data("mousePageY",e.pageY)}).on(window.navigator.platform==="MacIntel"&&!browser.detect.safari()?"mouseup.fm":"click.fm",".___f_m__q__:visible .ui_checked_columns",function(e){if(e.ctrlKey){if($(e.target).is('input[name="name"].iawobject')){return}e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();$(this).find("td:first-child").trigger("contextmenu")}});$($v__fm__container_fluid+" .panel-body > .modal").on("hidden.bs.modal",function(){document.activeElement.blur()});if(get_access_level()!==0&&get_access_level()!==1){$(t).find($v__fm__container_fluid+" .breadcrumb li:first-child a").html('<i class="fa fa-home text-light">&nbsp;</i>')}$(t).find($v__fm__container_fluid+" .breadcrumb li:first-child").addClass("fm___root__");__f___u(false,false,0,0);$($v__fm__container_fluid+' button[onclick="selectAll()"], '+$v__fm__container_fluid+' button[onclick="invertSelection()"]').click(function(){setTimeout(function(){__r____changed()},0);var e=$(this).attr("onclick");if(e&&e.includes("selectAll")){select_all_entries()}});$(t).on("click.fm",$v__fm__container_fluid+' #headln2l div.btn-group > a[href*="'+v___module_file_manager+'"][href*="index.cgi"]',function(e){e.preventDefault();e.stopPropagation();__f___b_dr(e)}).on("click.fm",$v__fm__container_fluid+" .breadcrumb li > a:not(.fa-keyboard-o), .breadcrumb li > a + span[data-tree] > a, .dropdown-menu.at-o__f_m-favorites-dropdown > li:not(.data-context-bookmarks) > a:not(.no_effect), .active table label > a.o__f_m-follow-file",function(e){e.preventDefault();e.stopPropagation();var a="index.cgi?path=",t=0,_=$(e.target).find(".file-manager-add-bookmark, .file-manager-remove-bookmark").length;if($(this).attr("href")&&$(this).attr("href").indexOf("/"+v___module_file_manager)===-1){a=$(this).attr("href")}if(a==="index.cgi?path=/"){a="index.cgi?path="}var n=a.indexOf("bookmark.cgi?")>-1;if(a&&n){t=1;return}if($(this).parent().is("span[data-tree]")){a=a.replace("//","/");if(get_access_level()===3){var i=get_user_home();a=a.replace(i,"")}}if($(this).parents(".at-o__f_m-favorites-dropdown").length){$(this).closest(".dropdown-menu").prev().dropdown("toggle")}__f____r("get",a,false,t,false,e.originalEvent!==undefined);!_&&fm_root_dir_spinner_add()}).on("click.fm",$v__fm__container_fluid+' li.o__f_m-button-copy:not(".disabled") a',function(e){e.preventDefault();e.stopPropagation();plugins.messenger.post('<i class="fa fa-lg fa-fw fa-clone"></i>'+theme_language("filemanager_copying_selected")+" "+theme_language("global_please_wait"),0,"info","copy_info",1,["bottom","right"]);__f____a("copy",false)}).on("click.fm",$v__fm__container_fluid+' li.o__f_m-button-cut:not(".disabled") a',function(e){e.preventDefault();e.stopPropagation();plugins.messenger.post('<i class="fa fa-lg fa-fw fa-scissors"></i>'+theme_language("filemanager_cutting_selected")+" "+theme_language("global_please_wait"),0,"warning","cut_warning",1,["bottom","right"]);__f____a("cut",false)}).on("click.fm",$v__fm__container_fluid+' li.o__f_m-button-paste:not(".disabled") a',function(e){e.preventDefault();e.stopPropagation();plugins.messenger.post('<i class="fa fa-lg fa-fw fa-clipboard"></i>'+theme_language("filemanager_pasting_selected")+" "+theme_language("global_please_wait"),0,"info","paste_info",1,["bottom","right"]);__f____a("paste",false)}).on("click.fm",$v__fm__container_fluid+' a[href^="extract.cgi"]',function(e){e.preventDefault();e.stopPropagation();fm_files_mode_ask(function(){plugins.messenger.post('<i class="fa fa-lg fa-fw fa-file-archive-o"></i>'+theme_language("filemanager_unpacking_archive")+" "+theme_language("global_please_wait"),0,"info","extract_info",1,["bottom","right"]);__f____a("extract")})});if(vars.h.selector.content.get().data("AppleMobileDev")===true){var c=".popover, .tooltip, .jsPanel, #jsPanel-replacement-container, aside, .mobile-menu-toggler, #right-side-tabs, .right-side-tabs-toggler",d="pointer-events-none bg-filter-backdrop";$($v__fm__container_fluid+" .modal").on("shown.bs.modal",function(){$($v__fm__container_fluid).append($("body > .modal-backdrop").css("position","absolute").detach());$(this).css("z-index",999999);theme.veiled(true,c,d)}).on("hidden.bs.modal",function(){$(this).css("z-index",String());theme.veiled(false,c,d)})}$(t).find($v__fm__container_fluid+' #removeDialog button[type="button"][onclick="removeSelected()"]').removeAttr("onclick").addClass("_at_filemanager_delete_submit");$(t).on("click.fm",$v__fm__container_fluid+" #removeDialog button._at_filemanager_delete_submit",function(e){e.preventDefault();e.stopPropagation();if($(this).hasClass("_empty-trash")){fm_deletion_empty_trash=1;setTimeout(function(){fm_deletion_empty_trash=0},1)}plugins.messenger.post('<i class="fa fa-lg fa-fw fa-trash'+(fm_deletion_empty_trash?" fa2 fa2-trash-empty-o":fm_deletion_to_trash?"":"-o")+'"></i>'+theme_language("filemanager_"+(fm_deletion_empty_trash?"emptying_trash":fm_deletion_to_trash?"removing":"deleting")+"_selected")+" "+theme_language("global_please_wait"),0,"info","delete_info",1,["bottom","right"]);__f____a("delete");theme_modal_dismiss()});$($v__fm__container_fluid+" #removeDialog").on("show.bs.modal",function(){var e=0,a=fm_deletion_empty_trash===1;if(~~fm_deletion_type===1||!fm_deletion_type&&config_portable_module_filemanager_move_to_trash){e=1}fm_deletion_to_trash=e;fm_deletion_type=config_portable_module_filemanager_move_to_trash;var t=$(this).find("#items-to-remove"),_=$(this).find("h4"),n=theme_language("filemanager_context_"+(a?"empty_trash":e?"move_to_trash":"permanently_delete")),i=theme_language(a?"filemanager_empty_trash_button":e?"global_remove":"filemanager_context_delete"),r=a?"fa2 fa2-trash-empty-o":e?"fa-trash":"fa-trash-o",o=a?"btn-danger":e?"btn-warning":"btn-danger",s="btn-warning btn-danger",l=$(this).find("._at_filemanager_delete_submit");t.empty();if(select_all_entries("test")){var f=get_current_list_stats(),c=f[0];var d=theme_language("filemanager_mass_selected_for_delete").replace("%1","<em><b>"+c+"</b></em>").replace("%2","<em><b>"+fm_get_current_path("escape/decode")+"</b></em>"),m='<span class="text-warning">'+d+"</span>";t.html(m)}else{$.each(_f__gr("checked"),function(){t.append(Convert.htmlEscape($(this).val())+"<br>")})}_.empty().append('<i class="fa fa-fw '+r+'" aria-hidden="true"></i>&nbsp;&nbsp;'+Convert.strUpFirst(n)+"");l.text(i).removeClass(s).addClass(o);$(this).find(".modal-body").empty().append(t);$(this).find(".modal-body").toggleClass("hidden-force",a);l.toggleClass("_empty-trash",a)});$(t).find($v__fm__container_fluid+' #renameDialog button[type="button"][onclick="renameSelected()"]').removeAttr("onclick").addClass("_at_filemanager_rename_submit");$(t).on("click.fm",$v__fm__container_fluid+" #renameDialog button._at_filemanager_rename_submit",function(e){e.preventDefault();e.stopPropagation();plugins.messenger.post('<i class="fa fa-lg fa-fw fa-i-cursor"></i>'+theme_language("filemanager_renaming_selected")+" "+theme_language("global_please_wait"),0,"info","rename_info",1,["bottom","right"]);__f____a("rename",false)}).on("submit.fm",$v__fm__container_fluid+" #renameDialog",function(e){e.preventDefault();e.stopPropagation();$($v__fm__container_fluid+" #renameDialog button._at_filemanager_rename_submit").trigger("click")});$($v__fm__container_fluid+" #renameDialog").on("shown.bs.modal",function(){var e=$(this).find('input[type="text"]');e.focus();e.select()});$($v__fm__container_fluid+" #renameDialog").on("show.bs.modal",function(e){var a=$(this).find('input[type="text"]'),t=$(this).find("button._at_filemanager_rename_submit")});$($v__fm__container_fluid+' #renameDialog input[type="text"]').on("keyup.fm change.fm click.fm input.fm",function(e){var a=$($v__fm__container_fluid+" #renameDialog").find("button._at_filemanager_rename_submit");if($(this).val()){a.prop("disabled",false)}else{a.prop("disabled",true)}});$(t).find($v__fm__container_fluid+' #createFolderDialog button[type="button"][onclick="createFolder()"]').removeAttr("onclick").addClass("_at_filemanager_create_folder_submit");$(t).on("click.fm",$v__fm__container_fluid+" #createFolderDialog button._at_filemanager_create_folder_submit",function(e){e.preventDefault();e.stopPropagation();plugins.messenger.post('<i class="fa fa-lg fa-fw fa-folder"></i>'+theme_language("filemanager_creating_directory")+" `<strong>"+Convert.htmlEscape($('#createFolderForm input[name="name"]').val())+"</strong>`. "+theme_language("global_please_wait")+"",0,"info","create_folder_info",1,["bottom","right"]);__f____a("create_folder",false)}).on("submit.fm",$v__fm__container_fluid+" #createFolderForm",function(e){e.preventDefault();e.stopPropagation();$($v__fm__container_fluid+" #createFolderDialog button._at_filemanager_create_folder_submit").trigger("click")});$($v__fm__container_fluid+" #createFolderDialog").on("shown.bs.modal",function(){var e=$(this).find('input[type="text"]');e.focus()});$($v__fm__container_fluid+" #createFolderDialog").on("show.bs.modal",function(){var e=$(this).find('input[type="text"]'),a=$(this).find("button._at_filemanager_create_folder_submit");e.val("");!e.val()&&a.prop("disabled",true)});$($v__fm__container_fluid+' #createFolderDialog input[type="text"]').on("keyup.fm change.fm click.fm input.fm",function(e){var a=$($v__fm__container_fluid+" #createFolderDialog").find("button._at_filemanager_create_folder_submit");if($(this).val()){a.prop("disabled",false)}else{a.prop("disabled",true)}});$(t).find($v__fm__container_fluid+' #createFileDialog button[type="button"][onclick="createFile()"]').removeAttr("onclick").addClass("_at_filemanager_create_file_submit");$(t).on("click.fm",$v__fm__container_fluid+" #createFileDialog button._at_filemanager_create_file_submit",function(e){e.preventDefault();e.stopPropagation();plugins.messenger.post('<i class="fa fa-lg fa-fw fa-file"></i>'+theme_language("filemanager_creating_file")+" `<strong>"+Convert.htmlEscape($('#createFileForm input[name="name"]').val())+"</strong>`. "+theme_language("global_please_wait"),0,"info","create_file_info",1,["bottom","right"]);__f____a("create_file",false)}).on("submit.fm",$v__fm__container_fluid+" #createFileForm",function(e){e.preventDefault();e.stopPropagation();$($v__fm__container_fluid+" #createFileDialog button._at_filemanager_create_file_submit").trigger("click")});$($v__fm__container_fluid+" #createFileDialog").on("shown.bs.modal",function(){var e=$(this).find('input[type="text"]');e.focus()});$($v__fm__container_fluid+" #createFileDialog").on("show.bs.modal",function(){var e=$(this).find('input[type="text"]'),a=$(this).find("button._at_filemanager_create_file_submit");e.val("");!e.val()&&a.prop("disabled",true)});$($v__fm__container_fluid+' #createFileDialog input[type="text"]').on("keyup.fm change.fm click.fm input.fm",function(e){var a=$($v__fm__container_fluid+" #createFileDialog").find("button._at_filemanager_create_file_submit");if($(this).val()){a.prop("disabled",false)}else{a.prop("disabled",true)}});$(t).find($v__fm__container_fluid+' #downFromUrlDialog button[type="button"][onclick="downFromUrl()"]').removeAttr("onclick").addClass("o__f_m-submitter-url_download");$(t).on("click.fm",$v__fm__container_fluid+" #downFromUrlDialog button.o__f_m-submitter-url_download",function(e){e.preventDefault();e.stopPropagation();plugins.messenger.post('<i class="fa fa-lg fa-fw fa-download"></i>'+theme_language("filemanager_downloading_from")+" <strong>"+URI(Convert.htmlEscape($('#downFromUrlForm input[name="link"]').val())).hostname()+"</strong>. "+theme_language("global_please_wait"),0,"info","url_download_info",1,["bottom","right"]);__f____a("url_download",false)}).on("submit.fm",$v__fm__container_fluid+" #downFromUrlForm",function(e){e.preventDefault();e.stopPropagation();$($v__fm__container_fluid+" #downFromUrlDialog button.o__f_m-submitter-url_download").trigger("click")});$($v__fm__container_fluid+" #downFromUrlDialog").on("shown.bs.modal",function(){var e=$(this).find('input[name="link"]');e.focus()});$($v__fm__container_fluid+" #downFromUrlDialog").on("show.bs.modal",function(){var e=$(this).find('input[name="link"]'),a=$(this).find("button.o__f_m-submitter-url_download");!e.val()&&a.prop("disabled",true)});$($v__fm__container_fluid+' #downFromUrlDialog input[name="link"]').on("keyup.fm change.fm click.fm input.fm",function(e){var a=$($v__fm__container_fluid+" #downFromUrlDialog").find("button.o__f_m-submitter-url_download");if($(this).val()){a.prop("disabled",false)}else{a.prop("disabled",true)}});var m="disabled",u=""+m+" pointer-events-none",p=$v__fm__container_fluid+" #readyForUploadDialog",g=p+" [data-upload-reset]",h=g+" + .awcheckbox.thick",v="[data-pre-upload-container]",b="[data-pre-upload-text]",w=function(e){var a=e.find("input").is(":checked"),t=$(p).find(v),_=t.find(b),n=_.length?_:t;n.html(theme_language("upload_initial_info"+(a?"_dir":"")+""));S()},x=function(e){return new Promise(function(a,t){if(e.type!==""){return a(e)}const _=new FileReader;_.onloadend=(()=>{if(_.error&&_.error.name==="NotFoundError"){return t(_.error.name)}a(e)});_.readAsBinaryString(e)})},y=function(e,a,t){var _="fa-upload-cloud";t=t?" "+t+"":"";if(a==="succ"){_="fa-check-circle"}else if(a==="err"){_="fa-exclamation-triangle"}e=theme_language(e)||e;return'<i class="fa fa-1_15x fa-fw '+_+" margined-top--4"+t+'"></i>'+"&nbsp;&nbsp;&nbsp;<span data-pre-upload-text"+(t?' class="'+t+'"':"")+">"+e+"</span>"},k=function(e){var a=$v__fm__container_fluid+" #upload-form";return e?a:$(a)},C=function(e){var a='[type="file"]';return e?k("sel")+" "+a:k().find(a)},T=function(){return $(p).find('button[onclick="uploadFiles()"]')},D=function(){T().removeClass(u).removeAttr(m)},S=function(){T().addClass(u).attr(m,m).find(".cspinner").replaceWith('<i class="fa fa-fw fa-check-circle"></i>')},j=function(e,a){var t=C()[0].hasAttribute("webkitdirectory")?"dir":null,_=k().find(v).addClass("link-text-a"),n=function(e){if(e){S()}else{D()}},i=e?e.files.length>0?e.files.length:"":"",r=function(e){return theme_language("global_file"+(e===1?"":"s")+"_selected")},o=e&&e.files.length>0?r(e.files.length):false,s=y("upload_initial_info"+(t?"_dir":"")+""),l=$(h).find("input")[0].checked,f=e&&e.files&&e.files[0]?e.files[0]:"";if(!f){n(1);_.html(s)}else{x(f).then(function(){n(0);var a=i&&t?theme_language("theme_xhred_upload_one_dir_with")+" "+i+" "+r(e.files.length)+"":i+" "+o;_.html(o?y(a,"succ"):s)}).catch(function(){n(1);k().get(0).reset();var e=!t?"upload_err_files_mode":"upload_err_dir_mode";_.html(y(e,"err","text-warning"))})}};$(p).on("show.bs.modal",function(){var e=uri_parse_param2("id",k().attr("action"));k().attr("action","upload.cgi?path="+fm_process_path($("#upload-form").find('input[name="path"]').val())+"&id="+e+"");$(this).find('input[name="overwrite_efiles"]')[0].checked=fm_overwrite_files;k().get(0).reset();j();$(this).find(".file-input-name").remove();S()}).on("shown.bs.modal",function(){for(var e=1;e>=0;e--){w($(h))}});$(t).on("input.fm",h,function(e){if(e.originalEvent===undefined){return}$(g).trigger("click");w($(this))}).on("click.fm",g,function(){k().get(0).reset();j()}).on("change.fm",C("sel"),function(e){j(this,e)}).on("submit.fm",$v__fm__container_fluid+" #upload-form",function(e){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();var a=parseInt(Math.random()*1e18),t=fm_get_current_path(),_=$(this),n=1,i=0;T().addClass(u).find(".fa").replaceWith(theme_spinner_small(false,"white","width:12px; height:12px; margin-right: 3px; margin-left: 3px;"));_.parent("div").prev(".modal-header").find('[data-dismiss="modal"]:visible').attr("data-dismiss-id",a);function r(e,a){var t=_.parent("div").prev(".modal-header").find('[data-dismiss-id="'+a+'"][data-dismiss="modal"]:visible');if(e){return t.length}t.trigger("click")}function o(e){if(t===e){$____loader_block__manual=1;$($v__fm__container_fluid+" ."+$__f__rf_s+"").trigger("click");$____loader_block__manual=0}else{}}function s(e,a,t){if(!i){if(r(1)){r(0,t);setTimeout(function(){o(e)},300)}else{o(e)}i++}}var l="extract_uploaded",f=k().parent().next().find('[data-id="'+l+'"]').is(":checked")?"&"+l+"=1":"",c="overwrite_existing",d=fm_overwrite_files?"&"+c+"=1":"";fm_overwrite_files_mode_reset();window["progress_id_ref_"+a]=$.ajax({type:"POST",url:v___location_prefix+"/"+v___module_file_manager+"/upload.cgi?path="+t+"&id="+a+""+f+d,processData:false,contentType:false,data:new FormData(_[0]),complete:function(e){var t=fm_get_current_path();s(t,1,a);r(0,a)},error:function(e){var t=fm_get_current_path();s(t,2,a);r(0,a);$("[data-progress-id="+a+"] .bottom_progress_cancel").trigger("click")}});theme_message_dismiss("upload_error");var m,p=(get_access_level()===0||get_access_level()===1)&&!get_jailed_user()?"":get_jailed_user()?get_jailed_user("uid"):get_server_data("user-id");if(get_access_level()===0&&fm_user_data.subprivileged){p=get_server_data("user-id")}window["progress_id_ref_"+a+"_tracker"]=$.ajax({xhr:function(){var e=new window.XMLHttpRequest,t=0;e.addEventListener("progress",function(e){var _=e.target.responseText,i=/.file\.value\s+=\s+"(.*)";/g,s=/.size\.value\s+=\s+"(.*)";/g,l=/.pc\.value\s+=\s+"(.*)";/g,f=regex.matches(_,i,0,1),c=regex.matches(_,s,0,1),d=regex.matches(_,l,0,1);if(c){var d=d||t?parseInt((d.match(/|/g)||[]).length/50*100):0;if(!d){t++}if(d>100){d=100}progress_percent.control(a,"success",d,[f,c,d]);if(!m){m=f}if(m!=f){m=f;var u=fm_get_current_path();o(u)}if(n){r(0,a);n=0}}if(!session.status(_)){window["progress_id_ref_"+a].abort();window["progress_id_ref_"+a+"_tracker"].abort();return}},false);return e},type:"GET",url:v___location_prefix+"/uptracker.cgi?id="+a+"&uid="+p+"",complete:function(){var e=fm_get_current_path();s(e,2,a);r(0,a)}})});$(t).find($v__fm__container_fluid+' #searchDialog button[type="button"][onclick="search()"]').removeAttr("onclick").addClass("_at_filemanager_search_submit");$(t).on("click.fm",$v__fm__container_fluid+" #searchDialog button._at_filemanager_search_submit",function(e){e.preventDefault();e.stopPropagation();__f____a("search",false)}).on("submit.fm",$v__fm__container_fluid+" #searchForm",function(e){e.preventDefault();e.stopPropagation();$($v__fm__container_fluid+" #searchDialog button._at_filemanager_search_submit").trigger("click")});$($v__fm__container_fluid+" #searchDialog").on("shown.bs.modal",function(){var e=$(this).find('input[name="query"]');setTimeout(function(){e[0].focus()},100)}).on("show.bs.modal",function(){$($v__fm__container_fluid+' #searchDialog input[name="query"]').trigger("keyup");$($v__fm__container_fluid+' #searchDialog .fm-search-path input[type="text"]').val(Convert.uriDecodeComponent(fm_get_current_path()).replace(/[\/]+/g,"/"));$($v__fm__container_fluid+' input[name="grepreplace"]').prop("disabled",true).val("");$($v__fm__container_fluid+" ._at_filemanager_search_submit").text(theme_language("global_find")).removeClass("btn-warning").addClass("btn-primary")}).on("keyup.fm",'input[name="query"]',function(){var e=$($v__fm__container_fluid+' input[name="exclude"], '+$v__fm__container_fluid+' input[name="grepstring"], '+$v__fm__container_fluid+' input[name="grepreplace"], '+$v__fm__container_fluid+' select[name="limit_type"], '+$v__fm__container_fluid+' input[name="limit_size"], '+$v__fm__container_fluid+' input[name="limit_user"], '+$v__fm__container_fluid+' input[name="limit_group"], '+$v__fm__container_fluid+' input[name="caseins"], '+$v__fm__container_fluid+' input[name="regex"], '+$v__fm__container_fluid+' input[name="follow"]');if($.trim($(this).val()).length){e.removeAttr("disabled")}else{e.prop("disabled",true)}$($v__fm__container_fluid+' #searchDialog input[name="grepstring"]').trigger("keyup")}).on("keyup.fm",'input[name="grepstring"]',function(){if($.trim($(this).val()).length){$($v__fm__container_fluid+' input[name="grepreplace"]').removeAttr("disabled")}else{$($v__fm__container_fluid+' input[name="grepreplace"]').prop("disabled",true)}}).on("keyup.fm",'input[name="grepreplace"]',function(){if($.trim($(this).val()).length){$($v__fm__container_fluid+" ._at_filemanager_search_submit").text(theme_language("global_replace")).removeClass("btn-primary").addClass("btn-warning")}else{$($v__fm__container_fluid+" ._at_filemanager_search_submit").text(theme_language("global_find")).removeClass("btn-warning").addClass("btn-primary")}});$($v__fm__container_fluid+" #searchDialog").on("show.bs.modal",function(){var e=$(this).find('input[type="text"]'),a=$(this).find("button._at_filemanager_search_submit");!$.trim(e.val()).length&&a.prop("disabled",true)});$(t).on("click.fm",$v__fm__container_fluid+" .__o__f_m-search-results-data",function(){var e=fm_get_current_path();__f____r("get","index.cgi?path="+(e?fm_process_path(e):"")+"&flush_reset=1",false,0);theme_message_dismiss("search_preMe");theme_message_dismiss("search_error")});$($v__fm__container_fluid+' #searchDialog input[type="text"]').on("keyup.fm change.fm click.fm input.fm",function(e){var a=$($v__fm__container_fluid+" #searchDialog").find("button._at_filemanager_search_submit");if($.trim($(this).val()).length){a.prop("disabled",false)}else{a.prop("disabled",true)}});$(t).on("click.fm",$v__fm__container_fluid+' a[href^="bookmark.cgi"]',function(e){e.preventDefault();e.stopPropagation();var a=$(this).attr("href");if(a==="bookmark.cgi?path="){a=a+"/"}fm_bookmark_searched_str=null;__f____a("bookmark",a)});$(""+$v__fm__container_fluid+' #chmodDialog button[onclick="chmodSelected()"]').removeAttr("onclick").addClass("o__f_m-submitter-chmod");$(t).on("click.fm",$v__fm__container_fluid+" #chmodDialog button.o__f_m-submitter-chmod",function(e){e.preventDefault();e.stopPropagation();plugins.messenger.post('<i class="fa fa-lg fa-fw fa-user"></i>'+theme_language("filemanager_setting_permissions").replace("%value",Convert.htmlEscape($("#perms").val()))+" "+theme_language("global_please_wait"),0,"info","chmod_info",1,["bottom","right"]);__f____a("chmod",[$("#perms").val(),$('#chmodForm select[name="applyto"] option:selected').val()])});$($v__fm__container_fluid+" #chmodDialog").on("shown.bs.modal",function(){var e=$($v__fm__container_fluid+' #chmodDialog input[id="perms"]');var a=$($v__fm__container_fluid+" th span[data-head-permissions]").parent().index();if(a>1){var t=$v__fm__global_last_row.find("td:nth-child("+(a+1)+")").text();__f__cnt___selected()===1&&e.val(t).trigger("keyup")}});$($v__fm__container_fluid+" #chmodDialog").on("hidden.bs.modal",function(){var e=$($v__fm__container_fluid+' #chmodDialog input[id="perms"]').val("").keyup()});$(""+$v__fm__container_fluid+' #chownDialog button[onclick="chownSelected()"]').removeAttr("onclick").addClass("o__f_m-submitter-chown");$(t).on("click.fm",$v__fm__container_fluid+" #chownDialog button.o__f_m-submitter-chown",function(e){e.preventDefault();e.stopPropagation();plugins.messenger.post('<i class="fa fa-lg fa-fw fa-users"></i>'+theme_language("filemanager_changing_ownership").replace("%value",Convert.htmlEscape($('#chownForm input[name="owner"]').val())+":"+Convert.htmlEscape($('#chownForm input[name="group"]').val()))+" "+theme_language("global_please_wait"),0,"info","chown_info",1,["bottom","right"]);__f____a("chown",[$('#chownForm input[name="owner"]').val(),$('#chownForm input[name="group"]').val(),$('#chownForm input[name="recursive"]').prop("checked")])});$($v__fm__container_fluid+" #chownDialog").on("shown.bs.modal",function(){var e=$($v__fm__container_fluid+' #chownDialog input[name="owner"]'),a=$($v__fm__container_fluid+' #chownDialog input[name="group"]'),t=$v__fm__global_last_row.find("td.col-ownership > label > span").text();if(t){var _=t.split(":");if(_[0]){e.val(_[0])}if(_[1]){a.val(_[1])}}});$($v__fm__container_fluid+" #chownDialog").on("show.bs.modal",function(){var e=$(this).find("button.o__f_m-submitter-chown");e.prop("disabled",true)});$($v__fm__container_fluid+' #chownDialog input[name="owner"], '+$v__fm__container_fluid+' #chownDialog input[name="group"]').on("keyup.fm change.fm click.fm input.fm",function(e){var a=$($v__fm__container_fluid+" #chownDialog").find("button.o__f_m-submitter-chown");if($($v__fm__container_fluid+' #chownDialog input[name="owner"]').val()&&$($v__fm__container_fluid+' #chownDialog input[name="group"]').val()){a.prop("disabled",false)}else{a.prop("disabled",true)}});$($v__fm__container_fluid+' #chownDialog input[name="owner"], '+$v__fm__container_fluid+' #chownDialog input[name="group"]').on("keyup.fm",function(e){e.preventDefault();var a=e.which;if(a==13){$($v__fm__container_fluid+" #chownDialog button.o__f_m-submitter-chown").trigger("click")}});$($v__fm__container_fluid+" #chownDialog").on("show.bs.modal",function(){$($v__fm__container_fluid+' #chownDialog input[name="owner"], '+$v__fm__container_fluid+' #chownDialog input[name="group"]').val("");$($v__fm__container_fluid+' #chownDialog input[name="recursive"]').removeAttr("checked")});$(""+$v__fm__container_fluid+' #chattrDialog button[onclick="chattrSelected()"]').removeAttr("onclick").addClass("o__f_m-submitter-chattr");$(t).on("click.fm",$v__fm__container_fluid+" #chattrDialog button.o__f_m-submitter-chattr",function(e){e.preventDefault();e.stopPropagation();plugins.messenger.post('<i class="fa fa-lg fa-fw fa-tags"></i>'+theme_language("filemanager_changing_attributes").replace("%value",Convert.htmlEscape($('#chattrForm input[name="label"]').val()))+" "+theme_language("global_please_wait"),0,"info","chattr_info",1,["bottom","right"]);__f____a("chattr",[$('#chattrForm input[name="label"]').val(),$('#chattrForm input[name="recursive"]').prop("checked")])});$($v__fm__container_fluid+" #chattrDialog").on("show.bs.modal",function(){var e=$(this).find("button.o__f_m-submitter-chattr");e.prop("disabled",true)});$($v__fm__container_fluid+' #chattrDialog input[name="label"]').on("keyup.fm change.fm click.fm input.fm",function(e){var a=$($v__fm__container_fluid+" #chattrDialog").find("button.o__f_m-submitter-chattr");if($($v__fm__container_fluid+' #chattrDialog input[name="label"]').val()){a.prop("disabled",false)}else{a.prop("disabled",true)}});$($v__fm__container_fluid+' #chattrDialog input[name="label"]').on("keyup.fm",function(e){e.preventDefault();var a=e.which;if(a==13){$($v__fm__container_fluid+" #chattrDialog button.o__f_m-submitter-chattr").trigger("click")}});$($v__fm__container_fluid+" #chattrDialog").on("show.bs.modal",function(){$($v__fm__container_fluid+' #chattrDialog input[name="label"]').val("");$($v__fm__container_fluid+' #chattrForm input[name="recursive"]').removeAttr("checked")});$(""+$v__fm__container_fluid+' #chconDialog button[onclick="chconSelected()"]').removeAttr("onclick").addClass("o__f_m-submitter-chcon");$(t).on("click.fm",$v__fm__container_fluid+" #chconDialog button.o__f_m-submitter-chcon",function(e){e.preventDefault();e.stopPropagation();plugins.messenger.post('<i class="fa fa-lg fa-fw fa-tags"></i>'+theme_language("filemanager_changing_secontext").replace("%value",Convert.htmlEscape($('#chconForm input[name="label"]').val()))+" "+theme_language("global_please_wait"),0,"info","chcon_info",1,["bottom","right"]);__f____a("chcon",[$($v__fm__container_fluid+' #chconForm input[name="label"]').val(),$($v__fm__container_fluid+' #chconForm input[name="recursive"]').prop("checked")])});$($v__fm__container_fluid+" #chconDialog").on("shown.bs.modal",function(){var e=$($v__fm__container_fluid+' #chconDialog input[name="label"]'),a=$v__fm__global_last_row.find("td.col-selinux").text();if(a){e.val(a)}});$($v__fm__container_fluid+" #chconDialog").on("show.bs.modal",function(){var e=$(this).find("button.o__f_m-submitter-chcon");e.prop("disabled",true);var a={};$.unique($($v__fm__container_fluid+" tr td span[data-secontext]").map(function(){a[$(this).text()]=$(this).text()}).get());var t=$.map(a,function(e,a){if(a!="undefined"){return{value:e,url:a,data:{category:0}}}});function _(e){$($v__fm__container_fluid+' #chconDialog input[name="label"]').autocomplete({lookup:t,containerClass:"autocomplete-suggestions highlighted",showNoSuggestionNotice:true,noSuggestionNotice:theme_language("global_no_results_found")})}if(typeof $().autocomplete==="function"){_()}});$($v__fm__container_fluid+' #chconDialog input[name="label"]').on("keyup.fm change.fm click.fm input.fm",function(e){var a=$($v__fm__container_fluid+" #chconDialog").find("button.o__f_m-submitter-chcon");if($('#chconDialog input[name="label"]').val()){a.prop("disabled",false)}else{a.prop("disabled",true)}});$($v__fm__container_fluid+' #chconDialog input[name="label"]').on("keydown.fm",function(e){var a=e.which;if(a==13&&!$(".autocomplete-suggestions:visible").length){$($v__fm__container_fluid+" #chconDialog button.o__f_m-submitter-chcon").trigger("click")}});$($v__fm__container_fluid+" #chconDialog").on("show.bs.modal",function(){$($v__fm__container_fluid+' #chconDialog input[name="label"]').val("");$($v__fm__container_fluid+' #chconForm input[name="recursive"]').removeAttr("checked")});function F(){theme_message_dismiss("error_no_zip");$.ajax({type:"POST",url:v___location_prefix+"/index.cgi/?xhr-get_command_exists=1&xhr-get_command_exists_name=zip",data:false,dataType:"text",success:function(e){if(!session.status(e)){return}var a=select_all_entries("test");if(!e||a){$($v__fm__container_fluid+' select[name="method"]').val("tar").trigger("change");$($v__fm__container_fluid+' select[name="method"] option[value="zip"]').prop("disabled",true);var t=e&&a?theme_language("filemanager_mass_selected_no_zip"):theme_language("global_no_such_command").replace("$1","zip");plugins.messenger.post('<i class="fa fa-lg fa-fw fa-exclamation-triangle"></i>'+(theme_language("global_error")+": "+t),15,"error","error_no_zip",1,["bottom","right"]);$($v__fm__container_fluid+' select[name="method"]').find("option:not(:disabled)").length&&$($v__fm__container_fluid+' select[name="method"]').prop("disabled",true)}else{$($v__fm__container_fluid+' select[name="method"]').prop("disabled",false);$($v__fm__container_fluid+' select[name="method"] option[value="zip"]').prop("disabled",false)}},error:function(e){}})}function P(){theme_message_dismiss("error_no_tar");$.ajax({type:"POST",url:v___location_prefix+"/index.cgi/?xhr-get_command_exists=1&xhr-get_command_exists_name=tar",data:false,dataType:"text",success:function(e){if(!session.status(e)){return}var a=select_all_entries("test");if(!e||a){$($v__fm__container_fluid+' select[name="method"]').val("zip").trigger("change");$($v__fm__container_fluid+' select[name="method"] option[value="tar"]').prop("disabled",true);var t=e&&a?theme_language("filemanager_mass_selected_no_zip"):theme_language("global_no_such_command").replace("$1","tar");plugins.messenger.post('<i class="fa fa-lg fa-fw fa-exclamation-triangle"></i>'+(theme_language("global_error")+": "+t),15,"error","error_no_tar",1,["bottom","right"]);$($v__fm__container_fluid+' select[name="method"]').find("option:not(:disabled)").length&&$($v__fm__container_fluid+' select[name="method"]').prop("disabled",true)}else{$($v__fm__container_fluid+' select[name="method"]').prop("disabled",false);$($v__fm__container_fluid+' select[name="method"] option[value="zip"]').prop("disabled",false)}},error:function(){}})}$(""+$v__fm__container_fluid+' #compressDialog button[onclick="compressSelected()"]').removeAttr("onclick").addClass("o__f_m-submitter-compress").prop("disabled",true);$(t).on("click.fm",$v__fm__container_fluid+" #compressDialog button.o__f_m-submitter-compress",function(e){e.preventDefault();e.stopPropagation();plugins.messenger.post('<i class="fa fa-lg fa-fw fa-file-archive-o"></i>'+theme_language("filemanager_compressing_selected")+" "+theme_language("global_please_wait"),0,"info","compress_info",0,["bottom","right"]);var a=$("#compressSelectedForm"),t=Convert.htmlEscape(a.find('input[name="filename"]').val()),_=a.find('select[name="method"] option:selected').val(),n=a.find('input[name="arcmove"]').is(":checked"),i=a.find('input[name="arcencr"]').is(":checked"),r=a.find('input[name="arcencr_val"]').val(),o=a.find('select[name="arkkey"] option:selected').val(),s=a.find('input[name="arcencr_pass"]').val(),l=a.find('select[name="arkkey"]').data("gpgpath");__f____a("compress",[t,_,n,i,r,o,s,l])});$($v__fm__container_fluid+' #compressDialog input[name="filename"]').on("keyup.fm change.fm click.fm input.fm",function(){var e=$("#compressDialog").find("button.o__f_m-submitter-compress");if($(this).val()&&$($v__fm__container_fluid+' select[name="method"]').find("option:not(:disabled)").length){e.prop("disabled",false)}else{e.prop("disabled",true)}});$(t).on("submit.fm",$v__fm__container_fluid+" #compressSelectedForm",function(e){e.preventDefault();e.stopPropagation();$($v__fm__container_fluid+" #compressDialog button.o__f_m-submitter-compress").trigger("click")});$($v__fm__container_fluid+" #compressDialog").on("show.bs.modal",function(){$($v__fm__container_fluid+' #compressDialog input[name="filename"]').val("");$(this).find('input[name="overwrite_efiles"]')[0].checked=fm_overwrite_files;var e=$($v__fm__container_fluid+' #compressDialog input[name="arcencr"]'),a=$($v__fm__container_fluid+' #compressDialog input[name="arcmove"]');a[0].checked=false;if(e.is(":checked")){e.trigger("change")}}).on("shown.bs.modal",function(){var e=$($v__fm__container_fluid+' select[name="method"]').attr("disabled");$($v__fm__container_fluid+' select[name="method"] option[value="zip"]').prop("disabled",false);if(e||$($v__fm__container_fluid+' select[name="method"]').val()=="zip"){F()}if(e||$($v__fm__container_fluid+' select[name="method"]').val()=="tar"){P()}});$($v__fm__container_fluid+' select[name="method"]').change(function(e){if($(this).val()=="zip"){F()}if($(this).val()=="tar"){P()}var a=$(this).parents(".modal").find('[name="arcencr"]');a[0].checked=false;a.trigger("change")});$(t).on("click.fm",$v__fm__container_fluid+" .dropdown-menu > li.disabled",function(e){e.preventDefault();e.stopPropagation()});if(v___location_file==="index.cgi"&&!URI(v___location).hasQuery("path")){$($v__fm__container_fluid+" #headln2l").find('a[href*="'+v___module_file_manager+'"][href*="index.cgi"]').addClass("hidden")}$($v__fm__container_fluid+" .btn-group.pull-right > button:eq(2)").removeAttr("onclick");$(t).on("click.fm",$v__fm__container_fluid+" .btn-group.pull-right > button:eq(2)",function(e){var a=fm_get_current_path();__f__refresh__dir_and_tree()});setTimeout(function(){if(config_portable_module_filemanager_hovered_toolbar!=true){$($v__fm__container_fluid+" .btn-group.pull-right > .btn-group > button").hover(function(e){e.preventDefault();e.stopPropagation()})}},100);$(t).on("click.fm",$v__fm__container_fluid+" .btn-group.pull-right > button:eq(0), "+$v__fm__container_fluid+" .btn-group.pull-right > button:eq(1), "+$v__fm__container_fluid+" input",function(){if($($v__fm__container_fluid+" .active table tbody input:checked").length!==0){setTimeout(__f___ub,100)}else{setTimeout(__f___lb,100)}});$($v__fm__container_fluid+" .o__f_m-button-chmod a").html('<i class="fa fa-fw fa-cogs" aria-hidden="true"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_chmod"));$($v__fm__container_fluid+" #chmodDialog .modal-header h4").html('<i class="fa fa-fw fa-cogs" aria-hidden="true"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_chmod"));$($v__fm__container_fluid+" .o__f_m-button-chown a").html('<i class="fa fa-fw fa-users" aria-hidden="true"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_chown"));$($v__fm__container_fluid+" #chownDialog .modal-header h4").html('<i class="fa fa-fw fa-users" aria-hidden="true"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_chown"));$($v__fm__container_fluid+" .o__f_m-button-chattr a").html('<i class="fa fa-fw fa-tags" aria-hidden="true"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_chattr"));$($v__fm__container_fluid+" #chattrDialog .modal-header h4").html('<i class="fa fa-fw fa-tags" aria-hidden="true"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_chattr"));$($v__fm__container_fluid+" .o__f_m-button-chcon a").html('<i class="fa fa-fw fa-shield" aria-hidden="true"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_chcon"));$($v__fm__container_fluid+" #chconDialog .modal-header h4").html('<i class="fa fa-fw fa-shield" aria-hidden="true"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_chcon"));$($v__fm__container_fluid+" .o__f_m-button-compress a").html('<i class="fa fa-fw fa-file-archive-o" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_newarchive"));$($v__fm__container_fluid+" #compressDialog .modal-header h4").html('<i class="fa fa-fw fa-file-archive-o" aria-hidden="true"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_newarchive"));$($v__fm__container_fluid+" #searchDialog .modal-header h4").html('<i class="fa fa-fw fa-search" aria-hidden="true"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_search"));$($v__fm__container_fluid+" .o__f_m-button-copy a").html('<i class="fa fa-fw fa-files-o" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_copy"));$($v__fm__container_fluid+" .o__f_m-button-cut a").html('<i class="fa fa-fw fa-scissors" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_cut"));$($v__fm__container_fluid+' .btn-group .btn-group a[onclick="createFileDialog()"]').html('<i class="fa fa-fw fa-file-o" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_newfile"));$($v__fm__container_fluid+" #createFileDialog .modal-header h4").html('<i class="fa fa-fw fa-file-o" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_newfile"));$($v__fm__container_fluid+' .btn-group .btn-group a[onclick="createFolderDialog()"]').parent("li").addClass("_createFolderDialog_");$($v__fm__container_fluid+' .btn-group .btn-group a[onclick="createFolderDialog()"]').html('<i class="fa fa-fw fa-folder-o" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_newfoder"));$($v__fm__container_fluid+" #createFolderDialog .modal-header h4").html('<i class="fa fa-fw fa-folder-o" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_newfoder"));$($v__fm__container_fluid+' .btn-group .btn-group a[onclick="viewReadyForUpload()"]').html('<i class="fa fa-fw fa-upload" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_upload"));$($v__fm__container_fluid+" #readyForUploadDialog .modal-header h4").html('<i class="fa fa-fw fa-upload" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_upload"));$($v__fm__container_fluid+' .btn-group .btn-group a[onclick="downFromUrlDialog()"]').html('<i class="fa fa-fw fa-download" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_download"));$($v__fm__container_fluid+" #downFromUrlDialog .modal-header h4").html('<i class="fa fa-fw fa-download" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_download"));$($v__fm__container_fluid+" #renameDialog .modal-header h4").prepend('<i class="fa fa-fw fa-i-cursor" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;');$($v__fm__container_fluid+' .btn-group .btn-group a[onclick="downFromUrlDialog()"] i').removeClass("fa-globe").addClass("fa-download");$($v__fm__container_fluid+" #removeDialog .modal-header h4").html('<i class="fa fa-fw fa-trash-o" aria-hidden="true"></i>&nbsp;&nbsp;'+theme_language("filemanager_context_delete_selected"));$($v__fm__container_fluid+" .o__f_m-button-compress").detach().insertAfter("._createFolderDialog_");var I="form-control heighter-28",E="invisible",z="hidden",q="<br><br>"+'<div class="form-inline">'+'<div class="form-group">'+'<span class="awcheckbox awobject awobjectm"><input id="arcmove" name="arcmove" type="checkbox" class="iawobject" value="3"><label class="lawobject font-weight-normal" for="arcmove">'+theme_language("filemanager_archive_move_to")+"&nbsp;&nbsp;&nbsp;</label></span>"+'<span class="awcheckbox awobject awobjectm encrypt"><input id="arcencr" name="arcencr" type="checkbox" class="iawobject" value="4"><label class="lawobject font-weight-normal" for="arcencr">'+theme_language("global_encrypt")+'</label></span><input placeholder="'+theme_language("login_pass")+'" name="arcencr_val" type="password" class="form-control heighter-28" size="15">'+'<br><span onclick="fm_overwrite_files = this.querySelector(\'input\').checked ? true : false" class="awcheckbox awobject awobjectm"><input '+(fm_overwrite_files?"checked ":String())+'id="overwrite_efiles_3" name="overwrite_efiles" type="checkbox" class="iawobject" value="'+fm_overwrite_files+'"><label class="lawobject font-weight-normal" for="overwrite_efiles_3">'+theme_language("filemanager_files_mode_ask_title2")+"&nbsp;&nbsp; </label></span>"+"</div>"+"</div>";$($v__fm__container_fluid+" #compressDialog").find('select[name="method"]').addClass(I).after(q);var A="arkkey",O=$v__fm__container_fluid+' input[name="arcencr_val"]',K="loader-"+A+"",U=theme_spinner_small(""+z+" vertical-align-inherit "+K+""," dark smallest"),R='<select class="'+E+" "+E+'-force" name="'+A+'"></select>',N=$v__fm__container_fluid+' select[name="method"]',L=$v__fm__container_fluid+" ."+K,W=$v__fm__container_fluid+' select[name="'+A+'"]',M="arcencr_pass",J='<input placeholder="'+theme_language("login_passphrase")+'" name="'+M+'" type="password" class="'+E+' form-control heighter-28" size="5">',Q=$v__fm__container_fluid+' input[name="'+M+'"]';$(O).passwordComplexityMeter();$input_arcencr_wrap=$(O).parents(".t-password-complexity-meter-wrapper-cont");$input_arcencr_wrap.addClass(E);$input_arcencr_wrap.before(U+R);$($v__fm__container_fluid+" #arcencr").on("change",function(e){var a=$(W);if(this.checked){if($(N).val()==="tar"){$(L).removeClass(z);$input_arcencr_wrap.addClass(E).addClass(z);a.add(Q).removeClass(""+E+" "+z+"");B()}else{$input_arcencr_wrap.removeClass(E).removeClass(z);a.add(Q).addClass(""+E+" "+z+"")}}else{$input_arcencr_wrap.addClass(E).removeClass(z);a.add(Q).addClass(""+E+" "+z+"")}});var B=function(e){var a="arkkey",t='<select name="'+a+'"></select>',_="loader-"+a+"",n=$($v__fm__container_fluid+' select[name="'+a+'"]'),i=$v__fm__container_fluid+' input[name="'+M+'"]';n.css("width",0).addClass(E);$($v__fm__container_fluid+" ."+_).removeClass(z);$.ajax({type:"POST",url:v___location_prefix+"/index.cgi/?xhr-get_gpg_keys=1&xhr-get_gpg_keys_all="+(event_hold_modifer_pressed()?1:0)+__f___um()+""+"&xhr-get_gpg_keys_cmodule="+v___module_file_manager,data:false,dataType:"json",success:function(a){$($v__fm__container_fluid+" ."+_).addClass(z);var r=a.public,o=a.gpgpath;$new_ark_key_sel=$(t).addClass(I).data("gpgpath",o),are_there_keys=0;$.each(r,function(e,a){$new_ark_key_sel.append('<option value="'+e+'">'+a+"</option>");are_there_keys++});if(are_there_keys){$new_ark_key_sel.prepend('<option class="text-muted" value="" disabled selected>'+theme_language("filemanager_gpg_select_the_key")+"</option>")}else{var s=fm_get_current_home_username();if(!s){s=get_server_data("user")}var l=get_jailed_user();if(l){s=get_jailed_user("user")}$new_ark_key_sel.prepend('<option  class="text-muted" value="" disabled selected>'+theme_language("filemanager_archive_gpg_no_keys")+" ["+s+"]</option>")}var f=n.parents(".modal-body");modal_body_outerWidth=parseInt(f.outerWidth()),$parents_form_inline=f.find(".form-inline"),$cbs=$parents_form_inline.find(".awcheckbox");$move_to_arch_cb=$cbs[0],$encr_cb=$cbs[1],move_to_arch_cb_outerWidth=parseInt($($move_to_arch_cb).outerWidth()),encr_cb_outerWidth=parseInt($($encr_cb).outerWidth());var c=parseInt(modal_body_outerWidth-move_to_arch_cb_outerWidth-encr_cb_outerWidth-48);if(e){c=c/2}$(i).css("width",c);$new_ark_key_sel.css("width",c);var d=n.val();if($new_ark_key_sel.find('option[value="'+d+'"]').length){$new_ark_key_sel.val(n.val())}n.replaceWith($new_ark_key_sel)},error:function(e){session.status(e.responseText)}})};var H='<li class="o__f_m-button-symlink disabled"><a class="no_effect" style="padding-left: 12px;"><i class="fa fa-fw fa-sms fa-file-symlink margined-right--1 margined-left--1" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_symlink")+"</a></li>";$($v__fm__container_fluid+" .btn-group ._createFolderDialog_").parent("ul").prepend(H);$($v__fm__container_fluid+" .btn-group .o__f_m-button-symlink").on("click",function(){__f___new_symlink()});if(config_portable_module_filemanager_hide_toolbar){$($v__fm__container_fluid+" .btn-group.pull-right").addClass("hidden");$($v__fm__container_fluid+" .breadcrumb.pull-left").removeClass("pull-left").addClass("pull-right").css("margin-bottom","-20px");$($v__fm__container_fluid+" .o__f_m-main-spinner").css({"margin-top":"40px","margin-left":"170px"})}var n='.breadcrumb:visible [data-toggle="popover-path"]',V="popover-path-input";$(t).on("inserted.bs.popover",n,function(){$(".popover-path-input").parents(".popover").addClass("popover-path-data")}).on("shown.bs.popover",n,function(){$("."+V+"").val(fm_process_path(fm_get_current_path(),"decode"));$("."+V+"").focus();$("."+V+"").keydown(function(e){var a=e.keyCode?e.keyCode:e.which;if(a===13){e.preventDefault();e.stopPropagation();block_events();$(".breadcrumb").append('<li class="hidden '+V+'-value"><a href="index.cgi?path='+fm_process_path($(this).val())+'"></a></li>');$(".popover-path-button").find("i").addClass("invisible").parent().find(".cspinner").removeClass("hidden");$("."+V+"-value").find("a").trigger("click").remove();$('[data-toggle="popover-path"]').popover("hide");__f__ld__sh()}});$(".popover-path-data").css({opacity:1})});var n=$v__fm__container_fluid+' [data-toggle="popover-path"]';$(t).on("hide.bs.popover",n,function(){$($v__fm__container_fluid+" .popover-path-data").css("opacity",0)}).on("click.fm",".popover-path-button",function(){var e=jQuery.Event("keydown");e.which=13;$(" ."+V+"").trigger(e)}).on("contextmenu.fm",$v__fm__container_fluid+" .breadcrumb",function(e){e.preventDefault();if($(".__o__f_m-search-results-data:visible").length){return}$($v__fm__container_fluid+' [data-toggle="popover-path"]').popover("show")});$($v__fm__container_fluid+" #nothingSelected").remove();$($v__fm__container_fluid+" .active ul.pagination li:first-child").trigger("click")}page.render.content.filter.init();$($v__fm__container_fluid+' .modal-content input:not([type="radio"], '+$v__fm__container_fluid+' [type="checkbox"], '+$v__fm__container_fluid+' [type="hidden"])').addClass("heighter-28");setTimeout(function(){page.render.content.filter.clear()},10);$(t).on("click.fm",$v__fm__container_fluid+" .active .ui_checked_columns",function(e){var a=e.keyCode?e.keyCode:e.which;if(check_selected_text()){return}if(a!==1){return}var t="td.ui_checked_checkbox",_="input:checkbox";if(!vars.events.keypressed.shift&&$(e.target).is(t)&&$(e.target).find(_).length){return}var n=$(e.target).parents("tr");if($(e.target).is(":checkbox")||$(e.target).is(".lawobject")){return}var i=fm_get_current_path();goup=n.hasClass("directory_go_up"),link=n.find('td a[href*="index.cgi?path="]').first().attr("href"),link_escaped=n.find("td a[data-filemin-link]").attr("data-filemin-link"),download=n.find('td a[href*="download.cgi?"]').attr("href"),td_tag=$(e.target).is("td");if(goup){__f___b_dr(e)}if(download&&!td_tag){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();$(e.target).parents("tr").find('td.ui_checked_checkbox input[type="checkbox"]').trigger("click");return}e.preventDefault();if(!fm_is_search_results()&&link||fm_is_search_results()&&n.find('td.col-name:visible[data-xfile="0"]').first().length){__f___o_dr($(this),i,link,e.originalEvent!==undefined);return}if(td_tag){e.stopPropagation();e.stopImmediatePropagation();$(e.target).parents("tr").find('td.ui_checked_checkbox input[type="checkbox"]').trigger("click");return}});$(t).on("keydown.fm",function(e){var a=e.keyCode?e.keyCode:e.which;if($("aside input").is(":focus")||plugins.shell.status()||$("input.popover-path-input").is(":focus")||$(".ui-fancytree").is(":focus")||$($v__fm__container_fluid+" input.dataTable-mirror").is(":focus")&&a!=13&&a!=40||$($v__fm__container_fluid+' textarea[name="bookmarks"]').is(":focus")||$(".bootbox.modal").length||$(".user_motd_data.in").length||document.querySelector(".pswp")){return}var _=$($v__fm__container_fluid_modal_in).length||$(".fm_fileinfo_data.modal.in").length,n=$($v__fm__container_fluid+" .popover").is(":visible"),r=$($v__fm__container_fluid+" input.popover-path-input").is(":focus"),o=$(":focus").parents(".jsPanel").is(".jsPanel"),l=!$("input").is(":focus")&&!$("select").is(":focus")&&!$("textarea").is(":focus"),f=$("#__f__c__m"),c="table tbody tr",d="m-active",m="m-not-active",u="directory_go_up",p="td:first-child input";var g='input[name="passphrase"]';if(a===13){if($(e.target).is(g)){e.preventDefault();$(g).parents("#encryptDecrypt").find(".o__f_m-submitter-decrypt_encrypt").trigger("click");return}}event_hold_modifer_pressed()&&context_menu_toggle_delete_trash();if(f.is(":visible")&&a==27){f.css("display","none");return}else if(f.is(":visible")){return}var h=!$(".select2-dropdown:visible").length&&!$(":focus").is(".jsPanel")&&!o&&!_?1:0,v=$(".cke_dialog_background_cover:visible").length||$(".tree-view-filter input").is(":focus");if(String.fromCharCode(a).toLowerCase()=="r"&&e.ctrlKey&&(!e.shiftKey&&!e.altKey&&!e.metaKey)){e.preventDefault();if(!h||v){return}__f__refresh__dir_and_tree();return}if(r||n||v||!h){if(a!=13&&(!e.ctrlKey&&!e.shiftKey)||v){return}}if(h){if(a==32&&e.ctrlKey){e.preventDefault();e.stopPropagation();if(!e.shiftKey){$("#file-manager-new-instance:not(.disabled_no_styling)").trigger("click")}else{$($v__fm__container_fluid+" .nav.nav-tabs").find("li.active").find("a").find("i").trigger("click")}}if((a==37||a==39)&&e.ctrlKey){e.preventDefault();e.stopPropagation();if(a==37){$($v__fm__container_fluid+" .nav.nav-tabs").find("li.active").prev("li").find("a").trigger("click")}else{$($v__fm__container_fluid+" .nav.nav-tabs").find("li.active").next("li").find("a").trigger("click")}return}if((a==49||a==50||a==51||a==52||a==53||a==54||a==55||a==56||a==57)&&e.ctrlKey){var b=a-48;e.preventDefault();e.stopPropagation();$.each($($v__fm__container_fluid+" .nav.nav-tabs").find("li"),function(e,a){if(e+1==b){$(this).find("a").trigger("click");return}});return}}if((a==120||a==121)&&!e.ctrlKey&&!e.shiftKey&&h){if(a==120){$($v__fm__container_fluid+' a[onclick="downFromUrlDialog()"]').trigger("click");return}if(a==121){$($v__fm__container_fluid+' a[onclick="viewReadyForUpload()"]').trigger("click");return}}if(String.fromCharCode(a).toLowerCase()=="k"&&e.shiftKey&&e.altKey&&!e.metaKey&&!e.ctrlKey&&h){e.preventDefault();e.stopPropagation();$($v__fm__container_fluid+" ."+s).trigger("click");return}if(!r&&String.fromCharCode(a).toLowerCase()=="l"&&!e.shiftKey&&!e.altKey&&!e.metaKey&&e.ctrlKey&&h){e.preventDefault();e.stopPropagation();var w=$($v__fm__container_fluid+" #headln2r");if(Test.scrolledIntoView(w)){$('[data-toggle="popover-path"]').popover("show")}else{w.scrollIntoView({duration:200,direction:"vertical",complete:function(){$($v__fm__container_fluid+' [data-toggle="popover-path"]').popover("show")}})}return}$v__fm__global_last_row_active=$($v__fm__container_fluid_form+" "+c+"."+d+"");if(a==93&&h){e.preventDefault();e.stopPropagation();if(!$($v__fm__container_fluid_form+" "+c+"."+d+"").length){$($v__fm__container_fluid_form+" "+c+":first-child:not(."+u+")").addClass(d)}$($v__fm__container_fluid_form+" "+c+"."+d+"").find(p).trigger("contextmenu");return}if(o){return}if(a===13&&!e.altKey&&$($v__fm__container_fluid_form+" "+c+"."+d+"").length===1&&!_){if($($v__fm__container_fluid_form+" "+c+"."+d+"").hasClass(u)){__f___b_dr(e)}else{var x=$($v__fm__container_fluid+" .active form "+c+"."+d+' td a[href*="index.cgi?path="]').first(),y=fm_get_current_path();L=x.last().attr("data-filemin-link");__f___o_dr(x,y,x.attr("href"),e.originalEvent!==undefined)}return}if(!_&&e.ctrlKey&&(String.fromCharCode(a).toLowerCase()=="c"||String.fromCharCode(a).toLowerCase()=="v"||String.fromCharCode(a).toLowerCase()=="x")){if($($v__fm__container_fluid_form+" "+c+" td:first-child").find("input:checked").length===0&&$($v__fm__container_fluid_form+" "+c+"."+d+"").length===1&&e.ctrlKey&&(String.fromCharCode(a).toLowerCase()=="c"||String.fromCharCode(a).toLowerCase()=="v"||String.fromCharCode(a).toLowerCase()=="x")){$($v__fm__container_fluid_form+" "+c+"."+d+"").find(p).trigger("click")}}if(a===13&&!e.altKey){if(_){e.preventDefault();e.stopPropagation();var k=".modal-footer button.",C="click",T="_at_filemanager_",D="o__f_m-submitter-";if($($v__fm__container_fluid_modal_in+" "+k+""+T+"delete_submit").length){$($v__fm__container_fluid_modal_in+" "+k+""+T+"delete_submit").trigger(C)}else{if($($v__fm__container_fluid_modal_in+" "+k+""+D+"chmod").length){$($v__fm__container_fluid_modal_in+" "+k+""+D+"chmod").trigger(C)}else{if($($v__fm__container_fluid_modal_in+" "+k+""+T+"create_folder_submit").length){$($v__fm__container_fluid_modal_in+" "+k+""+T+"create_folder_submit").trigger(C)}else{if($($v__fm__container_fluid_modal_in+" "+k+""+T+"create_file_submit").length){$($v__fm__container_fluid_modal_in+" "+k+""+T+"create_file_submit").trigger(C)}else{if($($v__fm__container_fluid_modal_in+" "+k+""+D+"compress").length){$($v__fm__container_fluid_modal_in+" "+k+""+D+"compress").trigger(C)}else{if($($v__fm__container_fluid_modal_in+" "+k+""+T+"rename_submit").length){$($v__fm__container_fluid_modal_in+" "+k+""+T+"rename_submit").trigger(C)}else{if($($v__fm__container_fluid_modal_in+" "+k+""+T+"search_submit").length){$($v__fm__container_fluid_modal_in+" "+k+""+T+"search_submit").trigger(C)}}}}}}}}}if(a===13&&!e.altKey&&$($v__fm__container_fluid_form+" "+c+":not(."+u+")").length===1&&!v&&h){var x=$($v__fm__container_fluid+" .active form "+c+' td a[href*="index.cgi?path="]').first(),y=fm_get_current_path();L=x.last().attr("data-filemin-link");__f___o_dr(x,y,x.attr("href"));return}if(a===13&&!e.altKey){return}if(a==32&&!e.shiftKey&&!$($v__fm__container_fluid_form+" "+c+"."+d+"").length){return}if(a==116&&!e.altKey&&!e.shiftKey&&!e.ctrlKey&&!e.metaKey){e.preventDefault();e.stopPropagation();__f__refresh__dir_and_tree();return}if((a==46||a==113||a==114||a==115||a==116||a==117||a==119)&&!__f__cnt___selected()&&!$($v__fm__container_fluid+" .ui_checked_columns input:checked").length&&!_&&!n&&!$($v__fm__container_fluid+" input").is(":focus")&&!$($v__fm__container_fluid_form+" "+c+"."+d+"").length&&(!e.shiftKey||a==116&&e.shiftKey||a==115&&!e.shiftKey)){e.preventDefault();e.stopPropagation();if(quirks.active_element()&&$(quirks.active_element()).is('a[href^="edit_file.cgi"]')){return}plugins.messenger.post('<i class="fa fa-lg fa-fw fa-exclamation-circle"></i>'+theme_language("filemanager_nothing_is_selected"),.75,"warning","noSelection_warning",1,["bottom","right"]);return}var S=$($v__fm__container_fluid_form+" "+c+"."+d+""),j=S.index(),F=parseInt($($v__fm__container_fluid_form+" "+c+"").length)-1,P=$v__fm__container_fluid_form+" "+c;if(!e.ctrlKey&&!e.altKey&&!e.metaKey&&!f.is(":visible")){if(e.shiftKey&&(a===38||a===40)){S.find(p).trigger("click")}if(e.shiftKey&&a===16){}else{S.removeClass(""+d+" "+d+"-n "+d+"-o")}if(typeof ___contextmenu__triggered___!="undefined"){return}var I=$($v__fm__container_fluid+" .dataTable-mirror");if(!l&&(a===38||a===40)){if(I.is(":focus")){S.removeClass(""+d+" "+d+"-n "+d+"-o");I.blur()}}if(!_&&l){if(a===38){j--}if(a===40){j++}if(a===33){e.preventDefault();e.stopPropagation();j-=5}if(a===34){e.preventDefault();e.stopPropagation();j+=5}if(a==36){e.preventDefault();e.stopPropagation();j=0}if(a==35){e.preventDefault();e.stopPropagation();j=F}if(j<0){j=0}else if(j>F){j=F}if(a===38||a===40){$(P).addClass(m)}S=!$(P).find(".dataTables_empty").length&&$(P).eq(j).addClass(""+d+" "+m+"")}}var E=$(P+"."+d+"");$v__fm__global_last_row=E;if(a==27){e.preventDefault();e.stopPropagation();$($v__fm__container_fluid_modal_in+' button[data-dismiss="modal"]').trigger("click");return}if(a===13&&!e.altKey){if(!_){e.preventDefault();e.stopPropagation();$($v__fm__container_fluid+" .dataTables_filter label input").blur();$($v__fm__container_fluid_form+" "+c+"."+d+"").find("td:first-child").trigger("click");return}}if(a==8&&h&&!$($v__fm__container_fluid+" .o__f_m-main-spinner").is(":visible")&&!$($v__fm__container_fluid+" input").is(":focus")&&!$($v__fm__container_fluid+" textarea").is(":focus")){if(!_){e.preventDefault();e.stopPropagation();__f___b_dr(e);return}}if(String.fromCharCode(a).toLowerCase()=="m"&&e.ctrlKey){if(!_){e.preventDefault();e.stopPropagation();$("#file-manager-switch-user").trigger("click");return}}if(a==32&&!e.ctrlKey){if(!_){e.preventDefault();e.stopPropagation();var z=$($v__fm__container_fluid_form+" table tbody:visible tr."+d+""),q=jQuery.Event("keydown");q.which=40;var A=z.find(p),O=A.is(":checked");if(A[0]){A[0].checked=!O;A.trigger("change")}$(t).trigger(q);if(config_portable_module_filemanager_calculate_size){setTimeout(__f__get_fs,100)}return}}if(h&&a==106||e.shiftKey&&a==56){if(!_){e.preventDefault();e.stopPropagation();$(""+$v__fm__container_fluid+' button[onclick="invertSelection()"]').trigger("click");return}}if(a==107||e.shiftKey&&a==187||String.fromCharCode(a).toLowerCase()=="a"&&h&&e.ctrlKey&&(!e.shiftKey&&!e.altKey&&!e.metaKey)){if(!_){e.preventDefault();e.stopPropagation();if(select_all_entries("test_unconf")){$('[data-select-all-entries="affirmative"] [data-yes="1"]')[0].click()}$(""+$v__fm__container_fluid+' button[onclick="selectAll()"]').trigger("click");return}}if(a==109||e.shiftKey&&a==189||String.fromCharCode(a).toLowerCase()=="a"&&h&&e.ctrlKey&&e.shiftKey&&(!e.altKey&&!e.metaKey)){if(!_){e.preventDefault();e.stopPropagation();var K=document.querySelectorAll(".container-fluid .ui_checked_columns");for(i=0;i<K.length;i++){var U=K[i].getElementsByTagName("input")[0];if(U.checked){rowClick(K[i])}}__f___lb();__r____changed();return}}if((a==46||a==119)&&!$($v__fm__container_fluid+" input").is(":focus")){if(!_){e.preventDefault();e.stopPropagation();if($($v__fm__container_fluid+" .o__f_m-button-delete.disabled").length){$($v__fm__container_fluid_form+" "+c+"."+d+"").find(p).trigger("click")}$(""+$v__fm__container_fluid+" .o__f_m-button-delete").trigger("click");__f___cs();return}}if(a==113&&!e.shiftKey){if(!_){e.preventDefault();e.stopPropagation();if($($v__fm__container_fluid+" .o__f_m-button-chmod.disabled").length){$($v__fm__container_fluid_form+" "+c+"."+d+"").find(p).trigger("click")}$(""+$v__fm__container_fluid+" .o__f_m-button-chmod a").trigger("click");__f___cs();return}}if(a==113&&e.shiftKey){if(!_){e.preventDefault();e.stopPropagation();if($($v__fm__container_fluid+" .o__f_m-button-chown.disabled").length){$($v__fm__container_fluid_form+" "+c+"."+d+"").find(p).trigger("click")}$(""+$v__fm__container_fluid+" .o__f_m-button-chown a").trigger("click");__f___cs()}}else if(a===114&&e.shiftKey){if(!_){e.preventDefault();e.stopPropagation();if($($v__fm__container_fluid+" .o__f_m-button-chattr.disabled").length){$($v__fm__container_fluid_form+" "+c+"."+d+"").find(p).trigger("click")}$(""+$v__fm__container_fluid+" .o__f_m-button-chattr a").trigger("click");__f___cs();return}}else if(a===13&&e.altKey||(e.metaKey||e.ctrlKey)&&a===73){if(!_){e.preventDefault();e.stopPropagation();var R=$($v__fm__container_fluid_form+" "+c+"."+d+""),N=$v__fm__global_last_row.find("td a").first(),L=fm_process_escaped_link(N.attr("data-filemin-link"),1);if(L){fm_get_file_info(fm_get_current_path(),L,R)}return}}if(a==116&&e.altKey){if(!_){e.preventDefault();e.stopPropagation();if($($v__fm__container_fluid+" .o__f_m-button-compress.disabled").length){$($v__fm__container_fluid_form+" "+c+"."+d+"").find(p).trigger("click")}$(""+$v__fm__container_fluid+" .o__f_m-button-compress a").trigger("click");__f___cs();return}}if(a==117&&e.altKey){if(!_){e.preventDefault();e.stopPropagation();if($($v__fm__container_fluid+" .o__f_m-button-compress.disabled").length){$($v__fm__container_fluid_form+" "+c+"."+d+"").find(p).trigger("click")}$($v__fm__container_fluid+" #extractEncrypted.modal").modal("show");return}}if(a==118&&!e.shiftKey&&!e.ctrlKey){if(!_){e.preventDefault();e.stopPropagation();$($v__fm__container_fluid+' a[onclick = "createFolderDialog()"]').trigger("click");__f___cs();return}}if(a==117){if(!_){if($($v__fm__container_fluid_form+" "+c+"."+d+"").find("i.fa-i-cursor").parent("a").length){e.preventDefault();e.stopPropagation();$($v__fm__container_fluid_form+" "+c+"."+d+"").find("i.fa-i-cursor").parent("a").trigger("click");__f___cs();return}}}if(a==114&&!e.shiftKey){if(!_){e.preventDefault();e.stopPropagation();var R=$($v__fm__container_fluid_form+" "+c+"."+d+""),W=R.find('td[data-xfile="1"]').length,M=!R.find('a[href*="edit_file.cgi"]').length,N=$v__fm__global_last_row.find("td a").first(),L=fm_process_escaped_link(N.attr("data-filemin-link"),1);if(W&&L){fm_target_spinner_add(R);edit_file(L,decodeURIComponent(fm_get_current_path()),false,1,M,0,1)}return}}if(a==115&&!e.shiftKey){if(!_){if($($v__fm__container_fluid_form+" "+c+"."+d+"").find("i.fa-pencil-square-o").parent("a").length){e.preventDefault();edit_file();var J=$($v__fm__container_fluid_form+" "+c+"."+d+"");fm_target_spinner_add(J)}return}}if(l&&!_&&a!=32&&a!=113&&a!=114&&a!=106&&a!=107&&a!=116&&a!=109&&a!=46&&a!=119&&a!=118&&a!=115){if($($v__fm__container_fluid+" .tab-pane.active .paginate_button.next").parents("ul.pagination").hasClass("pointer-events-none")){return}if(a===39){$($v__fm__container_fluid+" .tab-pane.active .paginate_button.next").trigger("click");$($v__fm__container_fluid_form+" "+c+"."+d+"").removeClass(d);$($v__fm__container_fluid_form+" "+c+"").addClass(m);return}else{if(a===37){$($v__fm__container_fluid+" .tab-pane.active .paginate_button.previous").trigger("click");$($v__fm__container_fluid_form+" "+c+"."+d+"").removeClass(d);$($v__fm__container_fluid_form+" "+c+"").addClass(m)}else{var Q=String.fromCharCode(a);if(Q&&/[a-zA-Z0-9]/.test(Q)&&!e.ctrlKey&&!e.altKey&&!e.metaKey){$($v__fm__container_fluid+" .dataTables_filter label input").trigger("keyup").focus()}}}}if(a===83&&e.ctrlKey){e.preventDefault();e.stopPropagation();var B=$($v__fm__container_fluid_form+" "+c+"."+d+"").find(p);!B.is(":checked")&&B.trigger("click");__f__cnt___selected()&&__f__get_fs();return}if(e.shiftKey&&e.ctrlKey){return}if(h&&!_&&!n&&!r&&!$($v__fm__container_fluid+" .btn-filter-top-right input").is(":focus")&&(a==115||a==116||a==118||String.fromCharCode(a).toLowerCase()=="c"||String.fromCharCode(a).toLowerCase()=="v"||String.fromCharCode(a).toLowerCase()=="x")){if(!(String.fromCharCode(e.which).toLowerCase()=="c"&&e.ctrlKey)&&!(String.fromCharCode(e.which).toLowerCase()=="v"&&e.ctrlKey)&&!(String.fromCharCode(e.which).toLowerCase()=="x"&&e.ctrlKey)&&!(a==115&&e.shiftKey)&&!(a==116&&e.shiftKey)&&!(a==118&&e.shiftKey)&&!(e.which==19)){return true}if(String.fromCharCode(a).toLowerCase()=="c"&&check_selected_text()){return}e.preventDefault();if(a==115){if(!_){e.stopPropagation();$($v__fm__container_fluid+' a[onclick = "createFileDialog()"]').trigger("click");__f___cs();return}}if(a==118){if(!_){e.stopPropagation();$($v__fm__container_fluid+' a[onclick = "searchDialog()"]').trigger("click");__f___cs();return}}if(String.fromCharCode(a).toLowerCase()=="c"){if(!_&&!$(".popover").is(":visible")&&!r){if(e.altKey){$("#__f__c__m a[data-context-clipboard]").trigger("click");return}else{e.stopPropagation();if(!$($v__fm__container_fluid+" .o__f_m-button-copy.disabled").length){$(""+$v__fm__container_fluid+" .o__f_m-button-copy a").trigger("click");__f___cs()}else{plugins.messenger.post('<i class="fa fa-lg fa-fw fa-exclamation-triangle"></i>'+theme_language("filemanager_no_selection_to_copy"),.75,"warning","nothingSelected",1,["bottom","right"])}return}}}if(String.fromCharCode(a).toLowerCase()=="v"){if(!_&&!n&&!r){e.stopPropagation();if(!$($v__fm__container_fluid+" .o__f_m-button-paste.disabled").length){$(""+$v__fm__container_fluid+" .o__f_m-button-paste a").trigger("click");__f___cs()}else{plugins.messenger.post('<i class="fa fa-lg fa-fw fa-clipboard"></i>'+theme_language("filemanager_empty_clipboard"),.75,"warning","emptyClipboard",1,["bottom","right"])}return}}if(String.fromCharCode(a).toLowerCase()=="x"){if(!_&&!n&&!r){e.stopPropagation();if(!$($v__fm__container_fluid+" .o__f_m-button-cut.disabled").length){$(""+$v__fm__container_fluid+" .o__f_m-button-cut a").trigger("click");__f___cs()}else{plugins.messenger.post('<i class="fa fa-lg fa-fw fa-exclamation-triangle"></i>'+theme_language("filemanager_no_selection_to_cut"),.75,"warning","nothingSelected",1,["bottom","right"])}return}}return}}).on("keyup.fm",function(){context_menu_toggle_delete_trash("def")}).on("click.fm",$v__fm__container_fluid+" a.action-link > .fa",function(e){e.preventDefault();if($(this).hasClass("fa-extract-archive")){var a=$(this).parents("tr").find("td.ui_checked_checkbox input");!a.is(":checked")&&a.trigger("click")}else if($(this).hasClass("fa-i-cursor")){e.stopPropagation()}}).on("click.fm",$v__fm__container_fluid+" #file-manager-switch-user:not(.disabled_no_styling)",function(e){var a=$(this);a.addClass("disabled_no_styling");$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/fetcher.cgi?module="+v___module+"&list_users=1",data:false,dataType:"JSON",success:function(e){var _=fm_get_current_home_username(),n='<option value="" class="text-success"'+(!_||_==""?" selected":"")+"><em>"+v___server_username+"</em></option>";$.each(e,function(e,a){n+='<option value="'+e+'"'+(_==e?" selected":"")+">"+e+'<span class="text-danger"> ['+a.split(":")[0]+"]</span></option>"});var i=$(t),r='            <div class="modal fade9 modal-list-users" tabindex="-1" role="dialog">              <div class="modal-dialog modal-md">                <div class="modal-content">                  <div class="modal-header background-warning background--bordered">                    <button type="button" class="close" data-dismiss="modal" aria-label="'+theme_language("global_close")+'"><span aria-hidden="true">&times;</span></button>                    <h4 class="modal-title"><i class="fa fa-fw fa-user-switch">&nbsp;&nbsp;</i> '+theme_language("filemanager_user_switch").replace(/\(.*?\)/g,"").replace(/\s+$/,"")+'</h4>                  </div>                  <div class="modal-body">                    <p>'+theme_language("filemanager_user_switch_description")+'</p>                <label class="select-styled fstreched"><select data-no-appearance>                  '+n+"                </select></label>                <hr>                <p>"+theme_language("filemanager_user_switch_description_back")+"</p>                  </div>                </div>              </div>            </div>        ";i.append(r);var o="body",s=".modal-list-users",l="#file-manager-switch-user";$(o+" "+s).on("show.bs.modal",function(){$(o+" "+s).find("select").on("change.fm",function(){var e=$(this).val();localStorage.setItem(v___server_hostname+"-"+"settings_thirdparty_filemanager_usermode",e);config_portable_module_filemanager_switch_users===false&&__f___us_tl();$(o+" "+s).modal("hide")})});$(o+" "+s).on("shown.bs.modal",function(){setTimeout(function(){$(o+" "+s).focus();var e=$(o+" "+s).find("select");e.trigger("focus")},360)});$(o+" "+s).on("hidden.bs.modal",function(){$(this).remove();a.removeClass("disabled_no_styling")});$(o+" "+s).modal("show")},error:function(e){session.status(e.responseText)}})}).on("click.fm",$v__fm__container_fluid+" [data-tree-toggle]",function(e){$(".row + .tree-view, .data-content-container > [data-tree-view], .data-content-container > [data-tree-view] + .tree-view-filter").toggleClass("hidden");config_portable_module_filemanager_hide_tree_view=!config_portable_module_filemanager_hide_tree_view;theme.config.save();_f__table()&&_f__table().DataTable().draw(false);if(!config_portable_module_filemanager_hide_tree_view){$____loader_block__manual=1;tree_view_get();$____loader_block__manual=0}tree_resize()}).on("click.fm",$v__fm__container_fluid+" #file-manager-new-instance:not(.disabled_no_styling)",function(e){e.preventDefault();__f___nt(fm_get_current_path(),true,false,e.originalEvent!==undefined)}).on("click.fm",$v__fm__container_fluid+" .nav.nav-tabs li.ui-sortable-handle.disabled",function(e){e.preventDefault;e.stopPropagation;return false}).on("mouseenter.fm mousemove.fm",$v__fm__container_fluid+" .nav.nav-tabs li",function(){$(this).find("a > i").removeClass("invisible")}).on("mouseleave.fm",$v__fm__container_fluid+" .nav.nav-tabs li",function(){$(this).find("a > i").addClass("invisible")}).on("mousemove.fm",'[data-context-extract="1"], [data-context-preview-image="1"], [data-context-copy="1"], [data-context-select-all="1"], [data-context-view="1"], [data-context-edit="1"], [data-context-properties="1"]',function(e){var a=$(this).parent(),t=$("#__f__c__m").offset().left,_=a.width(),n=parseInt(e.pageX-t-_);if(n>-24){a.removeClass("locked");this.allowed=!a.hasClass("right")}else if(typeof this.allowed==="undefined"||this.allowed){a.addClass("locked")}}).on("mouseleave.fm",'[data-context-copy="1"], [data-context-select-all="1"]',function(){this.allowed="undefined"}).on("contextmenu.fm",$v__fm__container_fluid+" .directory_go_up:visible",function(){$(this).addClass("m-active").trigger("contextmenu")}).on("click.fm",$v__fm__container_fluid+" .nav.nav-tabs li:not(.disabled) i",function(e){e.preventDefault;if($($v__fm__container_fluid+" .nav.nav-tabs li:not(.ui-sortable-placeholder)").length<=1){return}var a=$(this),t=a.parent("a").parent("li"),_=parseInt(a.parent("a").attr("href").replace(/^\D+/g,""));if(!t.hasClass("active")){$($v__fm__container_fluid+' a[href="#tab-'+_+'"]').parent("li").remove();$($v__fm__container_fluid+' .tab-content .tab-pane[id="tab-'+_+'"]').remove();__f___up__tb_vis();__f___up__tb_store();setTimeout(function(){if(typeof sortable=="function"){sortable($($v__fm__container_fluid+" .tabs-top > ul.nav"))}},100)}else{tab___to______delete=_;if(a.parent("a").parent("li").prev("li:not(.active)").length){a.parent("a").parent("li").prev("li:not(.active)").find("a").trigger("click")}else if(a.parent("a").parent("li").next("li:not(.active)").length){a.parent("a").parent("li").next("li:not(.active)").find("a").trigger("click")}}return false});var n=$v__fm__container_fluid+' a[data-toggle="tab"]';$(t).on("hide.bs.tab",n,function(e){var a=$(e.target).attr("href").replace(/^\D+/g,"");if($($v__fm__container_fluid+" .__o__f_m-search-results").length){$($v__fm__container_fluid+' .tab-content .tab-pane[id="tab-'+a+'"]').data("searchQuery",$($v__fm__container_fluid+" .__o__f_m-search-results")).data("searchQueryTotal",$($v__fm__container_fluid+" .total").html())}}).on("show.bs.tab",n,function(e){$($v__fm__container_fluid+" .nav.nav-tabs li").addClass("disabled")}).on("shown.bs.tab",n,function(e){select_all_entries("remove");setTimeout(function(){$($v__fm__container_fluid+" .nav.nav-tabs li").removeClass("disabled")},400);var a=$(e.target).attr("href"),t=a.replace(/^\D+/g,""),_=$(e.relatedTarget).attr("href"),n=_.replace(/^\D+/g,""),i="_AuthenticThemeTmp"+n;store_last_tab($(e.target));$(_).find("form").attr({id:"list_form"+i,name:"list_form"+i});$(_).find(".ui_checked_columns").removeClass("ui_checked_columns").addClass("_ui_checked_columns_tmp");$.each($(_).find("form *[id]"),function(){var e=$(this).attr("id"),a=$(this).attr("name"),t=e+i,_=a?a+i:false;if(e.indexOf("DataTable")===-1){$(this).attr({id:t});if(a){$(this).attr({name:_})}}}).promise().done(function(){var _="_AuthenticThemeTmp"+t;$(a).find("._ui_checked_columns_tmp").addClass("ui_checked_columns").removeClass("_ui_checked_columns_tmp");$(a).find("form").attr({id:"list_form",name:"list_form"});$.each($(a).find("form *[id]"),function(){var e=$(this).attr("id"),a=$(this).attr("name"),t=e.replace(_,""),n=a?a.replace(_,""):false;if(e.indexOf(_)>-1){$(this).attr({id:t});if(a){$(this).attr({name:n})}}}).promise().done(function(){var _=$('.tab-content .tab-pane[id="tab-'+t+'"] .table:visible'),n=$(a).find("form input#path").val(),i=$('.tab-content .tab-pane[id="tab-'+t+'"]').data("searchQuery");f__insert_dir_up();__f__c__m();if($(e.target).attr("newly-created")=="1"){$(e.target).removeAttr("newly-created")}else{var r=$('.tab-content .tab-pane[id="tab-'+t+'"]').data("searchQueryTotal"),o=[];if(i){o.push(i);o.push(r);$('.tab-content .tab-pane[id="tab-'+t+'"]').removeData("searchQuery").removeData("searchQueryTotal")}__f___up__d("index.cgi?path="+fm_process_path(n),false,o)}if(!i){var s=$(".tab-pane.active").data("totalValue");!i&&$($v__fm__container_fluid+" .total").html(s)}var l=_f__table();if(typeof tab___is______new!="undefined"){l.DataTable().draw();delete tab___is______new}else{__init__dt_ck__e()}if(typeof tab___to______delete!="undefined"){var f=tab___to______delete;delete tab___to______delete;$('a[href="#tab-'+f+'"]').parent("li").remove();$('.tab-content .tab-pane[id="tab-'+f+'"]').remove()}__f___us_a();tree_view_draw(_);tree_gset_node();if(format_search_breadcrum(1)){format_search_breadcrum()}tree_resize(0,1);fm_check_goback();vars.h.selector.content.get()[0].scrollTop=0})})});$($v__fm__container_fluid+" #searchForm label:first-child").text(theme_language("filemanager_search_file_mask"));$($v__fm__container_fluid+" #searchForm .form-group").after('        <div class="form-group">            <label>'+theme_language("filemanager_exclude_dirs")+'</label>            <input id="exclude" name="exclude" type="text" class="form-control heighter-28" placeholder="'+theme_language("filemanager_exclude_dirs_desc")+'">        </div>        <div class="form-inline fm-search-match-replace">            <div class="form-group">                <label>'+theme_language("filemanager_search_match")+'</label>                <br>                <input id="grepstring" name="grepstring" type="text" class="form-control heighter-28">            </div>            <div class="form-group">                <label>'+theme_language("filemanager_search_replace")+'</label>                <br>                <input id="grepreplace" name="grepreplace" type="text" class="form-control heighter-28">            </div>        </div>    ');var X=$("#searchForm").find("span.awcheckbox"),G=$("#searchForm").find('input[name="query"]'),Y=G.parent(".form-group");X.prev("br").remove();X.detach().appendTo($("#searchForm .form-inline"));if(!G.val()){G.val("*")}Y.before('<div class="form-inline fm-search-path">            <div class="form-group w-100p">                <label>'+theme_language("filemanager_search_info_search_dir")+'</label>                <br>                <input type="text" class="form-control heighter-28" value="'+Convert.quoteEscape(Convert.uriDecodeComponent(fm_get_current_path()))+'">            </div>        </div>');Y.addClass("w-67p").wrapAll('<div class="form-inline fm-query-container"></div>').parent().append('<div class="form-group w-33p">                <label>'+theme_language("filemanager_search_limit_type")+'</label>                <br>                <select name="limit_type" class="form-control heighter-28"><option selected></option><option value="1">'+theme_language("global_file")+'</option><option value="2">'+theme_language("global_directory")+'</option><option value="3">'+theme_language("global_symbolic")+"</option></select>            </div>");$($v__fm__container_fluid+" #searchForm .form-inline").last().prev().before('<div class="form-inline fm-search-extra">            <div class="form-group w-33p">                <label>'+theme_language("filemanager_search_limit_size")+'</label>                <br>                <input id="limit_size" name="limit_size" type="text" class="form-control heighter-28" placeholder="'+theme_language("filemanager_search_limit_size_desc")+'">            </div>            <div class="form-group w-33p">                <label>'+theme_language("filemanager_search_limit_user")+'</label>                <br>                <input id="limit_user" name="limit_user" type="text" class="form-control heighter-28">            </div>            <div class="form-group w-33p">                <label>'+theme_language("filemanager_search_limit_group")+'</label>                <br>                <input id="limit_group" name="limit_group" type="text" class="form-control heighter-28">            </div>        </div>');$($v__fm__container_fluid+" #searchForm .awcheckbox").after('<span class="awcheckbox awobject awobjectm"><input id="regex" name="regex" type="checkbox" class="iawobject"><label class="lawobject" for="regex">'+theme_language("filemanager_search_regex")+"&nbsp;&nbsp; </label></span>"+'<span class="awcheckbox awobject awobjectm"><input id="follow_symlinks" name="follow" type="checkbox" class="iawobject"><label class="lawobject" for="follow_symlinks">'+theme_language("filemanager_search_follow_symlinks")+"&nbsp;&nbsp; </label></span>");plugins.navigation.detect("/filemin/index.cgi?path=/",1);setTimeout(function(){__f__refresh__dir_and_tree();$____loader_block__=0},$.support.spa?0:100);if(v___location_file!=="config.cgi"){f__chk_loading()}$($v__fm__container_fluid).on("click.fm",".spaginates .paginate_button.previous:not(.disabled)",function(e){$(this).parent().find(".active").prev(".paginate_button").find("a").trigger("click")});$($v__fm__container_fluid).on("click.fm",".spaginates .paginate_button.next:not(.disabled)",function(e){$(this).parent().find(".active").next(".paginate_button").find("a").trigger("click")});$($v__fm__container_fluid).on("click.fm",".spaginates .spaginated",function(e){e.preventDefault();e.stopPropagation();get_link(this.href);$(this).parents(".spaginates").after(theme_spinner_small(false,"semi-dark","width:12px; height:12px; margin-right: 3px; margin-left: 3px;"))});$($v__fm__container_fluid).on("change.fm",".active .dataTables_length select",function(e){e.preventDefault();e.stopPropagation();if(e.originalEvent!==undefined){$($v__fm__container_fluid).find(".active .spaginates .spaginated").first().trigger("click");setTimeout(table_resize)}});$($v__fm__container_fluid).find(".modal.fade").removeClass("fade").addClass("fade6").attr("tabindex",-1);$($v__fm__container_fluid+" .modal").on("shown.bs.modal",function(){var e=$(this).find('input[type="text"]:visible, input[type="url"]:visible, input[type="number"]:visible, input[type="file"]:visible').first()[0];setTimeout(function(){if(e){e.focus();$(e).select()}$('input[type="hidden"][class*="_o__f_m-tmp-"]').remove()},0)});$($v__fm__container_fluid+" #compressDialog.modal").after('<div id="extractEncrypted" class="modal fade6" tabindex="-1">'+'<div class="modal-dialog">'+'<div class="modal-content">'+'<div class="modal-header">'+'<button type="button" class="close" data-dismiss="modal">Ã—</button>'+'<h4 class="warning"><i class="fa fa-fw fa fa2 fa2-users-cog" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;'+theme_language("filemanager_context_extract_encrypted")+"</h4>"+"</div>"+'<div class="modal-body">'+'<form id="extractEncryptedForm" action="extract.cgi" method="post">'+'<div class="form-group">'+"<label>"+theme_language("filemanager_extract_encrypted_password_or_passphrase")+"</label>"+'<input autofocus name="password" type="password" class="form-control heighter-28" data-placement="top">'+"<small>"+theme_language("filemanager_extract_encrypted_password_or_passphrase_desc")+"</small>"+"</div>"+'<div class="form-group">'+'<span class="awcheckbox awobject awobjectm"><input id="delete_afterwards" name="delete_afterwards" type="checkbox" class="iawobject" value="3"><label class="lawobject font-weight-normal" for="delete_afterwards">'+theme_language("filemanager_extract_option_delete_afterwards")+"&nbsp;&nbsp; </label></span>"+'<br><span onclick="fm_overwrite_files = this.querySelector(\'input\').checked ? true : false" class="awcheckbox awobject awobjectm"><input '+(fm_overwrite_files?"checked ":String())+'id="overwrite_efiles" name="overwrite_efiles" type="checkbox" class="iawobject" value="'+fm_overwrite_files+'"><label class="lawobject font-weight-normal" for="overwrite_efiles">'+theme_language("filemanager_files_mode_ask_title2")+"&nbsp;&nbsp; </label></span>"+"</div>"+"</form>"+"</div>"+'<div class="modal-footer"><div class="btn-group">'+'<button type="button" class="btn btn-success o__f_m-submitter-decrypt_archive">'+theme_language("filemanager_context_extract")+"</button>"+'<button type="button" class="btn btn-default" data-dismiss="modal">'+theme_language("global_cancel")+"</button>"+"</div></div>"+"</div>"+"</div>"+"</div>");var Z=$("#extractEncrypted"),ee="o__f_m-submitter-decrypt_archive";Z.on("click.fm","."+ee,function(e){e.preventDefault();e.stopPropagation();var a=$(this).parents(".modal.in"),t=a.find('input[name="password"]'),_=t.val(),n=a.find('input[name="delete_afterwards"]'),i=n.is(":checked");plugins.messenger.post('<i class="fa fa-lg fa-fw fa-file-archive-o"></i>'+theme_language("filemanager_unpacking_archive")+" "+theme_language("global_please_wait"),0,"info","extract_info",1,["bottom","right"]);t.val(String());__f____a("extract",[_,i]);a.modal("hide")}).on("keyup",'input[name="password"]',function(e){e.preventDefault();var a=e.keyCode?e.keyCode:e.which;if(a===13){var t=$(this).parents(".modal.in");t.find("."+ee).trigger("click")}});Z.on("shown.bs.modal",function(e){e.preventDefault();var a=$(this);setTimeout(function(){a.find("input")[0].focus()},61);$(this).find('input[name="delete_afterwards"]')[0].checked=false});Z.on("show.bs.modal",function(){$(this).find('input[name="overwrite_efiles"]')[0].checked=fm_overwrite_files});$($v__fm__container_fluid+" #compressDialog.modal").after('<div id="encryptDecrypt" class="modal fade6" tabindex="-1">'+'<div class="modal-dialog">'+'<div class="modal-content">'+'<div class="modal-header">'+'<button type="button" class="close" data-dismiss="modal">Ã—</button>'+'<h4 class="warning"><i data-title-icon class="fa fa-fw fa fa-key-plus" aria-hidden="true"></i>&nbsp;&nbsp;&nbsp;<span data-title-text>'+theme_language("global_encrypt")+"</span></h4>"+"</div>"+'<div class="modal-body">'+'<form id="encryptDecryptForm" action="gpg.cgi" method="post">'+'<div class="form-group" data-encrypt>'+"<label>"+theme_language("filemanager_encrypt_gpg_key")+"</label>"+'<select name="key" class="form-control heighter-28"><option disabled selected></option></select>'+"</div>"+'<div class="form-group" data-decrypt>'+"<label>"+theme_language("login_passphrase")+"</label>"+'<input name="passphrase" type="password" class="form-control heighter-28" data-placement="top">'+"<small>"+theme_language("login_passphrase_desc")+"</small>"+"</div>"+'<div class="form-group">'+'<span class="awcheckbox awobject awobjectm margined-right-13"><input id="delete_afterwards_encrypt" name="delete_afterwards_encrypt" type="checkbox" class="iawobject" value="3"><label class="lawobject font-weight-normal" for="delete_afterwards_encrypt" data-label-text>'+theme_language("filemanager_encrypt_option_delete_afterwards")+"&nbsp;&nbsp; </label></span>"+'<span class="awcheckbox awobject awobjectm use_master_admin_keys_cnt margined-left-0 hidden"><input id="use_master_admin_keys" name="use_master_admin_keys" type="checkbox" class="iawobject" value="keys_master"><label class="lawobject font-weight-normal" for="use_master_admin_keys">'+theme_language("filemanager_decrypt_option_use_master_admin_keys")+"&nbsp;&nbsp; </label></span>"+'<br><span onclick="fm_overwrite_files = this.querySelector(\'input\').checked ? true : false" class="awcheckbox awobject awobjectm"><input '+(fm_overwrite_files?"checked ":String())+'id="overwrite_efiles_2" name="overwrite_efiles" type="checkbox" class="iawobject" value="'+fm_overwrite_files+'"><label class="lawobject font-weight-normal" for="overwrite_efiles_2">'+theme_language("filemanager_files_mode_ask_title2")+"&nbsp;&nbsp; </label></span>"+"</div>"+"</form>"+"</div>"+'<div class="modal-footer"><div class="btn-group pull-left"><button type="button" class="btn btn-default pull-left" data-button-reverse>'+theme_language("global_decrypt")+'</button></div><div class="btn-group">'+'<button type="button" class="btn btn-success o__f_m-submitter-decrypt_encrypt" data-button-text>'+theme_language("global_encrypt")+"</button>"+'<button type="button" class="btn btn-default" data-dismiss="modal">'+theme_language("global_cancel")+"</button>"+"</div></div>"+"</div>"+"</div>"+"</div>");setTimeout(encryptDecryptModalA,300);var ae=$("#encryptDecrypt");var te=ae.find('select[name="key"]');te.on("change.fm",function(){var e=$(this).parents(".modal"),a=e.find("[data-button-text]"),t="disabled";if($(this).val()){a.removeClass(t)}else{a.addClass(t)}});ae.on("click.fm","[data-button-reverse], [data-button-text]:not(.disabled)",function(e){var a=$(this).parents(".modal"),t=a.find(".modal-header .fa2-key-minus").length?1:0,_=t?"decrypt":"encrypt",n="?action="+_+"&module="+v___module+extra_query();if($(e.target).is(".o__f_m-submitter-decrypt_encrypt")){var i=a.find('[name="delete_afterwards_encrypt"]').is(":checked")?1:0,r=a.find('[name="use_master_admin_keys"]:visible').is(":checked")?1:0,o=a.find('[name="passphrase"]').val(),s=a.find('[name="key"]').val(),l=$.trim(a.find('select[name="key"]:visible [value="'+s+'"]').attr("data-key-user"));if(i){n+="&delete="+i}if(_!=="decrypt"){if(s){n+="&key="+s}}else{if(o){n+="&passphrase="+o}}var f=fm_get_current_home_username();if(r||l&&f&&l!=f){n+="&keyuser="+(l||get_server_data("user"))+"&homeuser="+f}else{n+=__f___um()}action_messages_dismiss_all(_);var c="fa-key-plus";if(_==="decrypt"){c="fa2 fa2-key-minus"}plugins.messenger.post('<i class="fa fa-lg fa-fw '+c+'"></i>'+theme_language("filemanager_crypt_"+_+"")+" "+theme_language("global_please_wait"),0,"info",_+"_info",1,["bottom","right"]);$.ajax({type:"POST",url:v___server_extensions_path+"/file-manager/gpg.cgi"+n,data:__f___gd(),dataType:"json",success:function(e){if(e[0].error&&e[0].error.length){setTimeout(function(){theme_message_dismiss(""+_+"_info")},566);alert_json_errors(e[0].error,_,"filemanager_errors_");return}setTimeout(function(){__f___u("upd",e[0],1,_,false);tree_update_node()},567)},error:function(e){session.status(e.responseText)}});$(this).parents(".modal").modal("hide")}else{encryptDecryptModalA(!t)}});ae.on("hide.bs.modal",function(){$(this).find('input[name="delete_afterwards_encrypt"]')[0].checked=false;$(this).find('input[name="passphrase"]').val(String());block_events()});ae.on("show.bs.modal",function(){var e=$(this).find('select[name="key"]'),a=e.val();$(this).find('input[name="overwrite_efiles"]')[0].checked=fm_overwrite_files;$.ajax({type:"POST",url:v___location_prefix+"/index.cgi/?xhr-get_gpg_keys=1&xhr-get_gpg_keys_all="+(event_hold_modifer_pressed()?1:0)+__f___um()+""+"&xhr-get_gpg_keys_cmodule="+v___module_file_manager,data:false,dataType:"json",success:function(t){e.empty();var _=t.public,n=0;$.each(_,function(a,t){var _=t.match(/\S+\s+\(\S+\s\[(\S+)\]\s\[\S+\s+\S+\]\)/),i=_&&_[0]&&_[1]?_[1]:"";e.append('<option data-key-user="'+i+'" data-key-order="'+i+""+a+'" value="'+a+'">'+t+"</option>");n++});if(n){var i=e.find("option");i.sort(function(e,a){return $(e).attr("data-key-order")>$(a).attr("data-key-order")?1:-1});e.empty().append(i).prepend('<option class="text-muted" value="" disabled selected>'+theme_language("filemanager_gpg_select_the_key")+"</option>")}else{var r=fm_get_current_home_username();if(!r){r=get_server_data("user")}var o=get_jailed_user();if(o){r=get_jailed_user("user")}e.prepend('<option class="text-muted" value="" disabled selected>'+theme_language("filemanager_archive_gpg_no_keys")+" ["+r+"]</option>")}if(e.find('option[value="'+a+'"]').length){e.val(a)}},error:function(e){session.status(e.responseText)}})});ae.on("shown.bs.modal",function(){var e=$(this);setTimeout(function(){e.find('input[name="passphrase"]')[0].focus()},61)});$(".bnt-primary, .bnt-default").removeClass(".bnt-primary, .bnt-default").addClass("btn-default");if(v___location_file!=="config.cgi"){if(f__ck_init_err(1)){f__ck_init_err();return}__f___up__tb_vis();setTimeout(function(){page.handle.content.preloader.show()},300);tree_view_get()}}setTimeout(function(){!$.support.spa&&___f__tw();$(window).off("resize.fm");$(window).on("resize.fm",function(e){if(v___location_file!=="config.cgi"&&v___module===v___module_file_manager){_f__table()&&_f__table().DataTable().draw();tree_resize()}})},$.support.spa?0:200);$.each(localStorage,function(e,a){if(/^(DataTables_DataTables_Table_[\d]*_\/file)/.test(e)){localStorage.removeItem(e)}});