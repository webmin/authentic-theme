/*!
 * Authentic Theme 6.6.0 (https://github.com/qooob/authentic-theme)
 * Copyright 2014 Ilia Rostovtsev <programming@rostovtsev.ru>
 * Licensed under MIT (https://github.com/qooob/authentic-theme/blob/master/LICENSE)
 */
(function(a){a.fn.replaceTagName=function(e){var f=[],g=this.length;while(g--){var j=document.createElement(e),b=this[g],d=b.attributes;for(var c=d.length-1;c>=0;c--){var h=d[c];j.setAttribute(h.name,h.value)}j.innerHTML=b.innerHTML;a(b).after(j).remove();f[g-1]=j}return a(f)}})(window.jQuery);function dblrclick(c){var b=0,a=false;return function(d){d.preventDefault();if(a){clearTimeout(b);a=false;return c.apply(this,arguments)}else{a=true;b=setTimeout(function(){a=false},300)}}}function back(){history.go(-1)}$(document).ready(function(){function c(){if($(location).attr("href")&&($(location).attr("href").indexOf("/chooser.cgi")!=-1||$(location).attr("href").indexOf("user_chooser.cgi")!=-1||$(location).attr("href").indexOf("group_chooser.cgi")!=-1)){return false}else{return true}}if(c()){if(window.parent.$('iframe[name="page"]').get(0)){$current_page_full=window.parent.$('iframe[name="page"]').get(0).contentWindow.location.pathname}}function a(){if(c()){window.parent.$('iframe[name="page"]').css("display","none");window.parent.$(".loader-container").css("display","block")}}function f(){if(c()){setTimeout(function(){window.parent.$(".loader-container").fadeOut(40);window.parent.$('iframe[name="page"]').fadeIn(400)},300)}}function e(){if(c()){if(($current_page_full!="/webmin/edit_themes.cgi"&&window.parent.location.search!="?updating")&&($current_page_full!="/webmin/install_theme.cgi"&&window.parent.location.search!="?updating-processing")&&($current_page_full!="/webmin/edit_webmincron.cgi"&&(window.parent.location.search!="?recollecting"&&window.parent.location.search!="?recollect"))&&($current_page_full!="/webmin/delete_webmincron.cgi"&&(window.parent.location.search!="?recollecting-system-status"&&window.parent.location.search!="?recollect-system-status"))&&($current_page_full!="/package-updates/index.cgi"&&window.parent.location.search!="?recollecting-package-updates")&&($current_page_full!="/package-updates/update.cgi"&&window.parent.location.search!="?recollecting-package-updates-processing")){return true}else{return false}}}if(c()){window.parent.$('iframe[name="page"]').on("load",function(){if(e()){f()}})}function b(){$(".navbar.navbar-default.navbar-fixed-top").show("slide",{direction:"right"},300);$("aside").show("slide",{direction:"left"},300)}a();b();$("#iframe").on("load",function(){if(d(false)){d(true)}});$webprefix=$("body").data("webprefix");function d(g){if(!g){return window.parent.$('iframe[name="page"]').contents().find("title").text()=="ConfigServer Security & Firewall"}else{if(g){$("#iframe").contents().find("body").on("click",'input[type="submit"], a[href^="index.cgi?action=temp"]',function(){$('iframe[name="page"]').css("display","none");$(".loader-container").css("display","block")});$csf=window.parent.$('iframe[name="page"]').contents();$csf.find("head").append('				<link rel="shortcut icon" href="'+$webprefix+'/favicon-webmin.ico">				<meta name="viewport" content="width=device-width, initial-scale=1.0">				<link href="'+$webprefix+'/unauthenticated/css/bootstrap.min.css" rel="stylesheet" type="text/css">				<link href="'+$webprefix+'/unauthenticated/css/fontawesome.min.css" rel="stylesheet" type="text/css">				<link href="'+$webprefix+'/unauthenticated/css/codemirror.min.css" rel="stylesheet" type="text/css">				<link href="'+$webprefix+'/unauthenticated/css/jquery.datatables.min.css" rel="stylesheet" type="text/css">				<link href="'+$webprefix+'/unauthenticated/css/default.min.css" rel="stylesheet" type="text/css">			');$csf.find("style").remove();$csf.find("body").addClass("csf");$csf.find("body").wrapInner('<div class="container-fluid col-lg-9 col-lg-offset-1">');$csf.find(".container-fluid").wrapInner('<div class="panel panel-default">');$csf.find(".panel-default").wrapInner('<div class="panel-body">');$csf.find(".panel-default").css("margin-top","20px").prepend('<div class="panel-heading" style="text-align:center"><font size="+2">ConfigServer Security & Firewall</font></div>');$csf.find(".panel-body > img:first-child, .panel-body > b").remove();$csf.find("#CSFajax").css("border","1px solid #ddd");$csf.find("body table").each(function(){$(this).addClass("table table-striped table-condensed").removeAttr("style")});$csf.find("body table tr td, body table tr th").each(function(){$(this).removeAttr("style")});$csf.find(".panel-body > h2:first-child").each(function(){$(this).text($(this).text().replace(":",""))});$csf.find(".csf table.table-striped.table-condensed th").each(function(){if($(this).html()=="Time To Live"){$(this).css("min-width","100px")}if($(this).html()=="&nbsp;"){$(this).css("min-width","70px")}});function h(){$csf.find("#CSFajax").css("max-height",$(window).outerHeight()-$(window).outerHeight()/2.4+"px")}$(window).resize(function(i){h()});h();$csf.find(".csf table.table-striped.table-condensed tbody > tr > td > p").each(function(){if($(this).text().indexOf("Your Score")>=0){$(this).next("p").remove();$(this).next("table").remove();$(this).next("table").remove();$(this).next("p").css("text-align","center")}});if($csf.find(".csf h2").text().indexOf("Ports listening for external connections and the executables running behind them")!==-1){$csf.find("table").each(function(){if(!$(this).find("thead").length){var i=$(this),j=$(this).find("tbody tr:first-child");i.attr("style","width: 100% !important");i.attr("style","min-width: 100% !important");i.prepend("<thead>"+j.html()+"</thead>");$(this).find("thead td").replaceTagName("th");j.remove();$(this).dataTable({order:[],aaSorting:[],bDestroy:true,bPaginate:false,bInfo:false,destroy:true})}})}if($csf.find(".csf .table.table-striped.table-condensed tbody th:eq(1)").text().indexOf("A/D")!==-1&&$csf.find(".csf .table.table-striped.table-condensed tbody th:eq(2)").text().indexOf("IP address")!==-1){$csf.find("table").each(function(){if(!$(this).find("thead").length){var i=$(this),j=$(this).find("tbody tr:first-child");i.prepend("<thead>"+j.html()+"</thead>");j.remove();$(this).dataTable({order:[],aaSorting:[],bDestroy:true,bPaginate:false,bInfo:false,destroy:true});i.find('img[src^="csfimages/"]').each(function(){$(this).attr("src",$(this).attr("src").replace("/csfimages/","csfimages/"))})}})}$csf.find(".csf td.section-gap:first-child").each(function(){$(this).parent("tr:first-child").remove();$(this).parent("tr:last-child").remove()});$csf.find(".csf td.section-title").each(function(){$(this).parent("tr").prev("tr").find("td.section-gap").parent("tr").remove();$(this).parent("tr").prev("tr").find("td.section-gap").parent("tr").remove()});$csf.find('.csf button[class="input"], .csf input[type="submit"]').each(function(){$(this).addClass("btn btn-default").removeClass("input")});$csf.find("body table tr th").each(function(){if(!$(this).parents("tbody").find("form").length&&$(this).text().indexOf("Upgrade")>=0){$(this).parents("table").prev("br").remove();$(this).parents("table").remove()}});$csf.find(".csf pre").each(function(){if($(this).text().indexOf("csf: v")>=0){$csf_version=$(this).text().match(/((?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+))$/)[0];$(this).remove()}});$csf.find('a[href$="/csf/changelog.txt"]').addClass("btn btn-xs btn-default").attr("style","padding:0 12px; height:19px;font-size:11px").text("View changelog");$csf.find(".csf .panel-heading font").each(function(){if($(this).text().indexOf("ConfigServer Security & Firewall")>=0){$(this).html('<font size="+2">Firewall</font><span style="font-size:14px;display:block">ConfigServer Security & Firewall version '+$csf_version+"</span>")}});$csf.find("div.panel-body p:last-child").each(function(){if($(this).text().indexOf("2006-2014")>=0){$(this).css("font-size","12px").css("margin-top","12px")}});$csf.find('img[src="csfimages/loader.gif"]').each(function(){$(this).attr("src",""+$webprefix+"/images/loader-horizontal.gif").css("margin-left","10px")});$csf.find(".paginationstyle a").each(function(){$(this).addClass("btn btn-default")});$csf.find('img[src^="lfd_"], img[src^="/csf/lfd_"]').each(function(){$(this).parents("table").removeClass("table-striped")});$csf.find(".csf fieldset legend b").each(function(){if($(this).text().indexOf("Edit ConfigServer Firewall")>=0){$submit_changes=$csf.find('input[value="Change"]');$submit_changes.addClass("csf-submit_changes");$submit_changes.on("click",function(){$csf.find('input[value="saveconf"]').parent("form").submit()})}});setTimeout(function(){$csf.find('textarea[name="formdata"]').each(function(j,m){var l=$(this);$parent_width=l.parent("td").width();var k=CodeMirror.fromTextArea(m,{mode:{name:"rpm-spec"},tabMode:"indent",matchBrackets:true,lineNumbers:true,indentUnit:4,autofocus:true});$window_height=($(window).outerHeight()-($(window).outerHeight()/2));k.setSize($parent_width,$window_height);$(window).resize(function(){$parent_width=l.parent("td").width();$window_height=($(window).outerHeight()-($(window).outerHeight()/2));k.setSize($parent_width,$window_height)})})},340)}}}$(".navigation > li").on("click",function(j){j.preventDefault();j.stopPropagation();typeof $processing=="undefined"?$processing=false:false;if(!$processing){$processing=true;var g=$("a",this).attr("href"),i=$("a",this).attr("target"),h=$(this);if(i){$(".navigation > ul.sub > li").each(function(){$(this).removeClass("sub_active")})}$("#webmin_search_form").submit(function(){$(".navigation > ul.sub > li").each(function(){$(this).removeClass("sub_active")})});$.when($("#sidebar .navigation > li").each(function(){var k=$(this);if(!$(this).is(h)){$(this).removeClass("active");if($(this).find("a").attr("href")!="#search"&&!$(this).find("a").attr("target")){if($(k.find("a").attr("href")).hasClass("sub")){$(k.find("a").attr("href")).slideUp(440)}}}})).done(function(){h.hasClass("active")?h.removeClass("active"):(g!="#hide"&&!i)?h.addClass("active"):false;setTimeout(function(){if($(g).is(":visible")&&g!="#hide"&&!i){h.addClass("active")}else{h.removeClass("active")}$processing=false},600);$(g).slideToggle(440)});if(g=="#search"){$('#sidebar input[name="search"]').focus()}}});$(".navigation > ul.sub > li").on("click",function(){var g=$(this);$(".navigation > ul.sub > li").each(function(){$(this).removeClass("sub_active")});$("#webmin_search_form").find('input[name="search"]').val("");g.addClass("sub_active")});$("select").each(function(){$(this).removeAttr("onchange")});if(c()){$('.dropdown > ul > li > a[data-loader="true"], .navigation a[target="page"], a[href$="virtual-server/index.cgi"], table.table-hover a:not([target="_blank"]), .list-group-item, .menu-link, .panel-body > a.ui_link, button[type="submit"], a.btn.btn-primary[href^="/"], a.ui_link, div.icons-row div a, td[id^="head"] a, tr.tr_tag td.td_tag a, tr.ui_checked_columns td a, tr.ui_grid_row td.ui_grid_cell a, a[href*=".cgi"], a[href$=".cgi"], input[type="submit"], .navigation_module_trigger, .navigation_refresh_modules_trigger, .navigation_feedback_trigger, .navigation_domain_settings_trigger').on("click",function(){var l=$(this),i=$.trim($(this).text()).toLowerCase(),n=$(this).attr("name"),j=["/updown/","/webmin/edit_themes.cgi","/usermin/edit_themes.cgi","/webmin/edit_mods.cgi","/usermin/edit_mods.cgi"],g=$current_page_full,m=["export","export as csv.","download","upload"],h=["switch"],k=["detachall.cgi"];$forbidden_onclicks=["print_mail.cgi"];typeof l.attr("href")=="undefined"?$forbidden_href="":$forbidden_href=l.attr("href");typeof l.attr("onclick")=="undefined"?$forbidden_onclick="":$forbidden_onclick=l.attr("onclick");typeof l.attr("href")=="undefined"?l.attr("href",""):false;if($forbidden_onclick.indexOf($forbidden_onclicks)===-1&&$forbidden_href.indexOf(k)===-1&&$.inArray(g,j)===-1&&$.inArray(i,m)===-1&&$.inArray(n,h)===-1||($.inArray(g,j)!==-1&&($(this).attr("href")=="/"+$current_page.split("/")[0]+"/"||$(this).attr("href")=="/"+$current_page.split("/")[0]+"/index.cgi"))){if(!l.hasClass("select_all")&&!l.hasClass("select_invert")&&$(this).attr("type")!="checkbox"&&$(this).find("input").length<=0&&$(this).attr("href").indexOf("detach.cgi")===-1){a()}}});$("#webmin_search_form").on("submit",function(){a()})}$(".opener_trigger").on("click",function(){$this=$(this);if($this.closest("tbody").find(".opener_container").first().find("div").hasClass("opener_hidden")){$this.closest("tbody").find(".opener_container").show();setTimeout(function(){$this.parent("td").find(".opener_trigger img").attr("src",""+$webprefix+"/images/open.gif")},10)}else{$this.closest("tbody").find(".opener_container").hide();setTimeout(function(){$this.parent("td").find(".opener_trigger img").attr("src",""+$webprefix+"/images/closed.gif")},10)}});if($(".opener_shown").length>0){$(".panel-body  .ui_form .table  tbody  tr").removeClass("thead");$(".opener_trigger").parent("td").css("vertical-align","middle").css("height","43px").css("text-align","left")}$("a.opener_trigger").each(function(){$(this).parent("td").css("text-align","left")});$(".navigation_module_trigger, .navigation_refresh_modules_trigger, .navigation_feedback_trigger, .navigation_domain_settings_trigger").on("click",function(g){g.preventDefault();g.stopPropagation();$('iframe[name="page"]').attr("src",$(this).data("href"));$(".navbar-toggle:visible").trigger("click");window.parent.$(".navigation > ul.sub > li").removeClass("sub_active");window.parent.$("#sidebar .navigation > ul.sub").slideUp(440);window.parent.$("#sidebar .navigation > li").removeClass("active")});$(".authentic_update").on("click",function(g){g.preventDefault();g.stopPropagation();a();window.parent.history.pushState(null,null,"/?updating");window.parent.$('iframe[name="page"]').attr("src",$(this).attr("href"))});$('a[data-href="/webmin/edit_webmincron.cgi"]').on("click contextmenu",function(g){if(window.parent.$('iframe[name="page"]').data("disable-recollect")===1){if(window.parent.$("#wrapper").data("virtual-server")!=-1){$(this).attr("href","/?updated&virtualmin")}if(window.parent.$("#wrapper").data("server-manager")!=-1){$(this).attr("href","/?updated&cloudmin")}return true}g.preventDefault();g.stopPropagation();a();if($(this).attr("data-refresh").indexOf("package-updates")!==-1){window.parent.history.pushState(null,null,"/?recollecting")}else{window.parent.history.pushState(null,null,"/?recollect")}window.parent.$('iframe[name="page"]').attr("src",$(this).attr("data-href"))});$(".navbar-brand").on("click",function(g){$(".navbar-collapse").removeClass("in")});if(c()){$product_name=window.parent.$("#wrapper").data("product");$("body table").each(function(h,g){var i=$(this);if(!$(g).hasClass("table")&&!$(g).hasClass("header")&&!$(g).hasClass("ui_form_end_buttons")&&!$(g).hasClass("ui_table")){$(g).addClass("table-hardcoded");if($product_name=="usermin"){$(g).addClass("table table-striped table-rounded table-condensed table-subtable")}}})}if(c()){window.parent.$('iframe[name="page"]').on("load",function(){$('[data-toggle="tooltip"], [data-toggle="virtualmin-license"]').tooltip();$('[data-toggle="virtualmin-license"]').popover({html:true,content:function(){return"<table><tbody>									<tr>										<td style='font-weight:bold;'>"+$(this).data("proc-serial-number-text")+"</td> <td>"+$(this).data("proc-serial-number-data")+"</td>									</tr>									<tr>										<td style='font-weight:bold'>"+$(this).data("proc-license-key-text")+"</td> <td>"+$(this).data("proc-license-key-data")+"</td>									</tr>									<tr>										<td style='font-weight:bold'>"+$(this).data("proc-license-domains-text")+"</td> <td>"+$(this).data("proc-license-domains-data")+"</td>									</tr>									<tr>										<td style='font-weight:bold'>"+$(this).data("proc-license-domains-left-text")+"</td> <td>"+$(this).data("proc-license-domains-left-data")+"</td>									</tr>									<tr>										<td style='font-weight:bold'>"+$(this).data("proc-licensed-virtualmin-systems-text")+"</td> <td>"+$(this).data("proc-licensed-virtualmin-systems-data")+"</td>									</tr>									<tr>										<td style='font-weight:bold'>"+$(this).data("proc-licensed-virtualmin-systems-installed-on-text")+"</td> <td>"+$(this).data("proc-licensed-virtualmin-systems-installed-on-data")+"</td>									</tr>									<tr>										<td style='font-weight:bold'>"+$(this).data("proc-expiry-date-text")+"</td> <td>"+$(this).data("proc-expiry-date-data")+"</td>									</tr>									<tr>										<td style='font-weight:bold'>"+$(this).data("proc-expiry-days-text")+"</td> <td>"+$(this).data("proc-expiry-days-data")+"</td>									</tr>								</tbody></table>							 "},container:"body",placement:"auto top"});function h(){if(window.parent.$("#sidebar:visible").length==1){if($(window).width()<1200){window.parent.$('iframe[name="page"]').contents().find(".container-fluid").css("margin-left","20px")}else{window.parent.$('iframe[name="page"]').contents().find(".container-fluid").removeAttr("style")}}else{$(".container-fluid").css("margin-left",0)}}$(window).resize(function(l){h()});$("input[type=file]").bootstrapFileInput();$("#tall_0").before("<br>");function k(){$(".opener_container").each(function(l,m){if($(this).find("div").hasClass("opener_hidden")){$(this).hide()}else{$(this).show()}})}k();$current_page=window.parent.$('iframe[name="page"]').get(0).contentWindow.location.pathname.replace(/^\//g,"");if(e()){if($("#headln2l a").attr("href")){if($("#headln2l a").attr("href").indexOf(".cgi")>=0){$current_page_webmin=1}else{$current_page_webmin=0}}else{$current_page_webmin=0}$("a").each(function(){if($(this).find("img").length){$(this).css("text-decoration","none")}});($current_page.split("/")[0]=="virtual-server"&&!$current_page_webmin&&window.parent.$("#wrapper").data("virtual-server")!=-1)?$current_page=$current_page.split("/")[0]+"/"+$current_page.split("/")[1]:$current_page=$current_page.split("/")[0]+"/";var j=[];window.parent.$("ul.sub li a").each(function(){if(window.parent.$("#wrapper").data("virtual-server")==-1&&$(this).attr("href").split("/")[0]=="virtual-server"){j.push($(this).attr("href"))}else{j.push($(this).attr("href"))}});if(($current_page&&$current_page!="virtual-server/index.cgi"&&j.indexOf($current_page)>-1)||(window.parent.$("#wrapper").data("virtual-server")!=-1&&$current_page=="virtual-server/"||$current_page=="body.cgi/")){window.parent.$(".navigation > ul.sub > li").removeClass("sub_active");window.parent.$("#sidebar .navigation > ul.sub").hide();window.parent.$("#sidebar .navigation > li").removeClass("active");window.parent.$('a[href="'+$current_page+'"]').parent("li").addClass("sub_active").parent("ul.sub").show().prev("li").addClass("active")}}$('.panel-body > form > table > tbody > tr > td:has(input[type="submit"])').parents("table.table-hardcoded > tbody > tr").css("border","none").parents("table").css("margin-top","20px");$('.panel-body > form > table > tbody > tr > td:has(input[type="submit"])').parents("table.table-hardcoded > tbody").css("border","none");$('.ui_grid_table > tbody > tr.ui_grid_row > td:has(button[type="submit"])').parents("table.ui_grid_table").css("border","none");$("form.ui_form > table label.radio, form.ui_form > table label.checkbox").each(function(){var n=$(this),o=n.find("i.fa"),m=n.find("i.fa").text().trim(),l=n.text().trim();if(m.length===0&&l.length===0){o.parent("label").remove()}});if($current_page_full=="/webmin/edit_themes.cgi"&&window.parent.location.search=="?updating"){$iframe=window.parent.$('iframe[name="page"]').contents();$iframe.find('.panel-body .nav.nav-tabs li a[href="#install"]').tab("show");$iframe.find(".panel-body .tab-pane.active").removeClass("active");$iframe.find(".panel-body #install").addClass("active");$iframe.find('.panel-body .ui_radio_table.table-hardcoded input[id="source_2"]').prop("checked",true);$iframe.find('.panel-body .ui_radio_table.table-hardcoded input[id="source_2"]').parents("td").next("td").find('input[name="url"]').val("https://rostovtsev.ru/.git/authentic-theme/authentic-theme-latest.wbt.gz");$iframe.find('.panel-body .tab-pane.active form[action^="install_theme."]').submit();window.parent.history.pushState(null,null,"/?updating-processing")}else{if($current_page_full=="/webmin/install_theme.cgi"&&window.parent.location.search=="?updating-processing"){window.parent.history.pushState(null,null,"/?updating-finished");window.parent.$('iframe[name="page"]').attr("src",""+$webprefix+"/body.cgi")}else{if($current_page_full=="/body.cgi"&&window.parent.location.search=="?updating-finished"){i();$(window.parent).on("popstate",function(){window.parent.history.pushState(null,null,"/")})}}}if($current_page_full=="/webmin/edit_webmincron.cgi"&&window.parent.location.search=="?recollecting"){$iframe=window.parent.$('iframe[name="page"]').contents();$iframe.find("#"+$iframe.find("label:contains('scheduled_collect_system_info')").attr("for")).prop("checked",true);var g=$iframe.find('form[action^="delete_webmincron."]');g.append('<input type="hidden" name="run" value="1">');g.submit();window.parent.history.pushState(null,null,"/?recollecting-system-status")}else{if($current_page_full=="/webmin/delete_webmincron.cgi"&&window.parent.location.search=="?recollecting-system-status"){window.parent.history.pushState(null,null,"/?recollecting-package-updates");window.parent.$('iframe[name="page"]').attr("src",""+$webprefix+"/package-updates/index.cgi?mode=updates")}else{if($current_page_full=="/package-updates/index.cgi"&&window.parent.location.search=="?recollecting-package-updates"){$iframe=window.parent.$('iframe[name="page"]').contents();var g=$iframe.find('form[action^="update."]');g.append('<input type="hidden" name="refresh" value="1">');g.submit();window.parent.history.pushState(null,null,"/?recollecting-package-updates-processing")}else{if($current_page_full=="/package-updates/update.cgi"&&window.parent.location.search=="?recollecting-package-updates-processing"){$iframe=window.parent.$('iframe[name="page"]').contents();$iframe.find("#refresh").trigger("click");window.parent.history.pushState(null,null,"/?recollecting-finished");window.parent.$('iframe[name="page"]').attr("src",""+$webprefix+"/body.cgi")}else{if($current_page_full=="/body.cgi"&&window.parent.location.search=="?recollecting-finished"){i();window.parent.$('iframe[name="page"]').data("disable-recollect",1);$(window.parent).on("popstate",function(){window.parent.history.pushState(null,null,"/")})}}}}}if($current_page_full=="/webmin/edit_webmincron.cgi"&&window.parent.location.search=="?recollect"){$sysinfo_content=$("body");$sysinfo_content.find("#"+$sysinfo_content.find("label:contains('scheduled_collect_system_info')").attr("for")).prop("checked",true);$form_sysinfo=$sysinfo_content.find('form[action^="delete_webmincron."]');$form_sysinfo.append('<input type="hidden" name="run" value="1">');$form_sysinfo.submit();window.parent.history.pushState(null,null,"/?recollect-system-status")}else{if($current_page_full=="/webmin/delete_webmincron.cgi"&&window.parent.location.search=="?recollect-system-status"){window.parent.history.pushState(null,null,"/?recollect-finished");window.parent.$('iframe[name="page"]').attr("src",""+$webprefix+"/body.cgi")}else{if($current_page_full=="/body.cgi"&&window.parent.location.search=="?recollect-finished"){i();window.parent.$('iframe[name="page"]').data("disable-recollect",1);$(window.parent).on("popstate",function(){window.parent.history.pushState(null,null,"/")})}}}if(window.parent.$('iframe[name="page"]').data("disable-recollect")&&$current_page_full=="/body.cgi"){$('a[data-href="/webmin/edit_webmincron.cgi"]').each(function(){$(this).addClass("btn-inverse updated").removeClass("btn-success btn-primary").css("color","#333").attr("title",$(this).data("refresh-title"))})}$("a.btn-inverse.updated").on("contextmenu",function(l){l.preventDefault()});function i(){if(window.parent.$("#wrapper").data("virtual-server")!=-1){window.parent.history.pushState(null,null,"/?virtualmin")}else{if(window.parent.$("#wrapper").data("server-manager")!=-1){window.parent.history.pushState(null,null,"/?cloudmin")}else{window.parent.history.pushState(null,null,"/")}}}if(window.location.search=="?updated"||window.location.search=="?updated&virtualmin"||window.location.search=="?updated&cloudmin"){i()}$('input[name="but_switch"]').on("click",function(l){$(window.parent).on("popstate",function(){window.parent.history.pushState(null,null,"/")});$(this).parents("form").attr("target","_top")});$('form[action*="switch_user.cgi"], a[href*="switch_user.cgi"]').each(function(){$(window.parent).on("popstate",function(){window.parent.history.pushState(null,null,"/")});$(this).attr("target","_top")});$('.ui_form[action^="delete_mons"] tr.ui_checked_columns > td > label > img[src="images/up.gif"], .ui_form[action^="save_mon"] img[src="images/up.gif"], table.ui_buttons_table > tbody > tr.ui_buttons_row > td.ui_buttons_label > img[src="images/up.gif"]').each(function(m,l){var n=$(this);$(l).attr("src",""+$webprefix+"/images/check.png")});$('.ui_form[action^="delete_mons"] tr.ui_checked_columns > td > label > img[src="images/down.gif"], .ui_form[action^="save_mon"] img[src="images/down.gif"], table.ui_buttons_table > tbody > tr.ui_buttons_row > td.ui_buttons_label > img[src="images/down.gif"]').each(function(m,l){var n=$(this);$(l).attr("src",""+$webprefix+"/images/cross.png")});$('img[src^="images"]').each(function(m,l){$(l).attr("src",""+$webprefix+"/"+$(this).attr("src"))});$('img[src^="../images"]').each(function(m,l){$(l).attr("src",""+$webprefix+"/"+$(this).attr("src").replace("../",""))});$("input").each(function(m,l){if($(this).attr("src")=="images/ok.gif"){$(l).attr("src",""+$webprefix+"/"+$(this).attr("src"));$(this).parents("td").attr("style","white-space: nowrap")}});$('input[type="submit"]').each(function(){if($(this).val().indexOf("Start at")!=-1||$(this).val()=="Scan for servers"){$(this).addClass("btn-primary")}if($(this).val().indexOf("Stop")!=-1||$(this).val().indexOf("Delete")!=-1){$(this).addClass("btn-danger")}if($(this).val().indexOf("Warning")!=-1||$(this).val().indexOf("Restart")!=-1){$(this).addClass("btn-warning")}if($(this).val().indexOf("Start")!=-1&&$(this).val().indexOf("Start at")==-1&&$(this).val().indexOf("Start On")==-1&&$(this).val().indexOf("Start Now")==-1){$(this).addClass("btn-success")}if($(this).val()=="Save"){$(this).addClass("btn-success")}});$("textarea").each(function(p,s){var r=$(this),o=["phpini","bind8"],n=["phpini"],l=["bind8"];$("#headln2l a").attr("href")?$page=$("#headln2l a").attr("href").split("/")[1]:$page=null;if(o.indexOf($page)>=0){$(this).data("name","data");if(n.indexOf($page)>=0){$(this).data("mode","text/x-z80")}else{if(l.indexOf($page)>=0){$(this).data("mode","xml")}else{$(this).data("mode","rpm-spec")}}}$current_file=$current_page_full.replace(/^\//g,"");if($current_file){$current_file=$current_file.split("/")[1]}var m=["edit_recs.cgi","edit_dirs.cgi"];if(($(this).attr("name")=="data"||$(this).data("name")=="data"||$(this).attr("name")=="directives")&&$("textarea").length===1&&$("textarea").parent("td.td_tag").length===0&&$current_page!="init/"&&m.indexOf($current_file)===-1){$parent_width=r.parent("td").width();var q=CodeMirror.fromTextArea(s,{mode:{name:$(this).data("mode")?$(this).data("mode"):"rpm-spec"},tabMode:"indent",matchBrackets:true,lineNumbers:true,indentUnit:4,autofocus:true});$window_height=($(window).outerHeight()-($(window).outerHeight()/2.8));q.setSize($parent_width,$window_height);$(window).resize(function(){$parent_width=r.parent("td").width();$window_height=($(window).outerHeight()-($(window).outerHeight()/2.8));q.setSize($parent_width,$window_height)})}});if($(".ui_table tr td").has(".ui_grid_table.table-hardcoded")&&($current_page=="passwd/"||$current_page=="mailboxes/"||$current_page_full=="/usermin/list_configs.cgi")){$(".ui_table tr td .ui_grid_table.table-hardcoded").parents("table").css("border","1px solid #ddd");$(".ui_table tr td .ui_grid_table.table-hardcoded").addClass("table").parents("tr").css("border","1px solid #ddd")}if($current_page=="cshrc/"){$("textarea").each(function(l,m){$(this).attr("style","height: 20em !important")})}if($current_page=="acl/"){$('.ui_grid_table.table-hardcoded .ui_grid_row .ui_grid_cell input[type="checkbox"]').each(function(l,m){$(this).attr("style","vertical-align: middle !important")})}if($current_page=="init/"){$('.table.table-striped.table-condensed tr.tr_tag td.td_tag input[type="checkbox"]').each(function(l,m){$(this).attr("style","vertical-align: middle !important")})}if($current_page_full.indexOf(".cgi")===-1&&$current_page=="useradmin/"){$('.table.table-striped.table-condensed tbody tr td input[type="checkbox"], .table.table-striped.table-condensed tbody tr td label').each(function(l,m){$(this).attr("style","vertical-align: baseline !important")});$(".table.table-striped.table-condensed tbody tr td label").each(function(l,m){$(this).attr("style","vertical-align: bottom !important")})}if($current_page=="proc/"||($current_page=="fetchmail/"&&$("link").attr("href")=="/favicon-usermin.ico")){if($current_page=="proc/"){$("a.ui_link + b").addClass("btn btn-success").css("margin-top","4px").css("margin-left","3px");$("b + a.ui_link").addClass("btn btn-success").css("margin-top","4px").css("margin-left","3px");if($('.panel-body > b:first-child:contains("Display")').length>0){$(".panel-body > b:first-child").remove()}if($(".panel-body").find("b:first-child").text()=="PID"){$(".panel-body").find("b:first-child").addClass("btn btn-success").css("margin-top","4px")}}$(".panel-body").contents().filter(function(){return this.nodeType==3}).remove();$(".panel-body > a.ui_link").css("margin-left","3px")}$("td.td_tag").contents().filter(function(){return this.nodeType==3}).next("input").css("margin-left","3px");$(".ui_buttons_hr > td > table.table-hardcoded > tbody > tr > td[nowrap]").each(function(){$(this).parents("table").attr("style","margin-bottom: 15px !important")});$(".table-hardcoded > tbody > tr > td.col_label b a, .ui_table_row td a").each(function(l,m){if(!$(this).attr("href")){$(this).attr("style","color: #333; text-decoration: none; cursor:default")}});window.parent.$('a[data-hover="true"]').on("mouseover",function(){$(this).find("i").css("color","#333")}).on("mouseout",function(l){if(!$(this).find("i").hasClass("fa-spin")){$(this).find("i").css("color","#888")}});window.parent.$('a[data-refresh="true"]').on("click contextmenu",function(l){l.preventDefault();if(l.type=="click"){if(window.parent.$('iframe[name="page"]').get(0)){a();$(this).find("i.fa").addClass("fa-spin").css("color","#333");window.parent.$('iframe[name="page"]').attr("src",window.parent.$('iframe[name="page"]').get(0).contentWindow.location.pathname+window.parent.$('iframe[name="page"]').get(0).contentWindow.location.search)}}else{window.parent.$("a.data-refresh")[0].click()}});setTimeout(function(){if($current_page_full.indexOf(".cgi")===-1&&($current_page=="virtual-server/"||$current_page=="init/"||$current_page=="mount/"||$current_page=="quota/"||$current_page=="fsdump/"||$current_page=="inittab/"||$current_page=="logrotate/"||$current_page=="mailcap/"||$current_page=="cron/"||$current_page=="software/"||$current_page=="syslog/"||$current_page=="useradmin/"||$current_page=="apache/"||$current_page=="webalizer/"||$current_page=="cpan/"||$current_page=="htaccess-htpasswd/"||$current_page=="fdisk/")||$current_page_full=="/man/search.cgi"||$current_page_full=="/proc/index_tree.cgi"||$current_page_full=="/proc/index_user.cgi"||$current_page_full=="/proc/index_size.cgi"||$current_page_full=="/proc/index_cpu.cgi"||$current_page_full=="/proc/index_search.cgi"||$current_page_full=="/software/search.cgi"||$current_page_full=="/virtual-server/index.cgi"||$current_page_full=="/virtual-server/list_users.cgi"||$current_page_full=="/virtual-server/edit_newplan.cgi"||$current_page_full=="/virtual-server/edit_newfeatures.cgi"||$current_page_full=="/virtual-server/edit_newtmpl.cgi"||$current_page_full=="/virtual-server/backuplog.cgi"){$("table").each(function(){if($(this).find("thead").length&&$(this).find("thead tr th").length>2){$.fn.dataTableExt.sErrMode="throw";$(this).dataTable({order:[],aaSorting:[],bDestroy:true,bPaginate:false,bInfo:false,bFilter:false,destroy:true});$(this).find("th").each(function(){if(!$(this).text()){$(this).css("opacity","0").css("cursor","default")}})}})}},300);$("table thead th").each(function(){$(this).css("border-top","none");$(this).css("border-bottom","none")});$('a[href^="/help.cgi"]').attr("onclick","").unbind("click").addClass("help_popup");$(".help_popup").each(function(){$(this).attr("style","color: #333; text-decoration: none; cursor:help")});$(".help_popup").on("click",function(l){l.preventDefault();l.stopPropagation();$(".popover").popover("destroy");jQuery.ajaxSetup({async:false});var n=$(this),o=$(this).attr("href"),m=$(this).parents("td");m.append('<span class="_tmp_help_content hidden"></span>');m.find("._tmp_help_content").load($(this).attr("href"));$help_title=m.find("._tmp_help_content .ui_subheading").first().text();$help_body=m.find("._tmp_help_content title").remove();$help_body=m.find("._tmp_help_content h3").remove();$help_body=m.find("._tmp_help_content hr").remove();$help_body=m.find("._tmp_help_content a").removeAttr("href").css("text-decoration","none").css("color","#333").css("font-style","italic");$help_body=m.find("._tmp_help_content").html();m.find("._tmp_help_content").remove();$(this).popover({html:true,title:function(){return $help_title},content:function(){return $help_body},container:"body",placement:"right"});$(this).popover("show");$(this).on("hidden.bs.popover",function(){$(this).popover("destroy")});$("body").on("click",function(){$(".popover").popover("destroy")})});$('.ui_form > a, .ui_grid_cell > :not(input) + a.ui_link, .ui_grid_cell > a.select_all, .ui_grid_cell > a.select_invert, .ui_grid_cell > :not(input) + a[href*=".cgi"], .ui_grid_cell > a[href*=".cgi"]:first-child, .tab-pane > p > a, .tab-pane > a.ui_link, .tab-pane > .table-condensed > a.ui_link, .panel-body > p > a.ui_link, a.select_all, a.select_invert').each(function(){if($current_page!="passwd/"&&$(this).text()&&$current_page_full!="/mailboxes/"&&!$(this).hasClass("help_popup")){$(this).addClass("btn btn-inverse btn-tiny ui_link_replaced");$(this).text($(this).text().replace(/\.$/,""));$(this).parent().contents().filter(function(){return this.nodeType==3}).remove();if($(this).hasClass("select_all")){$(this).html('<i class="fa fa-check-square-o"> </i> '+$(this).text())}if($(this).hasClass("select_invert")){$(this).html('<i class="fa fa-share-square-o"> </i> '+$(this).text())}if(($(this).attr("href").indexOf("edit")===0&&$(this).attr("href").indexOf("edit_allow")!==0)||$(this).attr("href").indexOf("master_form")===0||$(this).attr("href").indexOf("slave_form")===0||$(this).attr("href").indexOf("stub_form")===0||$(this).attr("href").indexOf("forward_form")===0||$(this).attr("href").indexOf("delegation_form")===0||$(this).attr("href").indexOf("mass_form")===0||$(this).attr("href").indexOf("newdb_form")===0){$(this).html('<i class="fa fa-plus-square-o"> </i> '+$(this).text())}else{if($(this).attr("href").indexOf("edit_allow")===0){$(this).html('<i class="fa fa-shield"> </i> '+$(this).text())}else{if($(this).attr("href").indexOf("mass_ucreate")===0){$(this).html('<i class="fa fa-user"> </i> '+$(this).text())}}}}});$("a.ui_link_replaced").each(function(){if($(this).prev().is("b")){$(this).prev("b").addClass("btn btn-success btn-tiny")}if($(this).next().is("b")){$(this).next("b").addClass("btn btn-success btn-tiny")}});if($current_page=="fetchmail/"&&$("link").attr("href")=="/favicon-webmin.ico"){$("a.ui_link").each(function(){$(this).addClass("btn btn-inverse btn-tiny ui_link_replaced").css("margin-bottom","10px").css("margin-top","4px");$(this).text($(this).text().replace(/\.$/,""));$(this).parent().contents().filter(function(){return this.nodeType==3}).remove()})}$('select.ui_select[name="days"]').each(function(){$(this).parent("td").attr("style","vertical-align: top !important")});if($current_page=="mailboxes/"||$current_page=="mailbox/"){setTimeout(function(){$("body").find("form").removeAttr("onsubmit");$header_tables=$("body").find('input[name="from"]').parents(".tab-pane").parent("td");$header_tables.children("table").hide();$.each($header_tables.find("input, textarea, select"),function(){if(!$(this).hasClass("ui_select")&&!$(this).attr("onclick")&&$(this).attr("type")!="checkbox"&&$(this).attr("type")!="submit"){$(this).attr("style","width: 60%").addClass("inline-block")}if($(this).attr("onclick")){$(this).addClass("inline-block")}});window.onbeforeunload=null;if($("body").find('input.ui_hidden[name="html_edit"]').val()==1){tinyMCE.init({mode:"exact",elements:"body",auto_focus:"body",menubar:false,height:420,plugins:["advlist autolink lists link image charmap print hr anchor pagebreak fullscreen","searchreplace wordcount visualblocks visualchars code","insertdatetime media nonbreaking save table contextmenu directionality","template paste textcolor colorpicker textpattern"],toolbar1:"insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | fullscreen print media | forecolor backcolor | visualblocks charmap code"})}$("body").find('input[name="from"]').parents(".tab-pane").prev("table").remove();$("body").find('input[name="from"]').parents(".tab-pane ").parent("td").find("div, table").each(function(l,m){$(this).find(".col_label").css("width","20%");$(this).find('input[name="subject"]').parent("td").prev("td").find("b").attr("style","font-size: 14px !important");$(this).find('input[name="subject"]').parents("table").show();$(this).find('input[name="subject"]').parent("td").find(".submitter").remove()});$editor_mode_link_container=$("body").find('textarea[id="body"]').parents("table").find("thead > tr > th:last-child");$editor_mode_link=$editor_mode_link_container.find("a").addClass("editor_mode_link");$editor_mode_link_container.parent("tr").find("th:first-child").append($editor_mode_link);$editor_mode_link_container.remove();$editor_mode_link_button=$("body").find('textarea[id="body"]').parents("table").find(".editor_mode_link");$editor_mode_link_button_state=$editor_mode_link_button.attr("href")?$editor_mode_link_button.attr("href").indexOf("html=0"):false;$editor_mode_link_button.attr("title",$editor_mode_link_button.text()).addClass("editor_mode_link_button pull-right btn "+($editor_mode_link_button_state==-1?"btn-success":"btn-primary")).html('<i class="fa fa-lg '+($editor_mode_link_button_state==-1?"fa-font":"fa-align-justify")+'"> </i>');$("body").find('textarea[id="body"]').parents("table").find("thead > tr > th").find("b").css("padding-left","45px");$(".editor_mode_link_button").tooltip();$fileinput_container=$("body").find('a[onclick="return add_ss_attachment()"]');$fileinput_container.parent("td").contents().filter(function(){return this.nodeType==3}).remove();$fileinput_container.remove();$fileinput_add_another_attachment=$("body").find('a[onclick="return add_attachment()"]');$fileinput_add_another_attachment.addClass("btn btn-default");$fileinput_add_another_attachment.text($fileinput_add_another_attachment.text().replace(/\.$/,""))},100);if($current_page_full.indexOf("view_mail.cgi")){setTimeout(function(){$table_title_header_container=$(".ui_form").find("div.table-responsive").first().find(".table-title");$table_title_links_container=$table_title_header_container.next();$table_title_links_container.contents().filter(function(){return this.nodeType==3}).remove();$table_title_links_container.find("a").addClass("table_title_links pull-right btn btn-info btn-tiny");$table_title_links=$table_title_links_container.html();$table_title_header_container.append($table_title_links);$table_title_links_container.remove();$table_title_header_container_text_padding=35;$(".table_title_links_container a").each(function(){$table_title_header_container_text_padding=$table_title_header_container_text_padding+$(this).width()});$table_title_header_container.find("b").css("padding-left",$table_title_header_container_text_padding);$table_title_header_container=$(".ui_form").find("div.table-responsive").first().next("div.table-responsive").find("th:first-child");$table_title_links_container=$(".ui_form").find("div.table-responsive").first().next("div.table-responsive").find("th:last-child");if($(".ui_form").find("div.table-responsive").first().next("div.table-responsive").find("th").length==2){$table_title_links_container.remove()}else{return}$table_title_links_container.find("a").addClass("table_title_links pull-right btn btn-success btn-tiny");$table_title_links=$table_title_links_container.html();$table_title_header_container.append($table_title_links);$table_title_header_container_text_padding=10;$table_title_header_container.find("a").each(function(){$table_title_header_container_text_padding=$table_title_header_container_text_padding+$(this).width()});$table_title_header_container.find("b").css("padding-left",$table_title_header_container_text_padding)},300);setTimeout(function(){$("a.table_title_links").on("click",function(){a()})},400)}$("td > a").on("click",function(){if($(this).attr("onclick")=="return add_attachment()"){}$("input[type=file]").each(function(){if(!$(this).parent("a").hasClass("file-input-wrapper")){$(this).bootstrapFileInput()}})})}setTimeout(function(){window.parent.$('a[data-refresh="true"]').find("i.fa").removeClass("fa-spin").css("color","#888")},400)})}$("aside").mCustomScrollbar({axis:"y",theme:"minimal"});if(c()&&window.parent.$("body#popup").length){$obj=window.parent.$("body#popup");$obj.css("margin","8px 4px 0 4px ").css("padding","0px 5px 0 5px").css("overflow-x","hidden");$obj.find("table").each(function(){$(this).addClass("table table-striped table-condensed").attr("style","width: 70% !important").attr("style","font-size: 97% !important");$(this).find("td").attr("style","border: 1px solid #ddd !important")});$obj.find("#filter_box input").attr("onkeyup","filter_match(this.value,'tr_tag',true);").focus();$obj.find('input[name="search"]').focus()}else{if($(location).attr("href").indexOf("standard_chooser.cgi")!=-1||$(location).attr("href").indexOf("webmin/third_chooser.cgi")!=-1){$("body").css("padding","10px 5px 0 5px");$("table tr.tr_tag").each(function(){$(this).addClass("row")});window.parent.$("#filter_box input").focus()}else{if($(location).attr("href").indexOf("chooser.cgi")!=-1&&($(location).attr("href").indexOf("user_chooser.cgi")==-1&&$(location).attr("href").indexOf("group_chooser.cgi")==-1)){$t=top.frames.topframe;$b=top.frames.bottomframe;typeof $t=="undefined"?$t=false:false;typeof $b=="undefined"?$b=false:false;if($t.document.getElementsByTagName("input").length){$t.document.getElementsByTagName("input")[0].setAttribute("onkeyup","filter_match(this.value,'tr_tag',true);")}if($t){setTimeout(function(){$t.document.getElementById("popup").style.padding="10px 5px 0 5px";$t.document.getElementsByTagName("table")[0].style.fontSize="97%";$t.document.getElementsByName("filter")[0].focus()},0)}}else{if($(location).attr("href").indexOf("user_chooser.cgi")!=-1||$(location).attr("href").indexOf("group_chooser.cgi")!=-1){if(location.search.indexOf("?multi=0")==-1){$l=top.frames[0];$rt=top.frames[1];$rb=top.frames[2];setTimeout(function(){if($l){var g=$l.document.getElementById("filter_box");if(g){$l.document.getElementById("popup").style.padding="10px 5px 0 5px";$l.document.getElementsByTagName("table")[0].style.fontSize="97%";$l.document.getElementsByName("filter")[0].focus()}}if($rt){typeof $rt_set=="undefined"?$rt_set=false:false;if($rt.document.getElementById("popup")){$rt.document.getElementById("popup").style.padding="11px 5px 0 5px"}if($rt.document.getElementsByTagName("table")){$rt.document.getElementsByTagName("table")[0].style.fontSize="97%";$rt_set=true}}if($rb){if($rb.document.getElementById("popup")){$rb.document.getElementById("popup").style.padding="11px 5px 0 5px"}}},0)}else{$obj=window.parent.$("body#popup");$obj.find(".mCustomScrollBox").css("padding-bottom","0");$obj.css("margin","8px 4px 0 4px ").css("padding","0px 5px 0 5px").css("overflow-x","hidden").css("padding-bottom","0");$obj.find("table").each(function(){$(this).addClass("table table-striped table-condensed").attr("style","width: 70% !important").attr("style","font-size: 97% !important");$(this).find("td").attr("style","border: 1px solid #ddd !important")});$obj.find("#filter_box input").focus()}}}}}$('.loader img[src$="images/loader.gif"]').contextmenu(dblrclick(function(g){f()}))});