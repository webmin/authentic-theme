/*! PhotoSwipe - v4.1.3 - 2019-01-08
* http://photoswipe.com
* Copyright (c) 2019 Dmitry Semenov; Licensed MIT */
(function(e,t){if(typeof define==="function"&&define.amd){define(t)}else if(typeof exports==="object"){module.exports=t()}else{e.PhotoSwipe=t()}})(this,function(){"use strict";var e=function(e,t,i,n){var o={features:null,bind:function(e,t,i,n){var o=(n?"remove":"add")+"EventListener";t=t.split(" ");for(var r=0;r<t.length;r++){if(t[r]){e[o](t[r],i,false)}}},isArray:function(e){return e instanceof Array},createEl:function(e,t){var i=document.createElement(t||"div");if(e){i.className=e}return i},getScrollY:function(){var e=window.pageYOffset;return e!==undefined?e:document.documentElement.scrollTop},unbind:function(e,t,i){o.bind(e,t,i,true)},removeClass:function(e,t){var i=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(i," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(e,t){if(!o.hasClass(e,t)){e.className+=(e.className?" ":"")+t}},hasClass:function(e,t){return e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},getChildByClass:function(e,t){var i=e.firstChild;while(i){if(o.hasClass(i,t)){return i}i=i.nextSibling}},arraySearch:function(e,t,i){var n=e.length;while(n--){if(e[n][i]===t){return n}}return-1},extend:function(e,t,i){for(var n in t){if(t.hasOwnProperty(n)){if(i&&e.hasOwnProperty(n)){continue}e[n]=t[n]}}},easing:{sine:{out:function(e){return Math.sin(e*(Math.PI/2))},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},cubic:{out:function(e){return--e*e*e+1}}},detectFeatures:function(){if(o.features){return o.features}var e=o.createEl(),t=e.style,i="",n={};n.oldIE=document.all&&!document.addEventListener;n.touch="ontouchstart"in window;if(window.requestAnimationFrame){n.raf=window.requestAnimationFrame;n.caf=window.cancelAnimationFrame}n.pointerEvent=!!window.PointerEvent||navigator.msPointerEnabled;if(!n.pointerEvent){var r=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);if(a&&a.length>0){a=parseInt(a[1],10);if(a>=1&&a<8){n.isOldIOSPhone=true}}}var l=r.match(/Android\s([0-9\.]*)/);var s=l?l[1]:0;s=parseFloat(s);if(s>=1){if(s<4.4){n.isOldAndroid=true}n.androidVersion=s}n.isMobileOpera=/opera mini|opera mobi/i.test(r)}var u=["transform","perspective","animationName"],f=["","webkit","Moz","ms","O"],c,d;for(var p=0;p<4;p++){i=f[p];for(var m=0;m<3;m++){c=u[m];d=i+(i?c.charAt(0).toUpperCase()+c.slice(1):c);if(!n[c]&&d in t){n[c]=d}}if(i&&!n.raf){i=i.toLowerCase();n.raf=window[i+"RequestAnimationFrame"];if(n.raf){n.caf=window[i+"CancelAnimationFrame"]||window[i+"CancelRequestAnimationFrame"]}}}if(!n.raf){var h=0;n.raf=function(e){var t=(new Date).getTime();var i=Math.max(0,16-(t-h));var n=window.setTimeout(function(){e(t+i)},i);h=t+i;return n};n.caf=function(e){clearTimeout(e)}}n.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect;o.features=n;return n}};o.detectFeatures();if(o.features.oldIE){o.bind=function(e,t,i,n){t=t.split(" ");var o=(n?"detach":"attach")+"Event",r,a=function(){i.handleEvent.call(i)};for(var l=0;l<t.length;l++){r=t[l];if(r){if(typeof i==="object"&&i.handleEvent){if(!n){i["oldIE"+r]=a}else{if(!i["oldIE"+r]){return false}}e[o]("on"+r,i["oldIE"+r])}else{e[o]("on"+r,i)}}}}}var r=this;var a=25,l=3;var s={allowPanToNext:true,spacing:.12,bgOpacity:1,mouseUsed:false,loop:true,pinchToClose:true,closeOnScroll:true,closeOnVerticalDrag:true,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:false,focus:true,escKey:true,arrowKeys:true,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(e){return e.tagName==="A"},getDoubleTapZoom:function(e,t){if(e){return 1}else{return t.initialZoomLevel<.7?1:1.33}},maxSpreadZoom:1.33,modal:true,scaleMode:"fit"};o.extend(s,n);var u=function(){return{x:0,y:0}};var f,c,d,p,m,h,v=u(),g=u(),x=u(),w,y,b,I={},C,T,E,D,S,_,M=0,F={},O=u(),k,A,R=0,L,P,Z,z,N,U,K=true,H,W=[],B,Y,G,q,V,X,j,$={},J=false,Q,ee=function(e,t){o.extend(r,t.publicMethods);W.push(e)},te=function(e){var t=oi();if(e>t-1){return e-t}else if(e<0){return t+e}return e},ie={},ne=function(e,t){if(!ie[e]){ie[e]=[]}return ie[e].push(t)},oe=function(e){var t=ie[e];if(t){var i=Array.prototype.slice.call(arguments);i.shift();for(var n=0;n<t.length;n++){t[n].apply(r,i)}}},re=function(){return(new Date).getTime()},ae=function(e){wt=e;r.bg.style.opacity=e*s.bgOpacity},le=function(e,t,i,n,o){if(!J||o&&o!==r.currItem){n=n/(o?o.fitRatio:r.currItem.fitRatio)}e[N]=E+t+"px, "+i+"px"+D+" scale("+n+")"},se=function(e){if(dt){if(e){if(C>r.currItem.fitRatio){if(!J){di(r.currItem,false,true);J=true}}else{if(J){di(r.currItem);J=false}}}le(dt,x.x,x.y,C)}},ue=function(e){if(e.container){le(e.container.style,e.initialPosition.x,e.initialPosition.y,e.initialZoomLevel,e)}},fe=function(e,t){t[N]=E+e+"px, 0px"+D},ce=function(e,t){if(!s.loop&&t){var i=p+(O.x*M-e)/O.x,n=Math.round(e-ct.x);if(i<0&&n>0||i>=oi()-1&&n<0){e=ct.x+n*s.mainScrollEndFriction}}ct.x=e;fe(e,m)},de=function(e,t){var i=mt[e]-F[e];return g[e]+v[e]+i-i*(t/T)},pe=function(e,t){e.x=t.x;e.y=t.y;if(t.id){e.id=t.id}},me=function(e){e.x=Math.round(e.x);e.y=Math.round(e.y)},he=null,ve=function(){if(he){o.unbind(document,"mousemove",ve);o.addClass(e,"pswp--has_mouse");s.mouseUsed=true;oe("mouseUsed")}he=setTimeout(function(){he=null},100)},ge=function(){o.bind(document,"keydown",r);if(j.transform){o.bind(r.scrollWrap,"click",r)}if(!s.mouseUsed){o.bind(document,"mousemove",ve)}o.bind(window,"resize scroll orientationchange",r);oe("bindEvents")},xe=function(){o.unbind(window,"resize scroll orientationchange",r);o.unbind(window,"scroll",b.scroll);o.unbind(document,"keydown",r);o.unbind(document,"mousemove",ve);if(j.transform){o.unbind(r.scrollWrap,"click",r)}if(et){o.unbind(window,w,r)}clearTimeout(Q);oe("unbindEvents")},we=function(e,t){var i=si(r.currItem,I,e);if(t){ft=i}return i},ye=function(e){if(!e){e=r.currItem}return e.initialZoomLevel},be=function(e){if(!e){e=r.currItem}return e.w>0?s.maxSpreadZoom:1},Ie=function(e,t,i,n){if(n===r.currItem.initialZoomLevel){i[e]=r.currItem.initialPosition[e];return true}else{i[e]=de(e,n);if(i[e]>t.min[e]){i[e]=t.min[e];return true}else if(i[e]<t.max[e]){i[e]=t.max[e];return true}}return false},Ce=function(){if(N){var t=j.perspective&&!H;E="translate"+(t?"3d(":"(");D=j.perspective?", 0px)":")";return}N="left";o.addClass(e,"pswp--ie");fe=function(e,t){t.left=e+"px"};ue=function(e){var t=e.fitRatio>1?1:e.fitRatio,i=e.container.style,n=t*e.w,o=t*e.h;i.width=n+"px";i.height=o+"px";i.left=e.initialPosition.x+"px";i.top=e.initialPosition.y+"px"};se=function(){if(dt){var e=dt,t=r.currItem,i=t.fitRatio>1?1:t.fitRatio,n=i*t.w,o=i*t.h;e.width=n+"px";e.height=o+"px";e.left=x.x+"px";e.top=x.y+"px"}}},Te=function(e){var t="";if(s.escKey&&e.keyCode===27){t="close"}else if(s.arrowKeys){if(e.keyCode===37){t="prev"}else if(e.keyCode===39){t="next"}}if(t){if(!e.ctrlKey&&!e.altKey&&!e.shiftKey&&!e.metaKey){if(e.preventDefault){e.preventDefault()}else{e.returnValue=false}r[t]()}}},Ee=function(e){if(!e){return}if(nt||it||pt||Xe){e.preventDefault();e.stopPropagation()}},De=function(){r.setScrollOffset(0,o.getScrollY())};var Se={},_e=0,Me=function(e){if(Se[e]){if(Se[e].raf){Y(Se[e].raf)}_e--;delete Se[e]}},Fe=function(e){if(Se[e]){Me(e)}if(!Se[e]){_e++;Se[e]={}}},Oe=function(){for(var e in Se){if(Se.hasOwnProperty(e)){Me(e)}}},ke=function(e,t,i,n,o,r,a){var l=re(),s;Fe(e);var u=function(){if(Se[e]){s=re()-l;if(s>=n){Me(e);r(i);if(a){a()}return}r((i-t)*o(s/n)+t);Se[e].raf=B(u)}};u()};var Ae={shout:oe,listen:ne,viewportSize:I,options:s,isMainScrollAnimating:function(){return pt},getZoomLevel:function(){return C},getCurrentIndex:function(){return p},isDragging:function(){return et},isZooming:function(){return lt},setScrollOffset:function(e,t){F.x=e;X=F.y=t;oe("updateScrollOffset",F)},applyZoomPan:function(e,t,i,n){x.x=t;x.y=i;C=e;se(n)},init:function(){if(f||c){return}var i;r.framework=o;r.template=e;r.bg=o.getChildByClass(e,"pswp__bg");G=e.className;f=true;j=o.detectFeatures();B=j.raf;Y=j.caf;N=j.transform;V=j.oldIE;r.scrollWrap=o.getChildByClass(e,"pswp__scroll-wrap");r.container=o.getChildByClass(r.scrollWrap,"pswp__container");m=r.container.style;r.itemHolders=k=[{el:r.container.children[0],wrap:0,index:-1},{el:r.container.children[1],wrap:0,index:-1},{el:r.container.children[2],wrap:0,index:-1}];k[0].el.style.display=k[2].el.style.display="none";Ce();b={resize:r.updateSize,orientationchange:function(){clearTimeout(Q);Q=setTimeout(function(){if(I.x!==r.scrollWrap.clientWidth){r.updateSize()}},500)},scroll:De,keydown:Te,click:Ee};var n=j.isOldIOSPhone||j.isOldAndroid||j.isMobileOpera;if(!j.animationName||!j.transform||n){s.showAnimationDuration=s.hideAnimationDuration=0}for(i=0;i<W.length;i++){r["init"+W[i]]()}if(t){var a=r.ui=new t(r,o);a.init()}oe("firstUpdate");p=p||s.index||0;if(isNaN(p)||p<0||p>=oi()){p=0}r.currItem=ni(p);if(j.isOldIOSPhone||j.isOldAndroid){K=false}e.setAttribute("aria-hidden","false");if(s.modal){if(!K){e.style.position="absolute";e.style.top=o.getScrollY()+"px"}else{e.style.position="fixed"}}if(X===undefined){oe("initialLayout");X=q=o.getScrollY()}var u="pswp--open ";if(s.mainClass){u+=s.mainClass+" "}if(s.showHideOpacity){u+="pswp--animate_opacity "}u+=H?"pswp--touch":"pswp--notouch";u+=j.animationName?" pswp--css_animation":"";u+=j.svg?" pswp--svg":"";o.addClass(e,u);r.updateSize();h=-1;R=null;for(i=0;i<l;i++){fe((i+h)*O.x,k[i].el.style)}if(!V){o.bind(r.scrollWrap,y,r)}ne("initialZoomInEnd",function(){r.setContent(k[0],p-1);r.setContent(k[2],p+1);k[0].el.style.display=k[2].el.style.display="block";if(s.focus){e.focus()}ge()});r.setContent(k[1],p);r.updateCurrItem();oe("afterInit");if(!K){S=setInterval(function(){if(!_e&&!et&&!lt&&C===r.currItem.initialZoomLevel){r.updateSize()}},1e3)}o.addClass(e,"pswp--visible")},close:function(){if(!f){return}f=false;c=true;oe("close");xe();jt(r.currItem,null,true,r.destroy)},destroy:function(){oe("destroy");if(Xt){clearTimeout(Xt)}e.setAttribute("aria-hidden","true");e.className=G;if(S){clearInterval(S)}o.unbind(r.scrollWrap,y,r);o.unbind(window,"scroll",r);Tt();Oe();ie=null},panTo:function(e,t,i){if(!i){if(e>ft.min.x){e=ft.min.x}else if(e<ft.max.x){e=ft.max.x}if(t>ft.min.y){t=ft.min.y}else if(t<ft.max.y){t=ft.max.y}}x.x=e;x.y=t;se()},handleEvent:function(e){e=e||window.event;if(b[e.type]){b[e.type](e)}},goTo:function(e){e=te(e);var t=e-p;R=t;p=e;r.currItem=ni(p);M-=t;ce(O.x*M);Oe();pt=false;r.updateCurrItem()},next:function(){r.goTo(p+1)},prev:function(){r.goTo(p-1)},updateCurrZoomItem:function(e){if(e){oe("beforeChange",0)}if(k[1].el.children.length){var t=k[1].el.children[0];if(o.hasClass(t,"pswp__zoom-wrap")){dt=t.style}else{dt=null}}else{dt=null}ft=r.currItem.bounds;T=C=r.currItem.initialZoomLevel;x.x=ft.center.x;x.y=ft.center.y;if(e){oe("afterChange")}},invalidateCurrItems:function(){_=true;for(var e=0;e<l;e++){if(k[e].item){k[e].item.needsUpdate=true}}},updateCurrItem:function(e){if(R===0){return}var t=Math.abs(R),i;if(e&&t<2){return}r.currItem=ni(p);J=false;oe("beforeChange",R);if(t>=l){h+=R+(R>0?-l:l);t=l}for(var n=0;n<t;n++){if(R>0){i=k.shift();k[l-1]=i;h++;fe((h+2)*O.x,i.el.style);r.setContent(i,p-t+n+1+1)}else{i=k.pop();k.unshift(i);h--;fe(h*O.x,i.el.style);r.setContent(i,p+t-n-1-1)}}if(dt&&Math.abs(R)===1){var o=ni(A);if(o.initialZoomLevel!==C){si(o,I);di(o);ue(o)}}R=0;r.updateCurrZoomItem();A=p;oe("afterChange")},updateSize:function(t){if(!K&&s.modal){var i=o.getScrollY();if(X!==i){e.style.top=i+"px";X=i}if(!t&&$.x===window.innerWidth&&$.y===window.innerHeight){return}$.x=window.innerWidth;$.y=window.innerHeight;e.style.height=$.y+"px"}I.x=r.scrollWrap.clientWidth;I.y=r.scrollWrap.clientHeight;De();O.x=I.x+Math.round(I.x*s.spacing);O.y=I.y;ce(O.x*M);oe("beforeResize");if(h!==undefined){var n,a,u;for(var f=0;f<l;f++){n=k[f];fe((f+h)*O.x,n.el.style);u=p+f-1;if(s.loop&&oi()>2){u=te(u)}a=ni(u);if(a&&(_||a.needsUpdate||!a.bounds)){r.cleanSlide(a);r.setContent(n,u);if(f===1){r.currItem=a;r.updateCurrZoomItem(true)}a.needsUpdate=false}else if(n.index===-1&&u>=0){r.setContent(n,u)}if(a&&a.container){si(a,I);di(a);ue(a)}}_=false}T=C=r.currItem.initialZoomLevel;ft=r.currItem.bounds;if(ft){x.x=ft.center.x;x.y=ft.center.y;se(true)}oe("resize")},zoomTo:function(e,t,i,n,r){if(t){T=C;mt.x=Math.abs(t.x)-x.x;mt.y=Math.abs(t.y)-x.y;pe(g,x)}var a=we(e,false),l={};Ie("x",a,l,e);Ie("y",a,l,e);var s=C;var u={x:x.x,y:x.y};me(l);var f=function(t){if(t===1){C=e;x.x=l.x;x.y=l.y}else{C=(e-s)*t+s;x.x=(l.x-u.x)*t+u.x;x.y=(l.y-u.y)*t+u.y}if(r){r(t)}se(t===1)};if(i){ke("customZoomTo",0,1,i,n||o.easing.sine.inOut,f)}else{f(1)}}};var Re=30,Le=10;var Pe,Ze,ze={},Ne={},Ue={},Ke={},He={},We=[],Be={},Ye,Ge=[],qe={},Ve,Xe,je,$e=0,Je=u(),Qe=0,et,tt,it,nt,ot,rt,at,lt,st,ut,ft,ct=u(),dt,pt,mt=u(),ht=u(),vt,gt,xt,wt,yt,bt=function(e,t){return e.x===t.x&&e.y===t.y},It=function(e,t){return Math.abs(e.x-t.x)<a&&Math.abs(e.y-t.y)<a},Ct=function(e,t){qe.x=Math.abs(e.x-t.x);qe.y=Math.abs(e.y-t.y);return Math.sqrt(qe.x*qe.x+qe.y*qe.y)},Tt=function(){if(ot){Y(ot);ot=null}},Et=function(){if(et){ot=B(Et);Ht()}},Dt=function(){return!(s.scaleMode==="fit"&&C===r.currItem.initialZoomLevel)},St=function(e,t){if(!e||e===document){return false}if(e.getAttribute("class")&&e.getAttribute("class").indexOf("pswp__scroll-wrap")>-1){return false}if(t(e)){return e}return St(e.parentNode,t)},_t={},Mt=function(e,t){_t.prevent=!St(e.target,s.isClickableElement);oe("preventDragEvent",e,t,_t);return _t.prevent},Ft=function(e,t){t.x=e.pageX;t.y=e.pageY;t.id=e.identifier;return t},Ot=function(e,t,i){i.x=(e.x+t.x)*.5;i.y=(e.y+t.y)*.5},kt=function(e,t,i){if(e-Ze>50){var n=Ge.length>2?Ge.shift():{};n.x=t;n.y=i;Ge.push(n);Ze=e}},At=function(){var e=x.y-r.currItem.initialPosition.y;return 1-Math.abs(e/(I.y/2))},Rt={},Lt={},Pt=[],Zt,zt=function(e){while(Pt.length>0){Pt.pop()}if(!U){if(e.type.indexOf("touch")>-1){if(e.touches&&e.touches.length>0){Pt[0]=Ft(e.touches[0],Rt);if(e.touches.length>1){Pt[1]=Ft(e.touches[1],Lt)}}}else{Rt.x=e.pageX;Rt.y=e.pageY;Rt.id="";Pt[0]=Rt}}else{Zt=0;We.forEach(function(e){if(Zt===0){Pt[0]=e}else if(Zt===1){Pt[1]=e}Zt++})}return Pt},Nt=function(e,t){var i,n=0,o=x[e]+t[e],a,l=t[e]>0,u=ct.x+t.x,f=ct.x-Be.x,c,d;if(o>ft.min[e]||o<ft.max[e]){i=s.panEndFriction}else{i=1}o=x[e]+t[e]*i;if(s.allowPanToNext||C===r.currItem.initialZoomLevel){if(!dt){d=u}else if(vt==="h"&&e==="x"&&!it){if(l){if(o>ft.min[e]){i=s.panEndFriction;n=ft.min[e]-o;a=ft.min[e]-g[e]}if((a<=0||f<0)&&oi()>1){d=u;if(f<0&&u>Be.x){d=Be.x}}else{if(ft.min.x!==ft.max.x){c=o}}}else{if(o<ft.max[e]){i=s.panEndFriction;n=o-ft.max[e];a=g[e]-ft.max[e]}if((a<=0||f>0)&&oi()>1){d=u;if(f>0&&u<Be.x){d=Be.x}}else{if(ft.min.x!==ft.max.x){c=o}}}}if(e==="x"){if(d!==undefined){ce(d,true);if(d===Be.x){rt=false}else{rt=true}}if(ft.min.x!==ft.max.x){if(c!==undefined){x.x=c}else if(!rt){x.x+=t.x*i}}return d!==undefined}}if(!pt){if(!rt){if(C>r.currItem.fitRatio){x[e]+=t[e]*i}}}},Ut=function(e){if(e.type==="mousedown"&&e.button>0){return}if(ti){e.preventDefault();return}if(je&&e.type==="mousedown"){return}if(Mt(e,true)){e.preventDefault()}oe("pointerDown");if(U){var t=o.arraySearch(We,e.pointerId,"id");if(t<0){t=We.length}We[t]={x:e.pageX,y:e.pageY,id:e.pointerId}}var i=zt(e),n=i.length;at=null;Oe();if(!et||n===1){et=gt=true;o.bind(window,w,r);Ve=yt=xt=Xe=rt=nt=tt=it=false;vt=null;oe("firstTouchStart",i);pe(g,x);v.x=v.y=0;pe(Ke,i[0]);pe(He,Ke);Be.x=O.x*M;Ge=[{x:Ke.x,y:Ke.y}];Ze=Pe=re();we(C,true);Tt();Et()}if(!lt&&n>1&&!pt&&!rt){T=C;it=false;lt=tt=true;v.y=v.x=0;pe(g,x);pe(ze,i[0]);pe(Ne,i[1]);Ot(ze,Ne,ht);mt.x=Math.abs(ht.x)-x.x;mt.y=Math.abs(ht.y)-x.y;st=ut=Ct(ze,Ne)}},Kt=function(e){e.preventDefault();if(U){var t=o.arraySearch(We,e.pointerId,"id");if(t>-1){var i=We[t];i.x=e.pageX;i.y=e.pageY}}if(et){var n=zt(e);if(!vt&&!nt&&!lt){if(ct.x!==O.x*M){vt="h"}else{var r=Math.abs(n[0].x-Ke.x)-Math.abs(n[0].y-Ke.y);if(Math.abs(r)>=Le){vt=r>0?"h":"v";at=n}}}else{at=n}}},Ht=function(){if(!at){return}var e=at.length;if(e===0){return}pe(ze,at[0]);Ue.x=ze.x-Ke.x;Ue.y=ze.y-Ke.y;if(lt&&e>1){Ke.x=ze.x;Ke.y=ze.y;if(!Ue.x&&!Ue.y&&bt(at[1],Ne)){return}pe(Ne,at[1]);if(!it){it=true;oe("zoomGestureStarted")}var t=Ct(ze,Ne);var i=qt(t);if(i>r.currItem.initialZoomLevel+r.currItem.initialZoomLevel/15){yt=true}var n=1,o=ye(),a=be();if(i<o){if(s.pinchToClose&&!yt&&T<=r.currItem.initialZoomLevel){var l=o-i;var u=1-l/(o/1.2);ae(u);oe("onPinchClose",u);xt=true}else{n=(o-i)/o;if(n>1){n=1}i=o-n*(o/3)}}else if(i>a){n=(i-a)/(o*6);if(n>1){n=1}i=a+n*o}if(n<0){n=0}st=t;Ot(ze,Ne,Je);v.x+=Je.x-ht.x;v.y+=Je.y-ht.y;pe(ht,Je);x.x=de("x",i);x.y=de("y",i);Ve=i>C;C=i;se()}else{if(!vt){return}if(gt){gt=false;if(Math.abs(Ue.x)>=Le){Ue.x-=at[0].x-He.x}if(Math.abs(Ue.y)>=Le){Ue.y-=at[0].y-He.y}}Ke.x=ze.x;Ke.y=ze.y;if(Ue.x===0&&Ue.y===0){return}if(vt==="v"&&s.closeOnVerticalDrag){if(!Dt()){v.y+=Ue.y;x.y+=Ue.y;var f=At();Xe=true;oe("onVerticalDrag",f);ae(f);se();return}}kt(re(),ze.x,ze.y);nt=true;ft=r.currItem.bounds;var c=Nt("x",Ue);if(!c){Nt("y",Ue);me(x);se()}}},Wt=function(e){if(j.isOldAndroid){if(je&&e.type==="mouseup"){return}if(e.type.indexOf("touch")>-1){clearTimeout(je);je=setTimeout(function(){je=0},600)}}oe("pointerUp");if(Mt(e,false)){e.preventDefault()}var t;if(U){var i=o.arraySearch(We,e.pointerId,"id");if(i>-1){t=We.splice(i,1)[0];if(navigator.msPointerEnabled){var n={4:"mouse",2:"touch",3:"pen"};t.type=n[e.pointerType];if(!t.type){t.type=e.pointerType||"mouse"}}else{t.type=e.pointerType||"mouse"}}}var a=zt(e),l,u=a.length;if(e.type==="mouseup"){u=0}if(u===2){at=null;return true}if(u===1){pe(He,a[0])}if(u===0&&!vt&&!pt){if(!t){if(e.type==="mouseup"){t={x:e.pageX,y:e.pageY,type:"mouse"}}else if(e.changedTouches&&e.changedTouches[0]){t={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:"touch"}}}oe("touchRelease",e,t)}var f=-1;if(u===0){et=false;o.unbind(window,w,r);Tt();if(lt){f=0}else if(Qe!==-1){f=re()-Qe}}Qe=u===1?re():-1;if(f!==-1&&f<150){l="zoom"}else{l="swipe"}if(lt&&u<2){lt=false;if(u===1){l="zoomPointerUp"}oe("zoomGestureEnded")}at=null;if(!nt&&!it&&!pt&&!Xe){return}Oe();if(!Ye){Ye=Bt()}Ye.calculateSwipeSpeed("x");if(Xe){var c=At();if(c<s.verticalDragRange){r.close()}else{var d=x.y,p=wt;ke("verticalDrag",0,1,300,o.easing.cubic.out,function(e){x.y=(r.currItem.initialPosition.y-d)*e+d;ae((1-p)*e+p);se()});oe("onVerticalDrag",1)}return}if((rt||pt)&&u===0){var m=Gt(l,Ye);if(m){return}l="zoomPointerUp"}if(pt){return}if(l!=="swipe"){Vt();return}if(!rt&&C>r.currItem.fitRatio){Yt(Ye)}},Bt=function(){var e,t;var i={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(n){if(Ge.length>1){e=re()-Ze+50;t=Ge[Ge.length-2][n]}else{e=re()-Pe;t=He[n]}i.lastFlickOffset[n]=Ke[n]-t;i.lastFlickDist[n]=Math.abs(i.lastFlickOffset[n]);if(i.lastFlickDist[n]>20){i.lastFlickSpeed[n]=i.lastFlickOffset[n]/e}else{i.lastFlickSpeed[n]=0}if(Math.abs(i.lastFlickSpeed[n])<.1){i.lastFlickSpeed[n]=0}i.slowDownRatio[n]=.95;i.slowDownRatioReverse[n]=1-i.slowDownRatio[n];i.speedDecelerationRatio[n]=1},calculateOverBoundsAnimOffset:function(e,t){if(!i.backAnimStarted[e]){if(x[e]>ft.min[e]){i.backAnimDestination[e]=ft.min[e]}else if(x[e]<ft.max[e]){i.backAnimDestination[e]=ft.max[e]}if(i.backAnimDestination[e]!==undefined){i.slowDownRatio[e]=.7;i.slowDownRatioReverse[e]=1-i.slowDownRatio[e];if(i.speedDecelerationRatioAbs[e]<.05){i.lastFlickSpeed[e]=0;i.backAnimStarted[e]=true;ke("bounceZoomPan"+e,x[e],i.backAnimDestination[e],t||300,o.easing.sine.out,function(t){x[e]=t;se()})}}}},calculateAnimOffset:function(e){if(!i.backAnimStarted[e]){i.speedDecelerationRatio[e]=i.speedDecelerationRatio[e]*(i.slowDownRatio[e]+i.slowDownRatioReverse[e]-i.slowDownRatioReverse[e]*i.timeDiff/10);i.speedDecelerationRatioAbs[e]=Math.abs(i.lastFlickSpeed[e]*i.speedDecelerationRatio[e]);i.distanceOffset[e]=i.lastFlickSpeed[e]*i.speedDecelerationRatio[e]*i.timeDiff;x[e]+=i.distanceOffset[e]}},panAnimLoop:function(){if(Se.zoomPan){Se.zoomPan.raf=B(i.panAnimLoop);i.now=re();i.timeDiff=i.now-i.lastNow;i.lastNow=i.now;i.calculateAnimOffset("x");i.calculateAnimOffset("y");se();i.calculateOverBoundsAnimOffset("x");i.calculateOverBoundsAnimOffset("y");if(i.speedDecelerationRatioAbs.x<.05&&i.speedDecelerationRatioAbs.y<.05){x.x=Math.round(x.x);x.y=Math.round(x.y);se();Me("zoomPan");return}}}};return i},Yt=function(e){e.calculateSwipeSpeed("y");ft=r.currItem.bounds;e.backAnimDestination={};e.backAnimStarted={};if(Math.abs(e.lastFlickSpeed.x)<=.05&&Math.abs(e.lastFlickSpeed.y)<=.05){e.speedDecelerationRatioAbs.x=e.speedDecelerationRatioAbs.y=0;e.calculateOverBoundsAnimOffset("x");e.calculateOverBoundsAnimOffset("y");return true}Fe("zoomPan");e.lastNow=re();e.panAnimLoop()},Gt=function(e,t){var i;if(!pt){$e=p}var n;if(e==="swipe"){var a=Ke.x-He.x,l=t.lastFlickDist.x<10;if(a>Re&&(l||t.lastFlickOffset.x>20)){n=-1}else if(a<-Re&&(l||t.lastFlickOffset.x<-20)){n=1}}var u;if(n){p+=n;if(p<0){p=s.loop?oi()-1:0;u=true}else if(p>=oi()){p=s.loop?0:oi()-1;u=true}if(!u||s.loop){R+=n;M-=n;i=true}}var f=O.x*M;var c=Math.abs(f-ct.x);var d;if(!i&&f>ct.x!==t.lastFlickSpeed.x>0){d=333}else{d=Math.abs(t.lastFlickSpeed.x)>0?c/Math.abs(t.lastFlickSpeed.x):333;d=Math.min(d,400);d=Math.max(d,250)}if($e===p){i=false}pt=true;oe("mainScrollAnimStart");ke("mainScroll",ct.x,f,d,o.easing.cubic.out,ce,function(){Oe();pt=false;$e=-1;if(i||$e!==p){r.updateCurrItem()}oe("mainScrollAnimComplete")});if(i){r.updateCurrItem(true)}return i},qt=function(e){return 1/ut*e*T},Vt=function(){var e=C,t=ye(),i=be();if(C<t){e=t}else if(C>i){e=i}var n=1,a,l=wt;if(xt&&!Ve&&!yt&&C<t){r.close();return true}if(xt){a=function(e){ae((n-l)*e+l)}}r.zoomTo(e,0,200,o.easing.cubic.out,a);return true};ee("Gestures",{publicMethods:{initGestures:function(){var e=function(e,t,i,n,o){L=e+t;P=e+i;Z=e+n;if(o){z=e+o}else{z=""}};U=j.pointerEvent;if(U&&j.touch){j.touch=false}if(U){if(navigator.msPointerEnabled){e("MSPointer","Down","Move","Up","Cancel")}else{e("pointer","down","move","up","cancel")}}else if(j.touch){e("touch","start","move","end","cancel");H=true}else{e("mouse","down","move","up")}w=P+" "+Z+" "+z;y=L;if(U&&!H){H=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1}r.likelyTouchDevice=H;b[L]=Ut;b[P]=Kt;b[Z]=Wt;if(z){b[z]=b[Z]}if(j.touch){y+=" mousedown";w+=" mousemove mouseup";b.mousedown=b[L];b.mousemove=b[P];b.mouseup=b[Z]}if(!H){s.allowPanToNext=false}}}});var Xt,jt=function(t,i,n,a){if(Xt){clearTimeout(Xt)}ti=true;ei=true;var l;if(t.initialLayout){l=t.initialLayout;t.initialLayout=null}else{l=s.getThumbBoundsFn&&s.getThumbBoundsFn(p)}var u=n?s.hideAnimationDuration:s.showAnimationDuration;var f=function(){Me("initialZoom");if(!n){ae(1);if(i){i.style.display="block"}o.addClass(e,"pswp--animated-in");oe("initialZoom"+(n?"OutEnd":"InEnd"))}else{r.template.removeAttribute("style");r.bg.removeAttribute("style")}if(a){a()}ti=false};if(!u||!l||l.x===undefined){oe("initialZoom"+(n?"Out":"In"));C=t.initialZoomLevel;pe(x,t.initialPosition);se();e.style.opacity=n?0:1;ae(1);if(u){setTimeout(function(){f()},u)}else{f()}return}var c=function(){var i=d,a=!r.currItem.src||r.currItem.loadError||s.showHideOpacity;if(t.miniImg){t.miniImg.style.webkitBackfaceVisibility="hidden"}if(!n){C=l.w/t.w;x.x=l.x;x.y=l.y-q;r[a?"template":"bg"].style.opacity=.001;se()}Fe("initialZoom");if(n&&!i){o.removeClass(e,"pswp--animated-in")}if(a){if(n){o[(i?"remove":"add")+"Class"](e,"pswp--animate_opacity")}else{setTimeout(function(){o.addClass(e,"pswp--animate_opacity")},30)}}Xt=setTimeout(function(){oe("initialZoom"+(n?"Out":"In"));if(!n){C=t.initialZoomLevel;pe(x,t.initialPosition);se();ae(1);if(a){e.style.opacity=1}else{ae(1)}Xt=setTimeout(f,u+20)}else{var r=l.w/t.w,s={x:x.x,y:x.y},c=C,d=wt,p=function(t){if(t===1){C=r;x.x=l.x;x.y=l.y-X}else{C=(r-c)*t+c;x.x=(l.x-s.x)*t+s.x;x.y=(l.y-X-s.y)*t+s.y}se();if(a){e.style.opacity=1-t}else{ae(d-t*d)}};if(i){ke("initialZoom",0,1,u,o.easing.cubic.out,p,f)}else{p(1);Xt=setTimeout(f,u+20)}}},n?25:90)};c()};var $t,Jt={},Qt=[],ei,ti,ii={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:false,preload:[1,1],getNumItemsFn:function(){return $t.length}};var ni,oi,ri,ai=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},li=function(e,t,i){var n=e.bounds;n.center.x=Math.round((Jt.x-t)/2);n.center.y=Math.round((Jt.y-i)/2)+e.vGap.top;n.max.x=t>Jt.x?Math.round(Jt.x-t):n.center.x;n.max.y=i>Jt.y?Math.round(Jt.y-i)+e.vGap.top:n.center.y;n.min.x=t>Jt.x?0:n.center.x;n.min.y=i>Jt.y?e.vGap.top:n.center.y},si=function(e,t,i){if(e.src&&!e.loadError){var n=!i;if(n){if(!e.vGap){e.vGap={top:0,bottom:0}}oe("parseVerticalMargin",e)}Jt.x=t.x;Jt.y=t.y-e.vGap.top-e.vGap.bottom;if(n){var o=Jt.x/e.w;var r=Jt.y/e.h;e.fitRatio=o<r?o:r;var a=s.scaleMode;if(a==="orig"){i=1}else if(a==="fit"){i=e.fitRatio}if(i>1){i=1}e.initialZoomLevel=i;if(!e.bounds){e.bounds=ai()}}if(!i){return}li(e,e.w*i,e.h*i);if(n&&i===e.initialZoomLevel){e.initialPosition=e.bounds.center}return e.bounds}else{e.w=e.h=0;e.initialZoomLevel=e.fitRatio=1;e.bounds=ai();e.initialPosition=e.bounds.center;return e.bounds}},ui=function(e,t,i,n,o,a){if(t.loadError){return}if(n){t.imageAppended=true;di(t,n,t===r.currItem&&J);i.appendChild(n);if(a){setTimeout(function(){if(t&&t.loaded&&t.placeholder){t.placeholder.style.display="none";t.placeholder=null}},500)}}},fi=function(e){e.loading=true;e.loaded=false;var t=e.img=o.createEl("pswp__img","img");var i=function(){e.loading=false;e.loaded=true;if(e.loadComplete){e.loadComplete(e)}else{e.img=null}t.onload=t.onerror=null;t=null};t.onload=i;t.onerror=function(){e.loadError=true;i()};t.src=e.src;return t},ci=function(e,t){if(e.src&&e.loadError&&e.container){if(t){e.container.innerHTML=""}e.container.innerHTML=s.errorMsg.replace("%url%",e.src);return true}},di=function(e,t,i){if(!e.src){return}if(!t){t=e.container.lastChild}var n=i?e.w:Math.round(e.w*e.fitRatio),o=i?e.h:Math.round(e.h*e.fitRatio);if(e.placeholder&&!e.loaded){e.placeholder.style.width=n+"px";e.placeholder.style.height=o+"px"}t.style.width=n+"px";t.style.height=o+"px"},pi=function(){if(Qt.length){var e;for(var t=0;t<Qt.length;t++){e=Qt[t];if(e.holder.index===e.index){ui(e.index,e.item,e.baseDiv,e.img,false,e.clearPlaceholder)}}Qt=[]}};ee("Controller",{publicMethods:{lazyLoadItem:function(e){e=te(e);var t=ni(e);if(!t||(t.loaded||t.loading)&&!_){return}oe("gettingData",e,t);if(!t.src){return}fi(t)},initController:function(){o.extend(s,ii,true);r.items=$t=i;ni=r.getItemAt;oi=s.getNumItemsFn;ri=s.loop;if(oi()<3){s.loop=false}ne("beforeChange",function(e){var t=s.preload,i=e===null?true:e>=0,n=Math.min(t[0],oi()),o=Math.min(t[1],oi()),a;for(a=1;a<=(i?o:n);a++){r.lazyLoadItem(p+a)}for(a=1;a<=(i?n:o);a++){r.lazyLoadItem(p-a)}});ne("initialLayout",function(){r.currItem.initialLayout=s.getThumbBoundsFn&&s.getThumbBoundsFn(p)});ne("mainScrollAnimComplete",pi);ne("initialZoomInEnd",pi);ne("destroy",function(){var e;for(var t=0;t<$t.length;t++){e=$t[t];if(e.container){e.container=null}if(e.placeholder){e.placeholder=null}if(e.img){e.img=null}if(e.preloader){e.preloader=null}if(e.loadError){e.loaded=e.loadError=false}}Qt=null})},getItemAt:function(e){if(e>=0){return $t[e]!==undefined?$t[e]:false}return false},allowProgressiveImg:function(){return s.forceProgressiveLoading||!H||s.mouseUsed||screen.width>1200},setContent:function(e,t){if(s.loop){t=te(t)}var i=r.getItemAt(e.index);if(i){i.container=null}var n=r.getItemAt(t),a;if(!n){e.el.innerHTML="";return}oe("gettingData",t,n);e.index=t;e.item=n;var l=n.container=o.createEl("pswp__zoom-wrap");if(!n.src&&n.html){if(n.html.tagName){l.appendChild(n.html)}else{l.innerHTML=n.html}}ci(n);si(n,I);if(n.src&&!n.loadError&&!n.loaded){n.loadComplete=function(i){if(!f){return}if(e&&e.index===t){if(ci(i,true)){i.loadComplete=i.img=null;si(i,I);ue(i);if(e.index===p){r.updateCurrZoomItem()}return}if(!i.imageAppended){if(j.transform&&(pt||ti)){Qt.push({item:i,baseDiv:l,img:i.img,index:t,holder:e,clearPlaceholder:true})}else{ui(t,i,l,i.img,pt||ti,true)}}else{if(!ti&&i.placeholder){i.placeholder.style.display="none";i.placeholder=null}}}i.loadComplete=null;i.img=null;oe("imageLoadComplete",t,i)};if(o.features.transform){var u="pswp__img pswp__img--placeholder";u+=n.msrc?"":" pswp__img--placeholder--blank";var c=o.createEl(u,n.msrc?"img":"");if(n.msrc){c.src=n.msrc}di(n,c);l.appendChild(c);n.placeholder=c}if(!n.loading){fi(n)}if(r.allowProgressiveImg()){if(!ei&&j.transform){Qt.push({item:n,baseDiv:l,img:n.img,index:t,holder:e})}else{ui(t,n,l,n.img,true,true)}}}else if(n.src&&!n.loadError){a=o.createEl("pswp__img","img");a.style.opacity=1;a.src=n.src;di(n,a);ui(t,n,l,a,true)}if(!ei&&t===p){dt=l.style;jt(n,a||n.img)}else{ue(n)}e.el.innerHTML="";e.el.appendChild(l)},cleanSlide:function(e){if(e.img){e.img.onload=e.img.onerror=null}e.loaded=e.loading=e.img=e.imageAppended=false}}});var mi,hi={},vi=function(e,t,i){var n=document.createEvent("CustomEvent"),o={origEvent:e,target:e.target,releasePoint:t,pointerType:i||"touch"};n.initCustomEvent("pswpTap",true,true,o);e.target.dispatchEvent(n)};ee("Tap",{publicMethods:{initTap:function(){ne("firstTouchStart",r.onTapStart);ne("touchRelease",r.onTapRelease);ne("destroy",function(){hi={};mi=null})},onTapStart:function(e){if(e.length>1){clearTimeout(mi);mi=null}},onTapRelease:function(e,t){if(!t){return}if(!nt&&!tt&&!_e){var i=t;if(mi){clearTimeout(mi);mi=null;if(It(i,hi)){oe("doubleTap",i);return}}if(t.type==="mouse"){vi(e,t,"mouse");return}var n=e.target.tagName.toUpperCase();if(n==="BUTTON"||o.hasClass(e.target,"pswp__single-tap")){vi(e,t);return}pe(hi,i);mi=setTimeout(function(){vi(e,t);mi=null},300)}}}});var gi;ee("DesktopZoom",{publicMethods:{initDesktopZoom:function(){if(V){return}if(H){ne("mouseUsed",function(){r.setupDesktopZoom()})}else{r.setupDesktopZoom(true)}},setupDesktopZoom:function(t){gi={};var i="wheel mousewheel DOMMouseScroll";ne("bindEvents",function(){o.bind(e,i,r.handleMouseWheel)});ne("unbindEvents",function(){if(gi){o.unbind(e,i,r.handleMouseWheel)}});r.mouseZoomedIn=false;var n,a=function(){if(r.mouseZoomedIn){o.removeClass(e,"pswp--zoomed-in");r.mouseZoomedIn=false}if(C<1){o.addClass(e,"pswp--zoom-allowed")}else{o.removeClass(e,"pswp--zoom-allowed")}l()},l=function(){if(n){o.removeClass(e,"pswp--dragging");n=false}};ne("resize",a);ne("afterChange",a);ne("pointerDown",function(){if(r.mouseZoomedIn){n=true;o.addClass(e,"pswp--dragging")}});ne("pointerUp",l);if(!t){a()}},handleMouseWheel:function(e){if(C<=r.currItem.fitRatio){if(s.modal){if(!s.closeOnScroll||_e||et){e.preventDefault()}else if(N&&Math.abs(e.deltaY)>2){d=true;r.close()}}return true}e.stopPropagation();gi.x=0;if("deltaX"in e){if(e.deltaMode===1){gi.x=e.deltaX*18;gi.y=e.deltaY*18}else{gi.x=e.deltaX;gi.y=e.deltaY}}else if("wheelDelta"in e){if(e.wheelDeltaX){gi.x=-.16*e.wheelDeltaX}if(e.wheelDeltaY){gi.y=-.16*e.wheelDeltaY}else{gi.y=-.16*e.wheelDelta}}else if("detail"in e){gi.y=e.detail}else{return}we(C,true);var t=x.x-gi.x,i=x.y-gi.y;if(s.modal||t<=ft.min.x&&t>=ft.max.x&&i<=ft.min.y&&i>=ft.max.y){e.preventDefault()}r.panTo(t,i)},toggleDesktopZoom:function(t){t=t||{x:I.x/2+F.x,y:I.y/2+F.y};var i=s.getDoubleTapZoom(true,r.currItem);var n=C===i;r.mouseZoomedIn=!n;r.zoomTo(n?r.currItem.initialZoomLevel:i,t,333);o[(!n?"add":"remove")+"Class"](e,"pswp--zoomed-in")}}});var xi={history:true,galleryUID:1};var wi,yi,bi,Ii,Ci,Ti,Ei,Di,Si,_i,Mi,Fi,Oi=function(){return Mi.hash.substring(1)},ki=function(){if(wi){clearTimeout(wi)}if(bi){clearTimeout(bi)}},Ai=function(){var e=Oi(),t={};if(e.length<5){return t}var i,n=e.split("&");for(i=0;i<n.length;i++){if(!n[i]){continue}var o=n[i].split("=");if(o.length<2){continue}t[o[0]]=o[1]}if(s.galleryPIDs){var r=t.pid;t.pid=0;for(i=0;i<$t.length;i++){if($t[i].pid===r){t.pid=i;break}}}else{t.pid=parseInt(t.pid,10)-1}if(t.pid<0){t.pid=0}return t},Ri=function(){if(bi){clearTimeout(bi)}if(_e||et){bi=setTimeout(Ri,500);return}if(Ii){clearTimeout(yi)}else{Ii=true}var e=p+1;var t=ni(p);if(t.hasOwnProperty("pid")){e=t.pid}var i=Ei+"&"+"gid="+s.galleryUID+"&"+"pid="+e;if(!Di){if(Mi.hash.indexOf(i)===-1){_i=true}}var n=Mi.href.split("#")[0]+"#"+i;if(Fi){if("#"+i!==window.location.hash){history[Di?"replaceState":"pushState"]("",document.title,n)}}else{if(Di){Mi.replace(n)}else{Mi.hash=i}}Di=true;yi=setTimeout(function(){Ii=false},60)};ee("History",{publicMethods:{initHistory:function(){o.extend(s,xi,true);if(!s.history){return}Mi=window.location;_i=false;Si=false;Di=false;Ei=Oi();Fi="pushState"in history;if(Ei.indexOf("gid=")>-1){Ei=Ei.split("&gid=")[0];Ei=Ei.split("?gid=")[0]}ne("afterChange",r.updateURL);ne("unbindEvents",function(){o.unbind(window,"hashchange",r.onHashChange)});var e=function(){Ti=true;if(!Si){if(_i){history.back()}else{if(Ei){Mi.hash=Ei}else{if(Fi){history.pushState("",document.title,Mi.pathname+Mi.search)}else{Mi.hash=""}}}}ki()};ne("unbindEvents",function(){if(d){e()}});ne("destroy",function(){if(!Ti){e()}});ne("firstUpdate",function(){p=Ai().pid});var t=Ei.indexOf("pid=");if(t>-1){Ei=Ei.substring(0,t);if(Ei.slice(-1)==="&"){Ei=Ei.slice(0,-1)}}setTimeout(function(){if(f){o.bind(window,"hashchange",r.onHashChange)}},40)},onHashChange:function(){if(Oi()===Ei){Si=true;r.close();return}if(!Ii){Ci=true;r.goTo(Ai().pid);Ci=false}},updateURL:function(){ki();if(Ci){return}if(!Di){Ri()}else{wi=setTimeout(Ri,800)}}}});o.extend(r,Ae)};return e});(function(e,t){if(typeof define==="function"&&define.amd){define(t)}else if(typeof exports==="object"){module.exports=t()}else{e.PhotoSwipeUI_Default=t()}})(this,function(){"use strict";var e=function(e,t){var i=this;var n=false,o=true,r,a,l,s,u,f,c,d=true,p,m,h,v,g,x,w,y,b={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(e,t){if(!e.title){t.children[0].innerHTML="";return false}t.children[0].innerHTML=e.title;return true},closeEl:true,captionEl:true,fullscreenEl:true,zoomEl:true,shareEl:false,counterEl:true,arrowEl:true,preloaderEl:true,tapToClose:false,tapToToggleControls:true,clickToCloseNonZoomable:false,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/"+"?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:true}],downloadEl:true,getImageURLForShare:function(){return e.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return e.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},I,C;var T=function(e){if(I){return true}e=e||window.event;if(y.timeToIdle&&y.mouseUsed&&!m){P()}var i=e.target||e.srcElement,n,o=i.getAttribute("class")||"",r;for(var a=0;a<B.length;a++){n=B[a];if(n.onTap&&o.indexOf("pswp__"+n.name)>-1){n.onTap();r=true}}if(r){if(e.stopPropagation){e.stopPropagation()}I=true;var l=t.features.isOldAndroid?600:30;C=setTimeout(function(){I=false},l)}},E=function(){return!e.likelyTouchDevice||y.mouseUsed||screen.width>y.fitControlsWidth},D=function(e,i,n){t[(n?"add":"remove")+"Class"](e,"pswp__"+i)},S=function(){var e=y.getNumItemsFn()===1;if(e!==w){D(a,"ui--one-slide",e);w=e}},_=function(){D(c,"share-modal--hidden",d)},M=function(){d=!d;if(!d){_();setTimeout(function(){if(!d){t.addClass(c,"pswp__share-modal--fade-in")}},30)}else{t.removeClass(c,"pswp__share-modal--fade-in");setTimeout(function(){if(d){_()}},300)}if(!d){O()}return false},F=function(t){t=t||window.event;var i=t.target||t.srcElement;e.shout("shareLinkClick",t,i);if(!i.href){return false}if(i.hasAttribute("download")){return true}window.open(i.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,"+"location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100));if(!d){M()}return false},O=function(){var e="",t,i,n,o,r;for(var a=0;a<y.shareButtons.length;a++){t=y.shareButtons[a];n=y.getImageURLForShare(t);o=y.getPageURLForShare(t);r=y.getTextForShare(t);i=t.url.replace("{{url}}",encodeURIComponent(o)).replace("{{image_url}}",encodeURIComponent(n)).replace("{{raw_image_url}}",n).replace("{{text}}",encodeURIComponent(r));e+='<a href="'+i+'" target="_blank" '+'class="pswp__share--'+t.id+'"'+(t.download?"download":"")+">"+t.label+"</a>";if(y.parseShareButtonOut){e=y.parseShareButtonOut(t,e)}}c.children[0].innerHTML=e;c.children[0].onclick=F},k=function(e){for(var i=0;i<y.closeElClasses.length;i++){if(t.hasClass(e,"pswp__"+y.closeElClasses[i])){return true}}},A,R,L=0,P=function(){clearTimeout(R);L=0;if(m){i.setIdle(false)}},Z=function(e){e=e?e:window.event;var t=e.relatedTarget||e.toElement;if(!t||t.nodeName==="HTML"){clearTimeout(R);R=setTimeout(function(){i.setIdle(true)},y.timeToIdleOutside)}},z=function(){if(y.fullscreenEl&&!t.features.isOldAndroid){if(!r){r=i.getFullscreenAPI()}if(r){t.bind(document,r.eventK,i.updateFullscreen);i.updateFullscreen();t.addClass(e.template,"pswp--supports-fs")}else{t.removeClass(e.template,"pswp--supports-fs")}}},N=function(){if(y.preloaderEl){U(true);h("beforeChange",function(){clearTimeout(x);x=setTimeout(function(){if(e.currItem&&e.currItem.loading){if(!e.allowProgressiveImg()||e.currItem.img&&!e.currItem.img.naturalWidth){U(false)}}else{U(true)}},y.loadingIndicatorDelay)});h("imageLoadComplete",function(t,i){if(e.currItem===i){U(true)}})}},U=function(e){if(g!==e){D(v,"preloader--active",!e);g=e}},K=function(e){var i=e.vGap;if(E()){var n=y.barsSize;if(y.captionEl&&n.bottom==="auto"){if(!s){s=t.createEl("pswp__caption pswp__caption--fake");s.appendChild(t.createEl("pswp__caption__center"));a.insertBefore(s,l);t.addClass(a,"pswp__ui--fit")}if(y.addCaptionHTMLFn(e,s,true)){var o=s.clientHeight;i.bottom=parseInt(o,10)||44}else{i.bottom=n.top}}else{i.bottom=n.bottom==="auto"?0:n.bottom}i.top=n.top}else{i.top=i.bottom=0}},H=function(){if(y.timeToIdle){h("mouseUsed",function(){t.bind(document,"mousemove",P);t.bind(document,"mouseout",Z);A=setInterval(function(){L++;if(L===2){i.setIdle(true)}},y.timeToIdle/2)})}},W=function(){h("onVerticalDrag",function(e){if(o&&e<.95){i.hideControls()}else if(!o&&e>=.95){i.showControls()}});var e;h("onPinchClose",function(t){if(o&&t<.9){i.hideControls();e=true}else if(e&&!o&&t>.9){i.showControls()}});h("zoomGestureEnded",function(){e=false;if(e&&!o){i.showControls()}})};var B=[{name:"button--download",option:"downloadEl",onTap:function(){image_download(e.currItem.cwd,e.currItem.file)}},{name:"caption",option:"captionEl",onInit:function(e){l=e}},{name:"share-modal",option:"shareEl",onInit:function(e){c=e},onTap:function(){M()}},{name:"button--share",option:"shareEl",onInit:function(e){f=e},onTap:function(){M()}},{name:"button--zoom",option:"zoomEl",onTap:e.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(e){u=e}},{name:"button--close",option:"closeEl",onTap:e.close},{name:"button--arrow--left",option:"arrowEl",onTap:e.prev},{name:"button--arrow--right",option:"arrowEl",onTap:e.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){if(r.isFullscreen()){r.exit()}else{r.enter()}}},{name:"preloader",option:"preloaderEl",onInit:function(e){v=e}}];var Y=function(){var e,i,n;var o=function(o){if(!o){return}var r=o.length;for(var a=0;a<r;a++){e=o[a];i=e.className;for(var l=0;l<B.length;l++){n=B[l];if(i.indexOf("pswp__"+n.name)>-1){if(y[n.option]){t.removeClass(e,"pswp__element--disabled");if(n.onInit){n.onInit(e)}}else{t.addClass(e,"pswp__element--disabled")}}}}};o(a.children);var r=t.getChildByClass(a,"pswp__top-bar");if(r){o(r.children)}};i.init=function(){t.extend(e.options,b,true);y=e.options;a=t.getChildByClass(e.scrollWrap,"pswp__ui");h=e.listen;W();h("beforeChange",i.update);h("doubleTap",function(t){var i=e.currItem.initialZoomLevel;if(e.getZoomLevel()!==i){e.zoomTo(i,t,333)}else{e.zoomTo(y.getDoubleTapZoom(false,e.currItem),t,333)}});h("preventDragEvent",function(e,t,i){var n=e.target||e.srcElement;if(n&&n.getAttribute("class")&&e.type.indexOf("mouse")>-1&&(n.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(n.tagName))){i.prevent=false}});h("bindEvents",function(){t.bind(a,"pswpTap click",T);t.bind(e.scrollWrap,"pswpTap",i.onGlobalTap);if(!e.likelyTouchDevice){t.bind(e.scrollWrap,"mouseover",i.onMouseOver)}});h("unbindEvents",function(){if(!d){M()}if(A){clearInterval(A)}t.unbind(document,"mouseout",Z);t.unbind(document,"mousemove",P);t.unbind(a,"pswpTap click",T);t.unbind(e.scrollWrap,"pswpTap",i.onGlobalTap);t.unbind(e.scrollWrap,"mouseover",i.onMouseOver);if(r){t.unbind(document,r.eventK,i.updateFullscreen);if(r.isFullscreen()){y.hideAnimationDuration=0;r.exit()}r=null}});h("destroy",function(){if(y.captionEl){if(s){a.removeChild(s)}t.removeClass(l,"pswp__caption--empty")}if(c){c.children[0].onclick=null}t.removeClass(a,"pswp__ui--over-close");t.addClass(a,"pswp__ui--hidden");i.setIdle(false)});if(!y.showAnimationDuration){t.removeClass(a,"pswp__ui--hidden")}h("initialZoomIn",function(){if(y.showAnimationDuration){t.removeClass(a,"pswp__ui--hidden")}});h("initialZoomOut",function(){t.addClass(a,"pswp__ui--hidden")});h("parseVerticalMargin",K);Y();if(y.shareEl&&f&&c){d=true}S();H();z();N()};i.setIdle=function(e){m=e;D(a,"ui--idle",e)};i.update=function(){if(o&&e.currItem){i.updateIndexIndicator();if(y.captionEl){y.addCaptionHTMLFn(e.currItem,l);D(l,"caption--empty",!e.currItem.title)}n=true}else{n=false}if(!d){M()}S()};i.updateFullscreen=function(i){if(i){setTimeout(function(){e.setScrollOffset(0,t.getScrollY())},50)}t[(r.isFullscreen()?"add":"remove")+"Class"](e.template,"pswp--fs")};i.updateIndexIndicator=function(){if(y.counterEl){u.innerHTML=e.getCurrentIndex()+1+y.indexIndicatorSep+y.getNumItemsFn()}};i.onGlobalTap=function(n){n=n||window.event;var r=n.target||n.srcElement;if(I){return}if(n.detail&&n.detail.pointerType==="mouse"){if(k(r)){e.close();return}if(t.hasClass(r,"pswp__img")){if(e.getZoomLevel()===1&&e.getZoomLevel()<=e.currItem.fitRatio){if(y.clickToCloseNonZoomable){e.close()}}else{e.toggleDesktopZoom(n.detail.releasePoint)}}}else{if(y.tapToToggleControls){if(o){i.hideControls()}else{i.showControls()}}if(y.tapToClose&&(t.hasClass(r,"pswp__img")||k(r))){e.close();return}}};i.onMouseOver=function(e){e=e||window.event;var t=e.target||e.srcElement;D(a,"ui--over-close",k(t))};i.hideControls=function(){t.addClass(a,"pswp__ui--hidden");o=false};i.showControls=function(){o=true;if(!n){i.update()}t.removeClass(a,"pswp__ui--hidden")};i.supportsFullscreen=function(){var e=document;return!!(e.exitFullscreen||e.mozCancelFullScreen||e.webkitExitFullscreen||e.msExitFullscreen)};i.getFullscreenAPI=function(){var t=document.documentElement,i,n="fullscreenchange";if(t.requestFullscreen){i={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:n}}else if(t.mozRequestFullScreen){i={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+n}}else if(t.webkitRequestFullscreen){i={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+n}}else if(t.msRequestFullscreen){i={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}}if(i){i.enter=function(){p=y.closeOnScroll;y.closeOnScroll=false;if(this.enterK==="webkitRequestFullscreen"){e.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)}else{return e.template[this.enterK]()}};i.exit=function(){y.closeOnScroll=p;return document[this.exitK]()};i.isFullscreen=function(){return document[this.elementK]}}return i}};return e});